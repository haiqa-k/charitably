<!DOCTYPE html>
<html lang="en">
  <head>
    <script>
        //Function to show an alert if no events are present for the requested ZIP code
        function onLoadPage(){
          if ($('#sortable tr').length == 1) {
            alert("Oops! No events to display for this ZIP code :(");
          }
        }
        //Function that filters the dates from closest date to farthest
        function sortByAsc(c) {
          rows = document.getElementById("sortable").rows.length; // num of rows
          columns = document.getElementById("sortable").rows[0].cells.length; // num of columns
          arrTable = [...Array(rows)].map(e => Array(columns)); // create an empty 2d array

          for (ro=0; ro<rows; ro++) { // cycle through rows
              for (co=0; co<columns; co++) { // cycle through columns
                  // assign the value in each row-column to a 2d array by row-column
                  arrTable[ro][co] = document.getElementById("sortable").rows[ro].cells[co].innerHTML;
              }
          }

          th = arrTable.shift(); // remove the header row from the array, and save it
          
          // different column is clicked, so sort by the new column
          arrTable.sort(
            function (a, b) {
              if (a[c] === b[c]) {
                return 0;
              } else {
                return (a[c] < b[c]) ? -1 : 1;
                }
            }
              );
          

          arrTable.unshift(th); // put the header back in to the array

          // cycle through rows-columns placing values from the array back into the html table
          for (ro=0; ro<rows; ro++) {
              for (co=0; co<columns; co++) {
                  document.getElementById("sortable").rows[ro].cells[co].innerHTML = arrTable[ro][co];
              }
          }
      }
      //Function that filters the dates from farthest date to closest
      function sortByDsc(c) {
          rows = document.getElementById("sortable").rows.length; // num of rows
          columns = document.getElementById("sortable").rows[0].cells.length; // num of columns
          arrTable = [...Array(rows)].map(e => Array(columns)); // create an empty 2d array

          for (ro=0; ro<rows; ro++) { // cycle through rows
              for (co=0; co<columns; co++) { // cycle through columns
                  // assign the value in each row-column to a 2d array by row-column
                  arrTable[ro][co] = document.getElementById("sortable").rows[ro].cells[co].innerHTML;
              }
          }

          th = arrTable.shift(); // remove the header row from the array, and save it
          
          // different column is clicked, so sort by the new column
          arrTable.sort(
            function (a, b) {
              if (a[c] === b[c]) {
                return 0;
              } else {
                return (a[c] > b[c]) ? -1 : 1;
                }
            }
              );
          

          arrTable.unshift(th); // put the header back in to the array

          // cycle through rows-columns placing values from the array back into the html table
          for (ro=0; ro<rows; ro++) {
              for (co=0; co<columns; co++) {
                  document.getElementById("sortable").rows[ro].cells[co].innerHTML = arrTable[ro][co];
              }
          }
      }
    </script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://www.kryogenix.org/code/browser/sorttable/sorttable.js"></script>
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    

    <title>Charity Events & Causes Near Me</title>
    <style>
      a:link 
      { color: white; }
      td a { 
        display: block; 
        width: 100%;
      }
      .link:hover{
        color:  #00FF00;;
      }
      a:visited{
        color:white;
      }
      .heading{
       text-align: center;
      }

      .button {
        display: flex;
        height: 50px;
        padding: 0;
        background: #232b2b;
        border: none;
        outline: none;
        border-radius: 5px;
        overflow: hidden;
        font-family: "Quicksand", sans-serif;
        font-size: 16px;
        font-weight: 500;
        cursor: pointer;
        position: absolute;
        top: 10px;
        right: 10px;
      }

      .button:hover {
        background: #353839;
      }

      .button:active {
        background: #232b2b;
      }

      .button__text,
      .button__icon {
        display: inline-flex;
        align-items: center;
        padding: 0 24px;
        color: #fff;
        height: 100%;
      }

      .button__icon {
        font-size: 1.5em;
        background: rgba(0, 0, 0, 0.08);
      }

      .button2 {
        display: flex;
        height: 50px;
        padding: 0;
        background: #232b2b;
        border: none;
        outline: none;
        border-radius: 5px;
        overflow: hidden;
        font-family: "Quicksand", sans-serif;
        font-size: 16px;
        font-weight: 500;
        cursor: pointer;
        position: absolute;
        top: 10px;
        left: 10px;
      }

      .button2:hover {
        background: #353839;
      }

      .button2:active {
        background: #232b2b;
      }

      .button__text2,
      .button__icon2 {
        display: inline-flex;
        align-items: center;
        padding: 0 24px;
        color: #fff;
        height: 100%;
      }

      .button__icon2 {
        font-size: 1.5em;
        background: rgba(0, 0, 0, 0.08);
      }
      .container{
        color: white;
      }

      /* Dropdown Button */
    .dropbtn {
      /*background-color: #04AA6D;*/
      background: #232b2b;
      color: white;
      padding: 10px;
      font-size: 16px;
      border: none;
    }

    /* The container <div> - needed to position the dropdown content */
    .dropdown {
      position: relative;
      display: inline-block;
      left: 1235px;
      bottom: 10px;
   /*   padding-left: 1235px;
      padding-right: 350px;
      padding-bottom: 16px;*/
    }

    /* Dropdown Content (Hidden by Default) */
    .dropdown-content {
      display: none;
      position: absolute;
      background-color: #f1f1f1;
      min-width: 160px;
      box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
      z-index: 1;
    }

    /* Links inside the dropdown */
    .dropdown-content a {
      color: black;
      padding: 12px 16px;
      text-decoration: none;
      display: block;
    }

    /* Change color of dropdown links on hover */
    .dropdown-content a:hover {background-color: #ddd;}

    /* Show the dropdown menu on hover */
    .dropdown:hover .dropdown-content {display: block;}

    /* Change the background color of the dropdown button when the dropdown content is shown */
    .dropdown:hover .dropbtn {background-color: #353839;}
    </style>

    <!-- Bootstrap -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body style="background-color:#3b444b; margin:0;padding:0;" onLoad="onLoadPage()">

    <div class="heading">
    <!--   <div class="page-header"> -->
        <h1 style="text-align: center; color: white;">CHARITABLY</h1>
        <p style="text-align: center;color: white;">Charity Events & Causes Near You</p>
    <!--   </div> -->
      <script src="https://unpkg.com/ionicons@5.4.0/dist/ionicons.js"></script>
<!--       <script type="text/javascript">
        var zip_code = {{zip}}
        console.log("scrape zipcode", zip_code)
      </script> -->
      <script type="text/javascript">
        
        document.write('<a href="{{ url_for('map_func', zip = zip)}}"><button type="button" class="button"><span class="button__text">Map View</span><span class="button__icon"><ion-icon name="map-outline"></ion-icon></span></button></a>');
      </script>
 <!--      <a window.location.href="{{ url_for('map_func', zip = zip_code)}}">
        <button type="button" class="button">
        <span class="button__text">Map View</span>
        <span class="button__icon">
          <ion-icon name="map-outline"></ion-icon>
        </span>
      </button>
      <a>
 -->
      <a href="{{ url_for('home') }}">
      <button type="button2" class="button2">
        <span class="button__text2">Search ZIP code</span>
        <span class="button__icon2">
          <ion-icon name="search-outline"></ion-icon>
        </span>
      </button>
      <a>

    <p><br/><br/></p>

    </div>



  <div class="dropdown">
    <button class="dropbtn">Filter</button>
    <div class="dropdown-content">
      <a href="#" onclick="sortByAsc(1)">Nearest to Farthest Date</a>
      <a href="#" onclick="sortByDsc(1)">Farthest to Nearest Date</a>
    </div>
  </div>

    <div class="container">
      <table id="sortable" class="table table-bordered table-striped table-hover sortable" style="width: 100%; height: 100%;">
        <thead>
        <tr style="background-color:#353839;">
          <th class="text-center">Name</th>
          <th class="text-center">Start Date</th>
          <th class="text-center">End Date</th>
          <th class="text-center">Address</th>
          <th class="text-center">State</th>
          <th class="text-center">Summary</th>
        </tr>
        {% for item in list %}
        <tr style="background-color:#5c5c5c;">
          <td><u><a class="link" href="{{item.url}}">{{item.name}}</a></u></td>
          <td>{{item.start_date}}</td>
          <td>{{item.end_date}}</td>
          <td>{{item.street}}</td>
          <td>{{item.state}}</td>
          <td>{{item.description}}</td>
        </tr>
        {% endfor %}
        </thead>
      </table>
    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  </body>
</html>