{"version":3,"sources":["webpack:///../sdk/services/dist/mainConfig.js","webpack:///../sdk/services/node_modules/lodash/isFunction.js","webpack:///../sdk/services/node_modules/lodash/_baseGetTag.js","webpack:///../sdk/services/node_modules/lodash/_Symbol.js","webpack:///../sdk/services/node_modules/lodash/_root.js","webpack:///../sdk/services/node_modules/lodash/_freeGlobal.js","webpack:///../sdk/services/node_modules/lodash/_getRawTag.js","webpack:///../sdk/services/node_modules/lodash/_objectToString.js","webpack:///../sdk/services/node_modules/lodash/isObject.js","webpack:///../sdk/services/node_modules/lodash/isString.js","webpack:///../sdk/services/node_modules/lodash/isArray.js","webpack:///../sdk/services/node_modules/lodash/isObjectLike.js","webpack:///../sdk/services/node_modules/lodash/isNil.js","webpack:///../sdk/services/node_modules/lodash/isInteger.js","webpack:///../sdk/services/node_modules/lodash/toInteger.js","webpack:///../sdk/services/node_modules/lodash/toFinite.js","webpack:///../sdk/services/node_modules/lodash/toNumber.js","webpack:///../sdk/services/node_modules/lodash/isSymbol.js","webpack:///../sdk/services/node_modules/lodash/has.js","webpack:///../sdk/services/node_modules/lodash/_baseHas.js","webpack:///../sdk/services/node_modules/lodash/_hasPath.js","webpack:///../sdk/services/node_modules/lodash/_castPath.js","webpack:///../sdk/services/node_modules/lodash/_isKey.js","webpack:///../sdk/services/node_modules/lodash/_stringToPath.js","webpack:///../sdk/services/node_modules/lodash/_memoizeCapped.js","webpack:///../sdk/services/node_modules/lodash/memoize.js","webpack:///../sdk/services/node_modules/lodash/_MapCache.js","webpack:///../sdk/services/node_modules/lodash/_mapCacheClear.js","webpack:///../sdk/services/node_modules/lodash/_Hash.js","webpack:///../sdk/services/node_modules/lodash/_hashClear.js","webpack:///../sdk/services/node_modules/lodash/_nativeCreate.js","webpack:///../sdk/services/node_modules/lodash/_getNative.js","webpack:///../sdk/services/node_modules/lodash/_baseIsNative.js","webpack:///../sdk/services/node_modules/lodash/_isMasked.js","webpack:///../sdk/services/node_modules/lodash/_coreJsData.js","webpack:///../sdk/services/node_modules/lodash/_toSource.js","webpack:///../sdk/services/node_modules/lodash/_getValue.js","webpack:///../sdk/services/node_modules/lodash/_hashDelete.js","webpack:///../sdk/services/node_modules/lodash/_hashGet.js","webpack:///../sdk/services/node_modules/lodash/_hashHas.js","webpack:///../sdk/services/node_modules/lodash/_hashSet.js","webpack:///../sdk/services/node_modules/lodash/_ListCache.js","webpack:///../sdk/services/node_modules/lodash/_listCacheClear.js","webpack:///../sdk/services/node_modules/lodash/_listCacheDelete.js","webpack:///../sdk/services/node_modules/lodash/_assocIndexOf.js","webpack:///../sdk/services/node_modules/lodash/eq.js","webpack:///../sdk/services/node_modules/lodash/_listCacheGet.js","webpack:///../sdk/services/node_modules/lodash/_listCacheHas.js","webpack:///../sdk/services/node_modules/lodash/_listCacheSet.js","webpack:///../sdk/services/node_modules/lodash/_Map.js","webpack:///../sdk/services/node_modules/lodash/_mapCacheDelete.js","webpack:///../sdk/services/node_modules/lodash/_getMapData.js","webpack:///../sdk/services/node_modules/lodash/_isKeyable.js","webpack:///../sdk/services/node_modules/lodash/_mapCacheGet.js","webpack:///../sdk/services/node_modules/lodash/_mapCacheHas.js","webpack:///../sdk/services/node_modules/lodash/_mapCacheSet.js","webpack:///../sdk/services/node_modules/lodash/toString.js","webpack:///../sdk/services/node_modules/lodash/_baseToString.js","webpack:///../sdk/services/node_modules/lodash/_arrayMap.js","webpack:///../sdk/services/node_modules/lodash/isArguments.js","webpack:///../sdk/services/node_modules/lodash/_baseIsArguments.js","webpack:///../sdk/services/node_modules/lodash/_isIndex.js","webpack:///../sdk/services/node_modules/lodash/isLength.js","webpack:///../sdk/services/node_modules/lodash/_toKey.js","webpack:///../sdk/services/node_modules/uuid/dist/index.js","webpack:///../sdk/services/node_modules/uuid/dist/v1.js","webpack:///../sdk/services/node_modules/uuid/dist/rng.js","webpack:///external \"crypto\"","webpack:///../sdk/services/node_modules/uuid/dist/stringify.js","webpack:///../sdk/services/node_modules/uuid/dist/validate.js","webpack:///../sdk/services/node_modules/uuid/dist/regex.js","webpack:///../sdk/services/node_modules/uuid/dist/v3.js","webpack:///../sdk/services/node_modules/uuid/dist/v35.js","webpack:///../sdk/services/node_modules/uuid/dist/parse.js","webpack:///../sdk/services/node_modules/uuid/dist/md5.js","webpack:///../sdk/services/node_modules/uuid/dist/v4.js","webpack:///../sdk/services/node_modules/uuid/dist/v5.js","webpack:///../sdk/services/node_modules/uuid/dist/sha1.js","webpack:///../sdk/services/node_modules/uuid/dist/nil.js","webpack:///../sdk/services/node_modules/uuid/dist/version.js","webpack:///../sdk/services/node_modules/lodash/isUndefined.js","webpack:///../sdk/services/node_modules/whatwg-url/lib/public-api.js","webpack:///../sdk/services/node_modules/whatwg-url/lib/URL.js","webpack:///../sdk/services/node_modules/webidl-conversions/lib/index.js","webpack:///../sdk/services/node_modules/whatwg-url/lib/utils.js","webpack:///../sdk/services/node_modules/whatwg-url/lib/URL-impl.js","webpack:///../sdk/services/node_modules/whatwg-url/lib/url-state-machine.js","webpack:///external \"punycode\"","webpack:///../sdk/services/node_modules/tr46/index.js","webpack:///../sdk/services/node_modules/lodash/isEmpty.js","webpack:///../sdk/services/node_modules/lodash/_baseKeys.js","webpack:///../sdk/services/node_modules/lodash/_isPrototype.js","webpack:///../sdk/services/node_modules/lodash/_nativeKeys.js","webpack:///../sdk/services/node_modules/lodash/_overArg.js","webpack:///../sdk/services/node_modules/lodash/_getTag.js","webpack:///../sdk/services/node_modules/lodash/_DataView.js","webpack:///../sdk/services/node_modules/lodash/_Promise.js","webpack:///../sdk/services/node_modules/lodash/_Set.js","webpack:///../sdk/services/node_modules/lodash/_WeakMap.js","webpack:///../sdk/services/node_modules/lodash/isArrayLike.js","webpack:///../sdk/services/node_modules/lodash/isBuffer.js","webpack:///../sdk/services/node_modules/lodash/stubFalse.js","webpack:///../sdk/services/node_modules/lodash/isTypedArray.js","webpack:///../sdk/services/node_modules/lodash/_baseIsTypedArray.js","webpack:///../sdk/services/node_modules/lodash/_baseUnary.js","webpack:///../sdk/services/node_modules/lodash/_nodeUtil.js","webpack:///../sdk/services/node_modules/lodash/castArray.js","webpack:///../sdk/services/node_modules/lodash/flatten.js","webpack:///../sdk/services/node_modules/lodash/_baseFlatten.js","webpack:///../sdk/services/node_modules/lodash/_arrayPush.js","webpack:///../sdk/services/node_modules/lodash/_isFlattenable.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///webpack/runtime/node module decorator","webpack:///./services/requester/analytics.js","webpack:///./core/serviceTypes.js","webpack:///./services/services/utils.js","webpack:///./services/config/language/mappings.js","webpack:///./services/services/validators/key.js","webpack:///./services/services/validators/number.js","webpack:///./services/services/validators/oneOfValue.js","webpack:///./services/services/validators.js","webpack:///./services/model/pointFacade.js","webpack:///./services/utils/pointUtils.js","webpack:///./services/model/modelUtils.js","webpack:///./services/model/search/search.js","webpack:///./services/model/search/batchModel.js","webpack:///./services/common/parameterApplications.js","webpack:///./services/model/modelResponse.js","webpack:///./services/endpoints/endpoints.js","webpack:///./services/error/ValidationError.js","webpack:///./services/model/Field.js","webpack:///./services/services/deprecationHandler.js","webpack:///./services/services/service.js","webpack:///./services/services/serviceFactory.js","webpack:///./services/requester/template.js","webpack:///external \"stream\"","webpack:///external \"http\"","webpack:///external \"url\"","webpack:///external \"https\"","webpack:///external \"zlib\"","webpack:///../sdk/services/node_modules/node-fetch/lib/index.mjs","webpack:///./services/requester/fetch/nodeFetch.js","webpack:///./services/requester/helpers.js","webpack:///./services/requester/json.js","webpack:///./services/requester/text.js","webpack:///./services/requester/requester.js","webpack:///./services/rest/request/requestParamsFactory.js","webpack:///./services/rest/request/contentTypeConfigurer.js","webpack:///./services/rest/request/singleRequestServiceFactory.js","webpack:///./services/rest/utils.js","webpack:///./services/requester/urlBuilder.js","webpack:///./services/rest/request/batchRequestStrategy.js","webpack:///./services/rest/request/asyncRedirectModeFactory.js","webpack:///./services/rest/request/batchRequestServiceFactory.js","webpack:///./services/rest/request/matrixFactory.js","webpack:///./services/services/search/additionalData.js","webpack:///./services/services/converters.js","webpack:///./services/common/searchTypes.js","webpack:///./services/services/search/alongRouteSearch.js","webpack:///./services/services/postValidators.js","webpack:///./services/services/search/searchParameters.js","webpack:///./services/services/search/search.js","webpack:///./services/services/search/categorySearch.js","webpack:///./services/services/search/evChargingStationsAvailability.js","webpack:///./services/services/search/fuzzySearch.js","webpack:///./services/services/search/geometrySearch.js","webpack:///./services/services/search/nearbySearch.js","webpack:///./services/services/search/placeById.js","webpack:///./services/services/search/poiCategories.js","webpack:///./services/services/search/poiDetails.js","webpack:///./services/services/search/poiPhotos.js","webpack:///./services/services/search/poiSearch.js","webpack:///./services/services/search/autocomplete.js","webpack:///./services/model/reverseGeocode/reverseGeocode.js","webpack:///./services/model/reverseGeocode/batchReverseGeocode.js","webpack:///./services/services/reverseGeocode/reverseGeocodeBase.js","webpack:///./services/services/reverseGeocode/types.js","webpack:///./services/services/reverseGeocode/reverseGeocodeParameters.js","webpack:///./services/services/reverseGeocode/reverseGeocode.js","webpack:///./services/model/geocode/geocode.js","webpack:///./services/model/geocode/batchGeocode.js","webpack:///./services/services/geocode/geocode.js","webpack:///./services/services/geocode/geocodeParameters.js","webpack:///./services/services/reverseGeocode/crossStreetLookup.js","webpack:///./services/services/structuredGeocode/structuredGeocode.js","webpack:///./services/services/structuredGeocode/structureGeocodeParameters.js","webpack:///./services/services/routing/commonRoutingParameters.js","webpack:///./services/services/routing/calculateReachableRangeParameters.js","webpack:///./services/model/routing/calculateReachableRange.js","webpack:///./services/model/routing/batchCalculateReachableRange.js","webpack:///./services/services/routing/calculateReachableRange.js","webpack:///./services/model/routing/helpers/getRouteFeature.js","webpack:///./services/model/routing/calculateRoute.js","webpack:///./services/model/routing/batchCalculateRoute.js","webpack:///./services/services/routing/routingParameters.js","webpack:///./services/services/routing/calculateRoute.js","webpack:///./services/services/routing/longDistanceEVRoutingParameters.js","webpack:///./services/services/routing/longDistanceEVRouting.js","webpack:///./services/model/routing/matrixRouting.js","webpack:///./services/services/routing/matrixParameters.js","webpack:///./services/services/routing/matrixRouting.js","webpack:///./services/services/incidentViewport.js","webpack:///./services/model/traffic/flowSegmentData.js","webpack:///./services/services/trafficFlowSegmentData.js","webpack:///./services/utils/arrayMerge.js","webpack:///./services/model/traffic/incidentDetails.js","webpack:///./services/services/incidentDetails.js","webpack:///./core/constants.js","webpack:///./services/services/incidentDetailsV5.js","webpack:///./services/services/staticImage/staticImage.js","webpack:///./services/services/copyrights/copyrights.js","webpack:///./services/services/copyrights/copyrightsParameters.js","webpack:///./services/services/copyrights/copyrightsCaption.js","webpack:///./services/services/copyrights/copyrightsV2.js","webpack:///./services/services/copyrights/copyrightsCaptionV2.js","webpack:///./services/index.js"],"names":["origin","module","exports","baseGetTag","isObject","value","tag","Symbol","getRawTag","objectToString","symToStringTag","toStringTag","undefined","Object","freeGlobal","freeSelf","self","root","Function","global","objectProto","prototype","hasOwnProperty","nativeObjectToString","toString","isOwn","call","unmasked","e","result","type","isArray","isObjectLike","Array","toInteger","toFinite","remainder","toNumber","INFINITY","isSymbol","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","other","valueOf","replace","isBinary","test","slice","baseHas","hasPath","object","path","key","castPath","isArguments","isIndex","isLength","toKey","hasFunc","index","length","isKey","stringToPath","reIsDeepProp","reIsPlainProp","memoizeCapped","rePropName","reEscapeChar","string","charCodeAt","push","match","number","quote","subString","memoize","func","cache","size","clear","MapCache","resolver","TypeError","memoized","args","arguments","apply","this","has","get","set","Cache","mapCacheClear","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","entries","entry","Hash","ListCache","Map","__data__","hashClear","hashDelete","hashGet","hashHas","hashSet","nativeCreate","getNative","baseIsNative","getValue","isFunction","isMasked","toSource","reIsHostCtor","funcProto","funcToString","reIsNative","RegExp","uid","coreJsData","maskSrcKey","exec","keys","IE_PROTO","data","listCacheClear","listCacheDelete","listCacheGet","listCacheHas","listCacheSet","assocIndexOf","splice","pop","eq","array","getMapData","isKeyable","map","baseToString","arrayMap","symbolProto","symbolToString","iteratee","baseIsArguments","propertyIsEnumerable","reIsUint","defineProperty","enumerable","_v","default","_v2","_v3","_v4","_nil","_version","_validate","_stringify","_parse","_interopRequireDefault","obj","__esModule","_rng","_nodeId","_clockseq","_lastMSecs","_lastNSecs","_default","options","buf","offset","i","b","node","clockseq","seedBytes","random","rng","msecs","Date","now","nsecs","dt","Error","tl","tmh","n","poolPtr","rnds8Pool","_crypto","randomFillSync","Uint8Array","require","byteToHex","substr","arr","uuid","toLowerCase","_regex","_md","name","version","hashfunc","generateUUID","namespace","str","unescape","encodeURIComponent","bytes","stringToBytes","err","DNS","URL","v","Buffer","from","createHash","update","digest","rnds","_sha","serializeURL","serializeURLOrigin","basicURLParse","setTheUsername","setThePassword","serializeHost","serializeInteger","parseURL","conversions","utils","Impl","impl","implSymbol","url","setup","toJSON","is","href","V","configurable","protocol","username","password","host","hostname","port","pathname","search","hash","implementation","constructorArgs","privateData","create","wrapper","wrapperSymbol","interface","expose","Window","Worker","sign","x","createNumberConversion","bitLength","typeOpts","unsigned","lowerBound","Math","pow","upperBound","moduloVal","moduloBitLength","moduloBound","opts","enforceRange","Number","isFinite","floor","abs","isNaN","clamp","round","evenRound","val","treatNullAsEmptyString","String","c","codePointAt","S","U","fromCodePoint","d","a","join","mixin","target","source","getOwnPropertyNames","getOwnPropertyDescriptor","wrapperForImpl","implForWrapper","usm","base","parsedBase","parsedURL","baseURL","_url","scheme","stateOverride","cannotHaveAUsernamePasswordPort","cannotBeABaseURL","query","input","substring","fragment","punycode","tr46","specialSchemes","ftp","file","gopher","http","https","ws","wss","failure","countSymbols","ucs2","decode","at","idx","isASCIIDigit","isASCIIAlpha","isASCIIHex","isSingleDot","buffer","isWindowsDriveLetterString","isSpecialScheme","isSpecial","percentEncode","hex","toUpperCase","isC0ControlPercentEncode","extraPathPercentEncodeSet","Set","isPathPercentEncode","extraUserinfoPercentEncodeSet","isUserinfoPercentEncode","percentEncodeChar","encodeSetPredicate","cStr","utf8PercentEncode","parseIPv4Number","R","charAt","parseHost","isSpecialArg","address","pieceIndex","compress","pointer","numbersSeen","ipv4Piece","swaps","temp","parseIPv6","output","decoded","parseOpaqueHost","domain","utf8PercentDecode","asciiDomain","toASCII","PROCESSING_OPTIONS","NONTRANSITIONAL","ipv4Host","parts","split","numbers","part","ipv4","counter","parseIPv4","serializeIPv4","maxIdx","maxLen","currStart","currLen","len","findLongestZeroSequence","ignore0","serializeIPv6","shortenPath","includesCredentials","URLStateMachine","encodingOverride","parseError","res","trimControlChars","trimTabAndNewline","state","atFlag","arrFlag","passwordTokenSeenFlag","ret","isASCIIAlphanumeric","codePoint","encodedCodePoints","fileOtherwiseCodePoints","cp1","cp2","shift","excludeFragment","tuple","serializeOrigin","integer","mappingTable","TRANSITIONAL","normalize","s","findStatus","start","end","mid","regexAstralSymbols","combiningMarksRegex","validateLabel","label","processing_option","toUnicode","error","indexOf","status","processing","domain_name","useSTD3","hasError","processed","mapChars","labels","validation","verifyDnsLength","l","total","baseKeys","getTag","isArrayLike","isBuffer","isPrototype","isTypedArray","nativeKeys","Ctor","constructor","overArg","transform","arg","DataView","Promise","WeakMap","mapTag","promiseTag","setTag","weakMapTag","dataViewTag","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","ArrayBuffer","resolve","ctorString","stubFalse","freeExports","nodeType","freeModule","baseIsTypedArray","baseUnary","nodeUtil","nodeIsTypedArray","typedArrayTags","freeProcess","process","types","binding","baseFlatten","arrayPush","isFlattenable","depth","predicate","isStrict","values","spreadableSymbol","isConcatSpreadable","__webpack_module_cache__","__webpack_require__","moduleId","id","loaded","__webpack_modules__","getter","definition","o","prop","r","nmd","paths","children","sdkInfo","mainConfig","headerName","getGlobalAnalytics","__tomtomAnalyticsInfo_","getHeaderContent","prodInfo","productInfo","getAnalyticsHeader","header","SERVICE_TYPES","isValidNumber","isValidValue","numberIsNaN","cloneProperties","clonedObject","property","addNewField","field","newFields","extend","src","validateAgainstSetOfValues","arrayOfValues","messageIfNotFound","convertFieldStringIntoObject","fieldRegex","parserRecursive","rootLevel","char","clone","pointRegex","circleRegex","addFields","defaultFields","mappings","traffic","ar","routing","defaultValue","NGT","incidentV5","keyValidator","isString","numberValidator","numValue","parseFloat","oneOfValueValidator","paramName","connectorNames","plugTypes","facilityTypes","mapsLangCodes","fuelTypes","incidentDetailsAvailableFields","isDateRfc3339","dateString","isNumberInInterval","min","max","checkArray","throwTypeErrorWhen","condition","message","checkLongitude","checkChargingMode","chargingMode","checkChargingCurve","chargingCurve","checkChargingConnections","chargingConnections","forEach","element","checkChargingCurveSupportPoint","chargingCurveSupportPoint","chargeInkWh","MAX_VALUE","timeToChargeInSeconds","checkChargingConnection","chargingConnection","checkPlugType","plugType","checkFacilityType","facilityType","checkLatitude","checkPointObjectOrArray","point","lat","lon","filter","lng","validateField","validators","validator","required","validateNumberInInterval","errorMsg","integerRequired","isNil","isInteger","validateIntInInterval","validateAllowedTypes","allowedTypes","checkDateRfc3339","trackingId","bool","Boolean","naturalInteger","positiveInteger","validateBoundingBox","bbox","hasBoundingBoxFields","minLat","maxLat","minLon","maxLon","checkBBoxNormalized","numberInInterval","integerInInterval","zoomLevel","countryCode","languageCode","langCode","searchLanguageCodes","searchLanguageMap","countrySet","stringValue","connectorSet","fuelSet","mapcodes","mapcodesValues","countrySetAlpha3","allowEmpty","isPointValid","fuzzinessLevel","limit","entityType","entityTypeValues","geometryList","geoObject","waitTimeSeconds","clientTime","PointFacade","convert","_isSinglePoint","_convertPoint","_convertToArrayOfPoints","bind","_covertToDefaultFormat","longitude","latitude","y","isLatLon","_convertStringPoint","p","customPointConverter","pointFacade","convertResponsePoints","elem","boundingBox","btmRightPoint","topLeftPoint","viewport","position","summary","geoBias","setProperty","properties","propertyName","newFeature","geometry","coordinates","getFeature","feature","toGeoJson","features","results","convertEntryPoints","entryPoints","entryPoint","searchModel","assign","batchModel","batchItems","batchItem","response","modelResponse","modelCallback","modeledResponseData","modeledResponse","getTrackingId","copyrightsWorldEndpoint","copyrightsBoundsEndpoint","copyrightsZoomEndpoint","captionEndpoint","copyrightsV2Endpoint","captionV2Endpoint","batchSearchEndpoint","batchSyncSearchEndpoint","batchSearchQueryEndpoint","geocodeEndpoint","reverseGeocodeEndpoint","batchReverseGeocodeQueryEndpoint","structuredGeocodeEndpoint","searchEndpoint","batchStructuredGeocodeQueryEndpoint","adpEndpoint","batchAdpQueryEndpoint","nearbySearchEndpoint","batchNearbySearchQueryEndpoint","autocompleteEndpoint","poiCategoriesEndpoint","chargingAvailabilityEndpoint","batchChargingAvailabilityQueryEndpoint","poiDetailsEndpoint","poiPhotosEndpoint","placeByIdEndpoint","routingEndpoint","calculateReachableRangeEndpoint","batchRoutingQueryEndpoint","batchRoutingEndpoint","batchSyncRoutingEndpoint","matrixRoutingEndpoint","matrixSyncRoutingEndpoint","batchReachableRangeQueryEndpoint","longDistanceEVRoutingEndpoint","incidentDetailsEndpoint","incidentDetailsV5Endpoint","incidentViewportEndpoint","flowSegmentDataEndpoint","staticMapImageEndpoint","ValidationError","errors","params","super","captureStackTrace","consolidatedErrorMessages","dateRegex","Field","converters","deprecationDate","_validateFields","_isArrayOfFunctions","parse","getDefaultValue","getConverters","getValidators","getDeprecationDate","isRequired","log","_isLogPrinted","serviceName","serviceLog","_setLog","_displayWarning","date","isPastCurrentDate","serviceNameMsg","console","warn","checkDeprecation","runValidators","convertToFields","fields","convertedFields","internalValidator","isAppliedForAll","deprecationHandler","validationErrors","serviceType","converted","fieldValue","reduce","converter","processBatchItems","batchProperties","batchErrors","param","convertedField","concat","batchMode","validateTrackingId","goPrototype","callback","abortSignal","serviceFactory","handleServiceCall","handleBatchServiceCall","batchFields","additionalOptions","serviceCall","opt","serviceFields","template","_","isUndefined","Readable","BUFFER","TYPE","Blob","blobParts","buffers","isView","byteOffset","byteLength","ab","readable","_read","relativeStart","relativeEnd","span","slicedBuffer","blob","FetchError","systemError","code","errno","defineProperties","writable","INTERNALS","PassThrough","Body","body","_this","_ref","_ref$size","_ref$timeout","timeout","isURLSearchParams","isBlob","disturbed","on","consumeBody","_this4","reject","alloc","stream","accum","accumBytes","abort","resTimeout","setTimeout","chunk","clearTimeout","append","delete","getAll","sort","arrayBuffer","instance","p1","p2","bodyUsed","getBoundary","pipe","extractContentType","getTotalBytes","getLengthSync","_lengthRetrievers","hasKnownLength","then","ct","headers","_this2","JSON","_this3","charset","convertBody","json","text","mixIn","proto","desc","invalidTokenRegex","invalidHeaderCharRegex","validateName","validateValue","find","Headers","init","rawHeaders","raw","headerNames","method","iterator","pairs","pair","thisArg","getHeaders","_pairs$i","createHeadersIterator","kind","k","INTERNAL","HeadersIteratorPrototype","setPrototypeOf","getPrototypeOf","_INTERNAL","done","exportNodeCompatibleHeaders","__proto__","hostHeaderKey","INTERNALS$1","STATUS_CODES","Response","contentType","statusText","ok","redirected","INTERNALS$2","parse_url","format_url","urlStr","streamDestructionSupported","isRequest","Request","inputBody","signal","isAbortSignal","redirect","follow","agent","AbortError","URL$1","PassThrough$1","fetch","request","contentLengthValue","totalBytes","getNodeRequestOptions","send","destroy","emit","aborted","abortAndFinalize","finalize","req","reqTimeout","removeEventListener","addEventListener","once","socket","createHeadersLenient","isRedirect","statusCode","location","locationURL","requestOpts","destination","original","orig","dest","endsWith","isDomainOrSubdomain","response_options","statusMessage","codings","zlibOptions","flush","finishFlush","write","writeToStream","getRequestConfiguration","transformResponse","pathParameters","requestOptions","mode","performRequest","getData","fetchProxy","withQueryParams","_getOriginalResponse","requestType","trackingIdHeader","catch","errorResponse","getResponseText","getResponseJson","detailedError","description","queryParameters","queryParamValue","createKeyValueString","mapQueryParamToKeyValueString","addObjectBodyParams","bodyParams","stringify","ex","headerValue","setHeader","config","bodyParameters","addBodyParams","useHttp","getProtocol","isQueryParameter","fieldEntry","application","parameterApplications","isPathParam","isPostParam","isOtherParam","isHeaderParam","getFieldEntryNames","fieldName","createParamsNames","paramsFilterFunction","createQueryParamsNames","createPathParamsNames","createPostParamsNames","createOtherParamsNames","createHeaderParamsNames","createParams","createParamNamesFunction","paramValue","cast","createRequestParams","pathParams","queryParams","postParams","otherParams","headerParams","setField","copiedFields","setValue","singleRequestServiceFactory","endpoint","httpOptions","isEmpty","urlTemplate","batchRequestStrategy","endpoints","async","sync","redirectMode","batchRequestServiceFactory","maxNoOfElementsInBatchRequest","batchEndpoints","rawBatchItems","item","urlBuilder","single","post","batchSync","batch","mainPostParamsName","getBodyParams","origins","destinations","optionalBodyParams","optionalBodyParamsNames","accumulator","getOptionalBodyParams","validateString","geometries","geometriesZoom","additionalData","singleAdpRequest","batchAdpRequest","normalizeLatitude","numLatitude","ceil","normalizeLongitude","numLongitude","castPoint","reverse","isLatLonFunction","latlon","first","second","xy","isLatitudeLongitude","castBoundingBox","sw","ne","isLatLonBBox","isRightLeftTopBottomBBox","left","bottom","right","top","getWest","getEast","getSouth","getNorth","isWestEastNorthSouthBBox","getNorthEast","getSouthWest","trim","languageConverter","mapping","language","synonyms","castAndNormalizePoint","convertPointOrCircle","radius","circleFromString","extractPointsFromPolygon","inputPoints","points","convertPointToLatitudeLongitude","splitPoint","convertBoundingBox","w","normalizeBoundingBox","dateTime","toISOString","figure","figureName","vertices","searchLanguage","arrayOfStrings","constantSpeedConsumption","commaSeparated","castArray","validateKey","maxDetourTime","validateIntegerInInterval","spreadingMode","validateOneOfValue","route","brandSet","categorySet","validateConnectorSet","minPowerKW","validateNumber","maxPowerKW","openingHours","timeZone","sortBy","detourOffset","validateBool","view","alongRouteSearch","singleRequest","batchRequest","engineType","validateFloat","consumptionPairsValidator","speedsAndConsumptions","sortedKeys","keysLength","validateIfPointsGreaterOrEqual","checkIfCorrectEngineType","vehicleEngineType","validateDependantParameters","paramName1","paramName2","validateTravelMode","travelMode","hasConstantSpeedConsumption","constantSpeedConsumptionInLitersPerHundredkm","constantSpeedConsumptionInkWhPerHundredkm","speedPairs","floatAndEngineType","efficiencyParameter","validateEfficiencyParameters","chargeParameter","budgetInRange","maxBudget","currentBudgetProvided","currentChargeInkWh","energyBudgetInkWh","currentFuelInLiters","fuelBudgetInLiters","requiredWithSpecificEngineType","consumptionInLiters","consumptionInWatts","electricEngine","firstParamCannotBeUsedWithSecond","paramNameUsed","paramNameToAvoid","requiresDependantParameter","parameterName","dependantParameter","notRequiredWithCategoryNorBrandSet","isQueryAbsent","isBrandSetAbsent","isCategorySetAbsent","consumptionRecuperationAltitudeParameter","recuperationInkWhPerkmAltitudeLoss","consumptionInkWhPerkmAltitudeGain","__all","typeahead","validateLimit","validateOffset","validateLanguageCode","convertLanguage","validateCountrySet","validateNaturalInteger","center","convertPoint","validatePoint","bestResult","bestResults","ofs","extendedPostalCodesFor","validateMapcodes","validateFuelSet","relatedPois","topLeft","btmRight","Search","searchParams","_getRestService","construct","service","CategorySearch","visible","categorySearch","chargingAvailability","evChargingStationsAvailability","FuzzySearch","minFuzzyLevel","validateFuzzinessLevel","maxFuzzyLevel","idxSet","entityTypeSet","convertArray","convertCommaSeparated","validateEntityType","sessionId","validateClientTime","fuzzySearch","GeometrySearch","validateGeometryList","convertGeometryList","geometrySearch","NearbySearch","nearbySearch","entityId","placeById","poiCategories","poiDetails","height","validateInteger","convertInteger","width","poiPhotos","PoiSearch","poiSearch","resultSet","autocomplete","convertPoints","northEast","southWest","reverseGeocodeModel","addresses","ReverseGeocodeBase","reverseGeocodeConstructor","reverseGeocode","crossStreetLookup","reverseGeocodeType","crossStreetLookupType","geocodeBaseFields","heading","allowFreeformNewline","additionalGeocodeFields","returnSpeedLimit","returnRoadUse","roadUse","roadUseValues","elements","streetNumber","returnMatchType","crossStreetLookupFields","reverseGeocodeParams","ReverseGeocodeBasePrototype","reverseGeocodeBase","ReverseGeocode","geocodeModel","validatePositiveInteger","geocodeParams","geocode","CrossStreetLookup","validateCountryCode","streetName","crossStreet","municipality","municipalitySubdivision","countryTertiarySubdivision","countrySecondarySubdivision","countrySubdivision","postalCode","modifyRequestParams","checkBestResult","structuredGeocode","routeType","avoid","validateArrayOfValues","convertArrayOfStrings","departAt","convertDateTime","arriveAt","hilliness","windingness","report","vehicleMaxSpeed","vehicleWeight","accelerationEfficiency","decelerationEfficiency","uphillEfficiency","downhillEfficiency","hasEfficiencyParameterSet","vehicleAxleWeight","vehicleLength","vehicleWidth","vehicleHeight","vehicleCommercial","vehicleLoadType","convertConstantSpeedConsumption","auxiliaryPowerInLitersPerHour","fuelEnergyDensityInMJoulesPerLiter","efficiencyParameterRequired","maxChargeInkWh","auxiliaryPowerInkW","avoidAreas","rectangles","area","southWestCorner","northEastCorner","avoidVignette","validateCountrySetAlpha3","allowVignette","vehicleAdrTunnelRestrictionCode","numberOfSetParams","budget","forbiddenAvoid","distanceBudgetInMeters","timeBudgetInSec","commonRoutingParameters","reachableRange","boundary","reachableRangeModel","fieldsToSkip","calculateReachableRangeParameters","calculateReachableRange","batchReachableRangeModel","getCoordinates","getRouteFeature","isMultiLineString","legs","sections","segmentSummary","guidance","calculateRouteModel","routes","leg","toRouteSectionsCollection","featureCollection","section","startPointIndex","endPointIndex","lngLat","lineString","sectionType","simpleCategory","effectiveSpeedInKmh","delayInSeconds","tec","batchCalculateRouteModel","routingModel","routingParameters","alternativeType","locations","circle","routingLocation","maxAlternatives","instructionsType","routingGuidanceLanguageValues","routingLanguageMap","computeBestOrder","routeRepresentation","computeTravelTimeFor","vehicleHeading","minDeviationDistance","minDeviationTime","supportingPoints","arrayOfPoints","prepareSupportingPoints","getRoutingParameters","calculateRoute","extendedFields","chargingModes","minChargeAtDestinationInkWh","minChargeAtChargingStopsInkWh","longDistanceEVRouting","matrixRoutingModel","matrix","latLonFieldDescription","validateArrayOf","convertArrayOf","convertObjectOf","matrixRouting","fieldsToSkipProps","validateWaitTimeSeconds","matrixParameters","matrixRequest","matrixEndpoints","requestParams","matrixFactory","incidentViewport","flowSegmentDataModel","flowSegmentData","coordinate","zoom","validateZoomLevel","style","unit","thickness","openLr","trafficFlowSegmentData","defaultComparator","incidentCategories","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","incidentSeverities","getFeatures","poi","preserveCluster","cbl","ctr","clusterBounds","op","originalPosition","ic","incidentCategory","ty","incidentSeverity","vectorGeometry","cs","f","t","dl","ed","cpoi","flatten","tm","firstArray","secondArray","comparator","j","arrayMerge","incidentDetailsModel","convertResult","incidents","trafficLanguageMap","incidentDetailsLanguageValues","trafficModelID","expandCluster","projection","incidentDetails","model","availableFields","testFields","recursiveComparer","objToTest","objToCompare","incidentV5LanguageMap","incidentDetailsV5","baseUrl","SUPPORTED_IMAGE_FORMATS_PER_LAYER","layer","format","toUrl","querySegments","segments","propertyValue","splitCenter","lngLatCenter","serializeToStringIfNecessary","encodeURI","staticImage","validateCombineProperties","copyrightsParameters","copyrights","copyrightsBounds","copyrightsZoom","copyrightsWorld","copyrightsQuery","copyrightsCaption","copyrightsV2","copyrightsCaptionV2","setProductInfo","productId","productVersion","prodVersion","services","searchService","routingService","trafficService","mapDisplayService"],"mappings":"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,GAAMA,EAAS,SACf,GAAMA,EAAS,SACf,GAAMA,EAAS,SACf,GAAMA,EAAS,SACf,GAAMA,EAAS,SACf,GAAM,CACF,SAAY,CACR,GAAM,KACN,IAAO,KACP,QAAS,KACT,MAAS,KACT,WAAc,KACd,GAAM,KACN,IAAO,KACP,QAAS,KACT,MAAS,KACT,gBAAiB,MAErB,MAAS,cAEb,GAAMA,EAAS,SACf,GAAMA,EAAS,SACf,GAAMA,EAAS,SACf,GAAMA,EAAS,SACf,GAAMA,EAAS,SACf,GAAMA,EAAS,SACf,GAAMA,EAAS,SACf,aAAgB,CACZ,MAAS,KACT,MAAS,4BAIJG,EAAU,CACnB,GAAMH,EAASE,GACf,QAASF,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,aAAgBA,EAASI,cAGhB3S,EAAS,CAClB,IAAOuS,EAASK,IAChB,WAAYL,EAAS,YACrB,QAASA,EAAS,SAClB,GAAMA,EAASE,GACf,QAASF,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,aAAcA,EAAS,cACvB,aAAcA,EAAS,cACvB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,SAAUA,EAAS,UACnB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,aAAgBA,EAASI,cA4ChBE,EAAa,CACtB,GAAMN,EAASE,GACf,QAASF,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,QAASA,EAAS,SAClB,aAAgBA,EAASI,cCnvBtB,SAASG,EAAatiB,GACzB,IAAKuiB,IAASviB,KAA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","file":"services-node.min.js","sourcesContent":["/* eslint-disable max-len */\nconst origin = 'api.tomtom.com';\nconst hostedStylesVersion = '21.1.0-*';\n\nmodule.exports = {\n    'sdk.name': 'MapsWebSDK',\n    'sdk.version': '6.18.0',\n    'sdk.examples.version': 'SDK-${version}',\n\n    'analytics.header.name': 'TomTom-User-Agent',\n    'analytics.header.sdkName': 'MapsWebSDK',\n\n    // copyrights\n    'endpoints.copyrightsWorld': `${origin}/map/1/copyrights.{contentType}`,\n    'endpoints.copyrightsBounds': `${origin}/map/1/copyrights/{minLon}/{minLat}/{maxLon}/{maxLat}.{contentType}`,\n    'endpoints.copyrightsZoom': `${origin}/map/1/copyrights/{zoom}/{x}/{y}.{contentType}`,\n    'endpoints.caption': `${origin}/map/1/copyrights/caption.{contentType}`,\n    'endpoints.copyrightsV2': `${origin}/map/2/copyrights`,\n    'endpoints.captionV2': `${origin}/map/2/copyrights/caption.{contentType}`,\n\n    // search\n    'endpoints.geocode': `${origin}/search/2/geocode/{query}.{contentType}`,\n    'endpoints.structuredGeocode': `${origin}/search/2/structuredGeocode.{contentType}`,\n    'endpoints.search': `${origin}/search/2/{type}/{query}.{contentType}`,\n    'endpoints.nearbySearch': `${origin}/search/2/nearbySearch/.{contentType}`,\n    'endpoints.batchNearbySearchQuery': '/{type}/.{contentType}',\n    'endpoints.batchSearch': `${origin}/search/2/batch.{contentType}`,\n    'endpoints.batchSyncSearch': `${origin}/search/2/batch/sync.{contentType}`,\n    'endpoints.batchSearchQuery': '/{type}/{query}.{contentType}',\n    'endpoints.batchStructuredGeocodeQuery': '/structuredGeocode.{contentType}',\n    'endpoints.adp': `${origin}/search/2/additionalData.{contentType}`,\n    'endpoints.batchAdpQuery': '/additionalData.{contentType}',\n    'endpoints.reverseGeocode': `${origin}/search/2/{type}/{position}.{contentType}`,\n    'endpoints.batchReverseGeocodeQuery': '/{type}/{position}.{contentType}',\n    'endpoints.autocomplete': `${origin}/search/2/autocomplete/{query}.{contentType}`,\n    'endpoints.poiCategories': `${origin}/search/2/poiCategories.{contentType}`,\n    'endpoints.chargingAvailability': `${origin}/search/2/chargingAvailability.{contentType}`,\n    'endpoints.batchChargingAvailabilityQuery': '/chargingAvailability.{contentType}',\n    'endpoints.poiDetails': `${origin}/search/2/poiDetails.{contentType}`,\n    'endpoints.poiPhotos': `${origin}/search/2/poiPhoto`,\n    'endpoints.placeById': `${origin}/search/2/place.{contentType}`,\n\n    // traffic\n    'endpoints.incidentDetails': `${origin}/traffic/services/4/incidentDetails/{style}/{minLat},{minLon},{maxLat},{maxLon}/{zoom}/{trafficModelID}/{contentType}`,\n    'endpoints.incidentDetailsV5': `${origin}/traffic/services/5/incidentDetails`,\n    'endpoints.incidentViewport': `${origin}/traffic/services/4/incidentViewport/0,0,.1,.1/0/0,0,.1,.1/0/false/{contentType}`,\n    'endpoints.flowSegmentData': `${origin}/traffic/services/4/flowSegmentData/{style}/{zoom}/{contentType}`,\n    'endpoints.incidentRegions': `${origin}/traffic/services/4/incidentRegions/{contentType}`,\n\n    // layers\n    'endpoints.rasterTrafficIncidentTilesLayer': `{s}.${origin}/traffic/map/4/tile/incidents/{style}/{z}/{x}/{y}.png?tileSize={tileSize}`,\n    'endpoints.vectorTrafficIncidentTilesLayer': `{s}.${origin}/traffic/map/4/tile/incidents/{z}/{x}/{y}.pbf`,\n    'endpoints.rasterTrafficFlowTilesLayer': `{s}.${origin}/traffic/map/4/tile/flow/{style}/{z}/{x}/{y}.png`,\n    'endpoints.vectorTrafficFlowTilesLayer': `{s}.${origin}/traffic/map/4/tile/flow/{style}/{z}/{x}/{y}.pbf`,\n    'endpoints.tileLayer': `{s}.${origin}/map/1/tile/{layer}/{style}/{z}/{x}/{y}.png?tileSize={tileSize}`,\n    'endpoints.wmsLayer': `{s}.${origin}/map/1/wms/?service=WMS&version=1.1.1&request=GetMap&bbox={bbox-epsg-3857}&srs=EPSG:3857&width=512&height=512&layers=basic&styles=&format={format}`,\n    'endpoints.vectorTileLayer': `{s}.${origin}/map/1/tile/{layer}/{style}/{z}/{x}/{y}.pbf`,\n\n    // routing\n    'endpoints.routing': `${origin}/routing/1/calculateRoute/{locations}/{contentType}`,\n    'endpoints.calculateReachableRange': `${origin}/routing/1/calculateReachableRange/{origin}/{contentType}`,\n    'endpoints.batchRouting': `${origin}/routing/1/batch/{contentType}`,\n    'endpoints.batchSyncRouting': `${origin}/routing/1/batch/sync/{contentType}`,\n    'endpoints.batchRoutingQuery': '/calculateRoute/{locations}/{contentType}',\n    'endpoints.batchReachableRangeQuery': '/calculateReachableRange/{origin}/{contentType}',\n    'endpoints.matrixRouting': `${origin}/routing/1/matrix/{contentType}`,\n    'endpoints.matrixSyncRouting': `${origin}/routing/1/matrix/sync/{contentType}`,\n    'endpoints.longDistanceEVRouting': `${origin}/routing/1/calculateLongDistanceEVRoute/{locations}/{contentType}`,\n\n    //static map image\n    'endpoints.staticImage': `https://${origin}/map/1/staticimage`,\n\n    'vector.glyphs': 'https://' + origin + '/maps-sdk-js/6.18.0/glyphs/{fontstack}/{range}.pbf',\n    'vector.sprites': 'https://' + origin + '/maps-sdk-js/6.18.0/sprites/sprite',\n\n    //hosted styles\n    'endpoints.styles': `https://${origin}/style/1/style/{version}?map=basic_main&traffic_incidents=incidents_day&traffic_flow=flow_relative0&poi=poi_main`,\n\n    'origin': origin,\n    'hostedStylesVersion': hostedStylesVersion\n};\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","var baseGetTag = require('./_baseGetTag'),\n    isArray = require('./isArray'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar stringTag = '[object String]';\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a string, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);\n}\n\nmodule.exports = isString;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","/**\n * Checks if `value` is `null` or `undefined`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is nullish, else `false`.\n * @example\n *\n * _.isNil(null);\n * // => true\n *\n * _.isNil(void 0);\n * // => true\n *\n * _.isNil(NaN);\n * // => false\n */\nfunction isNil(value) {\n  return value == null;\n}\n\nmodule.exports = isNil;\n","var toInteger = require('./toInteger');\n\n/**\n * Checks if `value` is an integer.\n *\n * **Note:** This method is based on\n * [`Number.isInteger`](https://mdn.io/Number/isInteger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an integer, else `false`.\n * @example\n *\n * _.isInteger(3);\n * // => true\n *\n * _.isInteger(Number.MIN_VALUE);\n * // => false\n *\n * _.isInteger(Infinity);\n * // => false\n *\n * _.isInteger('3');\n * // => false\n */\nfunction isInteger(value) {\n  return typeof value == 'number' && value == toInteger(value);\n}\n\nmodule.exports = isInteger;\n","var toFinite = require('./toFinite');\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\nmodule.exports = toInteger;\n","var toNumber = require('./toNumber');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nmodule.exports = toFinite;\n","var isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var baseHas = require('./_baseHas'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct property of `object`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = { 'a': { 'b': 2 } };\n * var other = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.has(object, 'a');\n * // => true\n *\n * _.has(object, 'a.b');\n * // => true\n *\n * _.has(object, ['a', 'b']);\n * // => true\n *\n * _.has(other, 'a');\n * // => false\n */\nfunction has(object, path) {\n  return object != null && hasPath(object, path, baseHas);\n}\n\nmodule.exports = has;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.has` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHas(object, key) {\n  return object != null && hasOwnProperty.call(object, key);\n}\n\nmodule.exports = baseHas;\n","var castPath = require('./_castPath'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isIndex = require('./_isIndex'),\n    isLength = require('./isLength'),\n    toKey = require('./_toKey');\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      result = false;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\nmodule.exports = hasPath;\n","var isArray = require('./isArray'),\n    isKey = require('./_isKey'),\n    stringToPath = require('./_stringToPath'),\n    toString = require('./toString');\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nmodule.exports = castPath;\n","var isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nmodule.exports = isKey;\n","var memoizeCapped = require('./_memoizeCapped');\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nmodule.exports = stringToPath;\n","var memoize = require('./memoize');\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nmodule.exports = memoizeCapped;\n","var MapCache = require('./_MapCache');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nmodule.exports = memoize;\n","var mapCacheClear = require('./_mapCacheClear'),\n    mapCacheDelete = require('./_mapCacheDelete'),\n    mapCacheGet = require('./_mapCacheGet'),\n    mapCacheHas = require('./_mapCacheHas'),\n    mapCacheSet = require('./_mapCacheSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nmodule.exports = MapCache;\n","var Hash = require('./_Hash'),\n    ListCache = require('./_ListCache'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapCacheClear;\n","var hashClear = require('./_hashClear'),\n    hashDelete = require('./_hashDelete'),\n    hashGet = require('./_hashGet'),\n    hashHas = require('./_hashHas'),\n    hashSet = require('./_hashSet');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nmodule.exports = Hash;\n","var nativeCreate = require('./_nativeCreate');\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nmodule.exports = hashClear;\n","var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = hashDelete;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nmodule.exports = hashGet;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nmodule.exports = hashHas;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nmodule.exports = hashSet;\n","var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nmodule.exports = listCacheClear;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nmodule.exports = listCacheDelete;\n","var eq = require('./eq');\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nmodule.exports = listCacheGet;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nmodule.exports = listCacheHas;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nmodule.exports = listCacheSet;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n","var getMapData = require('./_getMapData');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = mapCacheDelete;\n","var isKeyable = require('./_isKeyable');\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nmodule.exports = getMapData;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nmodule.exports = isKeyable;\n","var getMapData = require('./_getMapData');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nmodule.exports = mapCacheGet;\n","var getMapData = require('./_getMapData');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nmodule.exports = mapCacheHas;\n","var getMapData = require('./_getMapData');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nmodule.exports = mapCacheSet;\n","var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n","var Symbol = require('./_Symbol'),\n    arrayMap = require('./_arrayMap'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","var isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = toKey;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"v1\", {\n  enumerable: true,\n  get: function () {\n    return _v.default;\n  }\n});\nObject.defineProperty(exports, \"v3\", {\n  enumerable: true,\n  get: function () {\n    return _v2.default;\n  }\n});\nObject.defineProperty(exports, \"v4\", {\n  enumerable: true,\n  get: function () {\n    return _v3.default;\n  }\n});\nObject.defineProperty(exports, \"v5\", {\n  enumerable: true,\n  get: function () {\n    return _v4.default;\n  }\n});\nObject.defineProperty(exports, \"NIL\", {\n  enumerable: true,\n  get: function () {\n    return _nil.default;\n  }\n});\nObject.defineProperty(exports, \"version\", {\n  enumerable: true,\n  get: function () {\n    return _version.default;\n  }\n});\nObject.defineProperty(exports, \"validate\", {\n  enumerable: true,\n  get: function () {\n    return _validate.default;\n  }\n});\nObject.defineProperty(exports, \"stringify\", {\n  enumerable: true,\n  get: function () {\n    return _stringify.default;\n  }\n});\nObject.defineProperty(exports, \"parse\", {\n  enumerable: true,\n  get: function () {\n    return _parse.default;\n  }\n});\n\nvar _v = _interopRequireDefault(require(\"./v1.js\"));\n\nvar _v2 = _interopRequireDefault(require(\"./v3.js\"));\n\nvar _v3 = _interopRequireDefault(require(\"./v4.js\"));\n\nvar _v4 = _interopRequireDefault(require(\"./v5.js\"));\n\nvar _nil = _interopRequireDefault(require(\"./nil.js\"));\n\nvar _version = _interopRequireDefault(require(\"./version.js\"));\n\nvar _validate = _interopRequireDefault(require(\"./validate.js\"));\n\nvar _stringify = _interopRequireDefault(require(\"./stringify.js\"));\n\nvar _parse = _interopRequireDefault(require(\"./parse.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _rng = _interopRequireDefault(require(\"./rng.js\"));\n\nvar _stringify = _interopRequireDefault(require(\"./stringify.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\nlet _nodeId;\n\nlet _clockseq; // Previous uuid creation time\n\n\nlet _lastMSecs = 0;\nlet _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details\n\nfunction v1(options, buf, offset) {\n  let i = buf && offset || 0;\n  const b = buf || new Array(16);\n  options = options || {};\n  let node = options.node || _nodeId;\n  let clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n\n  if (node == null || clockseq == null) {\n    const seedBytes = options.random || (options.rng || _rng.default)();\n\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n    }\n\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n\n\n  let msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n\n  let nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)\n\n  const dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression\n\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n\n\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  } // Per 4.2.1.2 Throw error if too many uuids are requested\n\n\n  if (nsecs >= 10000) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n\n  msecs += 12219292800000; // `time_low`\n\n  const tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff; // `time_mid`\n\n  const tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff; // `time_high_and_version`\n\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n\n  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n\n  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`\n\n  b[i++] = clockseq & 0xff; // `node`\n\n  for (let n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf || (0, _stringify.default)(b);\n}\n\nvar _default = v1;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = rng;\n\nvar _crypto = _interopRequireDefault(require(\"crypto\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst rnds8Pool = new Uint8Array(256); // # of random values to pre-allocate\n\nlet poolPtr = rnds8Pool.length;\n\nfunction rng() {\n  if (poolPtr > rnds8Pool.length - 16) {\n    _crypto.default.randomFillSync(rnds8Pool);\n\n    poolPtr = 0;\n  }\n\n  return rnds8Pool.slice(poolPtr, poolPtr += 16);\n}","module.exports = require(\"crypto\");;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _validate = _interopRequireDefault(require(\"./validate.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  const uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!(0, _validate.default)(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nvar _default = stringify;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regex = _interopRequireDefault(require(\"./regex.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && _regex.default.test(uuid);\n}\n\nvar _default = validate;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _default = /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _v = _interopRequireDefault(require(\"./v35.js\"));\n\nvar _md = _interopRequireDefault(require(\"./md5.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst v3 = (0, _v.default)('v3', 0x30, _md.default);\nvar _default = v3;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = _default;\nexports.URL = exports.DNS = void 0;\n\nvar _stringify = _interopRequireDefault(require(\"./stringify.js\"));\n\nvar _parse = _interopRequireDefault(require(\"./parse.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n\n  const bytes = [];\n\n  for (let i = 0; i < str.length; ++i) {\n    bytes.push(str.charCodeAt(i));\n  }\n\n  return bytes;\n}\n\nconst DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nexports.DNS = DNS;\nconst URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nexports.URL = URL;\n\nfunction _default(name, version, hashfunc) {\n  function generateUUID(value, namespace, buf, offset) {\n    if (typeof value === 'string') {\n      value = stringToBytes(value);\n    }\n\n    if (typeof namespace === 'string') {\n      namespace = (0, _parse.default)(namespace);\n    }\n\n    if (namespace.length !== 16) {\n      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');\n    } // Compute hash of namespace and value, Per 4.3\n    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =\n    // hashfunc([...namespace, ... value])`\n\n\n    let bytes = new Uint8Array(16 + value.length);\n    bytes.set(namespace);\n    bytes.set(value, namespace.length);\n    bytes = hashfunc(bytes);\n    bytes[6] = bytes[6] & 0x0f | version;\n    bytes[8] = bytes[8] & 0x3f | 0x80;\n\n    if (buf) {\n      offset = offset || 0;\n\n      for (let i = 0; i < 16; ++i) {\n        buf[offset + i] = bytes[i];\n      }\n\n      return buf;\n    }\n\n    return (0, _stringify.default)(bytes);\n  } // Function#name is not settable on some platforms (#270)\n\n\n  try {\n    generateUUID.name = name; // eslint-disable-next-line no-empty\n  } catch (err) {} // For CommonJS default export support\n\n\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL;\n  return generateUUID;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _validate = _interopRequireDefault(require(\"./validate.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction parse(uuid) {\n  if (!(0, _validate.default)(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  let v;\n  const arr = new Uint8Array(16); // Parse ########-....-....-....-............\n\n  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;\n  arr[1] = v >>> 16 & 0xff;\n  arr[2] = v >>> 8 & 0xff;\n  arr[3] = v & 0xff; // Parse ........-####-....-....-............\n\n  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;\n  arr[5] = v & 0xff; // Parse ........-....-####-....-............\n\n  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;\n  arr[7] = v & 0xff; // Parse ........-....-....-####-............\n\n  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;\n  arr[9] = v & 0xff; // Parse ........-....-....-....-############\n  // (Use \"/\" to avoid 32-bit truncation when bit-shifting high-order bytes)\n\n  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;\n  arr[11] = v / 0x100000000 & 0xff;\n  arr[12] = v >>> 24 & 0xff;\n  arr[13] = v >>> 16 & 0xff;\n  arr[14] = v >>> 8 & 0xff;\n  arr[15] = v & 0xff;\n  return arr;\n}\n\nvar _default = parse;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _crypto = _interopRequireDefault(require(\"crypto\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction md5(bytes) {\n  if (Array.isArray(bytes)) {\n    bytes = Buffer.from(bytes);\n  } else if (typeof bytes === 'string') {\n    bytes = Buffer.from(bytes, 'utf8');\n  }\n\n  return _crypto.default.createHash('md5').update(bytes).digest();\n}\n\nvar _default = md5;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _rng = _interopRequireDefault(require(\"./rng.js\"));\n\nvar _stringify = _interopRequireDefault(require(\"./stringify.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n\n  const rnds = options.random || (options.rng || _rng.default)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return (0, _stringify.default)(rnds);\n}\n\nvar _default = v4;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _v = _interopRequireDefault(require(\"./v35.js\"));\n\nvar _sha = _interopRequireDefault(require(\"./sha1.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst v5 = (0, _v.default)('v5', 0x50, _sha.default);\nvar _default = v5;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _crypto = _interopRequireDefault(require(\"crypto\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction sha1(bytes) {\n  if (Array.isArray(bytes)) {\n    bytes = Buffer.from(bytes);\n  } else if (typeof bytes === 'string') {\n    bytes = Buffer.from(bytes, 'utf8');\n  }\n\n  return _crypto.default.createHash('sha1').update(bytes).digest();\n}\n\nvar _default = sha1;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _default = '00000000-0000-0000-0000-000000000000';\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _validate = _interopRequireDefault(require(\"./validate.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction version(uuid) {\n  if (!(0, _validate.default)(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  return parseInt(uuid.substr(14, 1), 16);\n}\n\nvar _default = version;\nexports.default = _default;","/**\n * Checks if `value` is `undefined`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.\n * @example\n *\n * _.isUndefined(void 0);\n * // => true\n *\n * _.isUndefined(null);\n * // => false\n */\nfunction isUndefined(value) {\n  return value === undefined;\n}\n\nmodule.exports = isUndefined;\n","\"use strict\";\n\nexports.URL = require(\"./URL\").interface;\nexports.serializeURL = require(\"./url-state-machine\").serializeURL;\nexports.serializeURLOrigin = require(\"./url-state-machine\").serializeURLOrigin;\nexports.basicURLParse = require(\"./url-state-machine\").basicURLParse;\nexports.setTheUsername = require(\"./url-state-machine\").setTheUsername;\nexports.setThePassword = require(\"./url-state-machine\").setThePassword;\nexports.serializeHost = require(\"./url-state-machine\").serializeHost;\nexports.serializeInteger = require(\"./url-state-machine\").serializeInteger;\nexports.parseURL = require(\"./url-state-machine\").parseURL;\n","\"use strict\";\n\nconst conversions = require(\"webidl-conversions\");\nconst utils = require(\"./utils.js\");\nconst Impl = require(\".//URL-impl.js\");\n\nconst impl = utils.implSymbol;\n\nfunction URL(url) {\n  if (!this || this[impl] || !(this instanceof URL)) {\n    throw new TypeError(\"Failed to construct 'URL': Please use the 'new' operator, this DOM object constructor cannot be called as a function.\");\n  }\n  if (arguments.length < 1) {\n    throw new TypeError(\"Failed to construct 'URL': 1 argument required, but only \" + arguments.length + \" present.\");\n  }\n  const args = [];\n  for (let i = 0; i < arguments.length && i < 2; ++i) {\n    args[i] = arguments[i];\n  }\n  args[0] = conversions[\"USVString\"](args[0]);\n  if (args[1] !== undefined) {\n  args[1] = conversions[\"USVString\"](args[1]);\n  }\n\n  module.exports.setup(this, args);\n}\n\nURL.prototype.toJSON = function toJSON() {\n  if (!this || !module.exports.is(this)) {\n    throw new TypeError(\"Illegal invocation\");\n  }\n  const args = [];\n  for (let i = 0; i < arguments.length && i < 0; ++i) {\n    args[i] = arguments[i];\n  }\n  return this[impl].toJSON.apply(this[impl], args);\n};\nObject.defineProperty(URL.prototype, \"href\", {\n  get() {\n    return this[impl].href;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].href = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nURL.prototype.toString = function () {\n  if (!this || !module.exports.is(this)) {\n    throw new TypeError(\"Illegal invocation\");\n  }\n  return this.href;\n};\n\nObject.defineProperty(URL.prototype, \"origin\", {\n  get() {\n    return this[impl].origin;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"protocol\", {\n  get() {\n    return this[impl].protocol;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].protocol = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"username\", {\n  get() {\n    return this[impl].username;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].username = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"password\", {\n  get() {\n    return this[impl].password;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].password = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"host\", {\n  get() {\n    return this[impl].host;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].host = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"hostname\", {\n  get() {\n    return this[impl].hostname;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].hostname = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"port\", {\n  get() {\n    return this[impl].port;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].port = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"pathname\", {\n  get() {\n    return this[impl].pathname;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].pathname = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"search\", {\n  get() {\n    return this[impl].search;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].search = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"hash\", {\n  get() {\n    return this[impl].hash;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].hash = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\n\nmodule.exports = {\n  is(obj) {\n    return !!obj && obj[impl] instanceof Impl.implementation;\n  },\n  create(constructorArgs, privateData) {\n    let obj = Object.create(URL.prototype);\n    this.setup(obj, constructorArgs, privateData);\n    return obj;\n  },\n  setup(obj, constructorArgs, privateData) {\n    if (!privateData) privateData = {};\n    privateData.wrapper = obj;\n\n    obj[impl] = new Impl.implementation(constructorArgs, privateData);\n    obj[impl][utils.wrapperSymbol] = obj;\n  },\n  interface: URL,\n  expose: {\n    Window: { URL: URL },\n    Worker: { URL: URL }\n  }\n};\n\n","\"use strict\";\n\nvar conversions = {};\nmodule.exports = conversions;\n\nfunction sign(x) {\n    return x < 0 ? -1 : 1;\n}\n\nfunction evenRound(x) {\n    // Round x to the nearest integer, choosing the even integer if it lies halfway between two.\n    if ((x % 1) === 0.5 && (x & 1) === 0) { // [even number].5; round down (i.e. floor)\n        return Math.floor(x);\n    } else {\n        return Math.round(x);\n    }\n}\n\nfunction createNumberConversion(bitLength, typeOpts) {\n    if (!typeOpts.unsigned) {\n        --bitLength;\n    }\n    const lowerBound = typeOpts.unsigned ? 0 : -Math.pow(2, bitLength);\n    const upperBound = Math.pow(2, bitLength) - 1;\n\n    const moduloVal = typeOpts.moduloBitLength ? Math.pow(2, typeOpts.moduloBitLength) : Math.pow(2, bitLength);\n    const moduloBound = typeOpts.moduloBitLength ? Math.pow(2, typeOpts.moduloBitLength - 1) : Math.pow(2, bitLength - 1);\n\n    return function(V, opts) {\n        if (!opts) opts = {};\n\n        let x = +V;\n\n        if (opts.enforceRange) {\n            if (!Number.isFinite(x)) {\n                throw new TypeError(\"Argument is not a finite number\");\n            }\n\n            x = sign(x) * Math.floor(Math.abs(x));\n            if (x < lowerBound || x > upperBound) {\n                throw new TypeError(\"Argument is not in byte range\");\n            }\n\n            return x;\n        }\n\n        if (!isNaN(x) && opts.clamp) {\n            x = evenRound(x);\n\n            if (x < lowerBound) x = lowerBound;\n            if (x > upperBound) x = upperBound;\n            return x;\n        }\n\n        if (!Number.isFinite(x) || x === 0) {\n            return 0;\n        }\n\n        x = sign(x) * Math.floor(Math.abs(x));\n        x = x % moduloVal;\n\n        if (!typeOpts.unsigned && x >= moduloBound) {\n            return x - moduloVal;\n        } else if (typeOpts.unsigned) {\n            if (x < 0) {\n              x += moduloVal;\n            } else if (x === -0) { // don't return negative zero\n              return 0;\n            }\n        }\n\n        return x;\n    }\n}\n\nconversions[\"void\"] = function () {\n    return undefined;\n};\n\nconversions[\"boolean\"] = function (val) {\n    return !!val;\n};\n\nconversions[\"byte\"] = createNumberConversion(8, { unsigned: false });\nconversions[\"octet\"] = createNumberConversion(8, { unsigned: true });\n\nconversions[\"short\"] = createNumberConversion(16, { unsigned: false });\nconversions[\"unsigned short\"] = createNumberConversion(16, { unsigned: true });\n\nconversions[\"long\"] = createNumberConversion(32, { unsigned: false });\nconversions[\"unsigned long\"] = createNumberConversion(32, { unsigned: true });\n\nconversions[\"long long\"] = createNumberConversion(32, { unsigned: false, moduloBitLength: 64 });\nconversions[\"unsigned long long\"] = createNumberConversion(32, { unsigned: true, moduloBitLength: 64 });\n\nconversions[\"double\"] = function (V) {\n    const x = +V;\n\n    if (!Number.isFinite(x)) {\n        throw new TypeError(\"Argument is not a finite floating-point value\");\n    }\n\n    return x;\n};\n\nconversions[\"unrestricted double\"] = function (V) {\n    const x = +V;\n\n    if (isNaN(x)) {\n        throw new TypeError(\"Argument is NaN\");\n    }\n\n    return x;\n};\n\n// not quite valid, but good enough for JS\nconversions[\"float\"] = conversions[\"double\"];\nconversions[\"unrestricted float\"] = conversions[\"unrestricted double\"];\n\nconversions[\"DOMString\"] = function (V, opts) {\n    if (!opts) opts = {};\n\n    if (opts.treatNullAsEmptyString && V === null) {\n        return \"\";\n    }\n\n    return String(V);\n};\n\nconversions[\"ByteString\"] = function (V, opts) {\n    const x = String(V);\n    let c = undefined;\n    for (let i = 0; (c = x.codePointAt(i)) !== undefined; ++i) {\n        if (c > 255) {\n            throw new TypeError(\"Argument is not a valid bytestring\");\n        }\n    }\n\n    return x;\n};\n\nconversions[\"USVString\"] = function (V) {\n    const S = String(V);\n    const n = S.length;\n    const U = [];\n    for (let i = 0; i < n; ++i) {\n        const c = S.charCodeAt(i);\n        if (c < 0xD800 || c > 0xDFFF) {\n            U.push(String.fromCodePoint(c));\n        } else if (0xDC00 <= c && c <= 0xDFFF) {\n            U.push(String.fromCodePoint(0xFFFD));\n        } else {\n            if (i === n - 1) {\n                U.push(String.fromCodePoint(0xFFFD));\n            } else {\n                const d = S.charCodeAt(i + 1);\n                if (0xDC00 <= d && d <= 0xDFFF) {\n                    const a = c & 0x3FF;\n                    const b = d & 0x3FF;\n                    U.push(String.fromCodePoint((2 << 15) + (2 << 9) * a + b));\n                    ++i;\n                } else {\n                    U.push(String.fromCodePoint(0xFFFD));\n                }\n            }\n        }\n    }\n\n    return U.join('');\n};\n\nconversions[\"Date\"] = function (V, opts) {\n    if (!(V instanceof Date)) {\n        throw new TypeError(\"Argument is not a Date object\");\n    }\n    if (isNaN(V)) {\n        return undefined;\n    }\n\n    return V;\n};\n\nconversions[\"RegExp\"] = function (V, opts) {\n    if (!(V instanceof RegExp)) {\n        V = new RegExp(V);\n    }\n\n    return V;\n};\n","\"use strict\";\n\nmodule.exports.mixin = function mixin(target, source) {\n  const keys = Object.getOwnPropertyNames(source);\n  for (let i = 0; i < keys.length; ++i) {\n    Object.defineProperty(target, keys[i], Object.getOwnPropertyDescriptor(source, keys[i]));\n  }\n};\n\nmodule.exports.wrapperSymbol = Symbol(\"wrapper\");\nmodule.exports.implSymbol = Symbol(\"impl\");\n\nmodule.exports.wrapperForImpl = function (impl) {\n  return impl[module.exports.wrapperSymbol];\n};\n\nmodule.exports.implForWrapper = function (wrapper) {\n  return wrapper[module.exports.implSymbol];\n};\n\n","\"use strict\";\nconst usm = require(\"./url-state-machine\");\n\nexports.implementation = class URLImpl {\n  constructor(constructorArgs) {\n    const url = constructorArgs[0];\n    const base = constructorArgs[1];\n\n    let parsedBase = null;\n    if (base !== undefined) {\n      parsedBase = usm.basicURLParse(base);\n      if (parsedBase === \"failure\") {\n        throw new TypeError(\"Invalid base URL\");\n      }\n    }\n\n    const parsedURL = usm.basicURLParse(url, { baseURL: parsedBase });\n    if (parsedURL === \"failure\") {\n      throw new TypeError(\"Invalid URL\");\n    }\n\n    this._url = parsedURL;\n\n    // TODO: query stuff\n  }\n\n  get href() {\n    return usm.serializeURL(this._url);\n  }\n\n  set href(v) {\n    const parsedURL = usm.basicURLParse(v);\n    if (parsedURL === \"failure\") {\n      throw new TypeError(\"Invalid URL\");\n    }\n\n    this._url = parsedURL;\n  }\n\n  get origin() {\n    return usm.serializeURLOrigin(this._url);\n  }\n\n  get protocol() {\n    return this._url.scheme + \":\";\n  }\n\n  set protocol(v) {\n    usm.basicURLParse(v + \":\", { url: this._url, stateOverride: \"scheme start\" });\n  }\n\n  get username() {\n    return this._url.username;\n  }\n\n  set username(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    usm.setTheUsername(this._url, v);\n  }\n\n  get password() {\n    return this._url.password;\n  }\n\n  set password(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    usm.setThePassword(this._url, v);\n  }\n\n  get host() {\n    const url = this._url;\n\n    if (url.host === null) {\n      return \"\";\n    }\n\n    if (url.port === null) {\n      return usm.serializeHost(url.host);\n    }\n\n    return usm.serializeHost(url.host) + \":\" + usm.serializeInteger(url.port);\n  }\n\n  set host(v) {\n    if (this._url.cannotBeABaseURL) {\n      return;\n    }\n\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"host\" });\n  }\n\n  get hostname() {\n    if (this._url.host === null) {\n      return \"\";\n    }\n\n    return usm.serializeHost(this._url.host);\n  }\n\n  set hostname(v) {\n    if (this._url.cannotBeABaseURL) {\n      return;\n    }\n\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"hostname\" });\n  }\n\n  get port() {\n    if (this._url.port === null) {\n      return \"\";\n    }\n\n    return usm.serializeInteger(this._url.port);\n  }\n\n  set port(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    if (v === \"\") {\n      this._url.port = null;\n    } else {\n      usm.basicURLParse(v, { url: this._url, stateOverride: \"port\" });\n    }\n  }\n\n  get pathname() {\n    if (this._url.cannotBeABaseURL) {\n      return this._url.path[0];\n    }\n\n    if (this._url.path.length === 0) {\n      return \"\";\n    }\n\n    return \"/\" + this._url.path.join(\"/\");\n  }\n\n  set pathname(v) {\n    if (this._url.cannotBeABaseURL) {\n      return;\n    }\n\n    this._url.path = [];\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"path start\" });\n  }\n\n  get search() {\n    if (this._url.query === null || this._url.query === \"\") {\n      return \"\";\n    }\n\n    return \"?\" + this._url.query;\n  }\n\n  set search(v) {\n    // TODO: query stuff\n\n    const url = this._url;\n\n    if (v === \"\") {\n      url.query = null;\n      return;\n    }\n\n    const input = v[0] === \"?\" ? v.substring(1) : v;\n    url.query = \"\";\n    usm.basicURLParse(input, { url, stateOverride: \"query\" });\n  }\n\n  get hash() {\n    if (this._url.fragment === null || this._url.fragment === \"\") {\n      return \"\";\n    }\n\n    return \"#\" + this._url.fragment;\n  }\n\n  set hash(v) {\n    if (v === \"\") {\n      this._url.fragment = null;\n      return;\n    }\n\n    const input = v[0] === \"#\" ? v.substring(1) : v;\n    this._url.fragment = \"\";\n    usm.basicURLParse(input, { url: this._url, stateOverride: \"fragment\" });\n  }\n\n  toJSON() {\n    return this.href;\n  }\n};\n","\"use strict\";\r\nconst punycode = require(\"punycode\");\r\nconst tr46 = require(\"tr46\");\r\n\r\nconst specialSchemes = {\r\n  ftp: 21,\r\n  file: null,\r\n  gopher: 70,\r\n  http: 80,\r\n  https: 443,\r\n  ws: 80,\r\n  wss: 443\r\n};\r\n\r\nconst failure = Symbol(\"failure\");\r\n\r\nfunction countSymbols(str) {\r\n  return punycode.ucs2.decode(str).length;\r\n}\r\n\r\nfunction at(input, idx) {\r\n  const c = input[idx];\r\n  return isNaN(c) ? undefined : String.fromCodePoint(c);\r\n}\r\n\r\nfunction isASCIIDigit(c) {\r\n  return c >= 0x30 && c <= 0x39;\r\n}\r\n\r\nfunction isASCIIAlpha(c) {\r\n  return (c >= 0x41 && c <= 0x5A) || (c >= 0x61 && c <= 0x7A);\r\n}\r\n\r\nfunction isASCIIAlphanumeric(c) {\r\n  return isASCIIAlpha(c) || isASCIIDigit(c);\r\n}\r\n\r\nfunction isASCIIHex(c) {\r\n  return isASCIIDigit(c) || (c >= 0x41 && c <= 0x46) || (c >= 0x61 && c <= 0x66);\r\n}\r\n\r\nfunction isSingleDot(buffer) {\r\n  return buffer === \".\" || buffer.toLowerCase() === \"%2e\";\r\n}\r\n\r\nfunction isDoubleDot(buffer) {\r\n  buffer = buffer.toLowerCase();\r\n  return buffer === \"..\" || buffer === \"%2e.\" || buffer === \".%2e\" || buffer === \"%2e%2e\";\r\n}\r\n\r\nfunction isWindowsDriveLetterCodePoints(cp1, cp2) {\r\n  return isASCIIAlpha(cp1) && (cp2 === 58 || cp2 === 124);\r\n}\r\n\r\nfunction isWindowsDriveLetterString(string) {\r\n  return string.length === 2 && isASCIIAlpha(string.codePointAt(0)) && (string[1] === \":\" || string[1] === \"|\");\r\n}\r\n\r\nfunction isNormalizedWindowsDriveLetterString(string) {\r\n  return string.length === 2 && isASCIIAlpha(string.codePointAt(0)) && string[1] === \":\";\r\n}\r\n\r\nfunction containsForbiddenHostCodePoint(string) {\r\n  return string.search(/\\u0000|\\u0009|\\u000A|\\u000D|\\u0020|#|%|\\/|:|\\?|@|\\[|\\\\|\\]/) !== -1;\r\n}\r\n\r\nfunction containsForbiddenHostCodePointExcludingPercent(string) {\r\n  return string.search(/\\u0000|\\u0009|\\u000A|\\u000D|\\u0020|#|\\/|:|\\?|@|\\[|\\\\|\\]/) !== -1;\r\n}\r\n\r\nfunction isSpecialScheme(scheme) {\r\n  return specialSchemes[scheme] !== undefined;\r\n}\r\n\r\nfunction isSpecial(url) {\r\n  return isSpecialScheme(url.scheme);\r\n}\r\n\r\nfunction defaultPort(scheme) {\r\n  return specialSchemes[scheme];\r\n}\r\n\r\nfunction percentEncode(c) {\r\n  let hex = c.toString(16).toUpperCase();\r\n  if (hex.length === 1) {\r\n    hex = \"0\" + hex;\r\n  }\r\n\r\n  return \"%\" + hex;\r\n}\r\n\r\nfunction utf8PercentEncode(c) {\r\n  const buf = new Buffer(c);\r\n\r\n  let str = \"\";\r\n\r\n  for (let i = 0; i < buf.length; ++i) {\r\n    str += percentEncode(buf[i]);\r\n  }\r\n\r\n  return str;\r\n}\r\n\r\nfunction utf8PercentDecode(str) {\r\n  const input = new Buffer(str);\r\n  const output = [];\r\n  for (let i = 0; i < input.length; ++i) {\r\n    if (input[i] !== 37) {\r\n      output.push(input[i]);\r\n    } else if (input[i] === 37 && isASCIIHex(input[i + 1]) && isASCIIHex(input[i + 2])) {\r\n      output.push(parseInt(input.slice(i + 1, i + 3).toString(), 16));\r\n      i += 2;\r\n    } else {\r\n      output.push(input[i]);\r\n    }\r\n  }\r\n  return new Buffer(output).toString();\r\n}\r\n\r\nfunction isC0ControlPercentEncode(c) {\r\n  return c <= 0x1F || c > 0x7E;\r\n}\r\n\r\nconst extraPathPercentEncodeSet = new Set([32, 34, 35, 60, 62, 63, 96, 123, 125]);\r\nfunction isPathPercentEncode(c) {\r\n  return isC0ControlPercentEncode(c) || extraPathPercentEncodeSet.has(c);\r\n}\r\n\r\nconst extraUserinfoPercentEncodeSet =\r\n  new Set([47, 58, 59, 61, 64, 91, 92, 93, 94, 124]);\r\nfunction isUserinfoPercentEncode(c) {\r\n  return isPathPercentEncode(c) || extraUserinfoPercentEncodeSet.has(c);\r\n}\r\n\r\nfunction percentEncodeChar(c, encodeSetPredicate) {\r\n  const cStr = String.fromCodePoint(c);\r\n\r\n  if (encodeSetPredicate(c)) {\r\n    return utf8PercentEncode(cStr);\r\n  }\r\n\r\n  return cStr;\r\n}\r\n\r\nfunction parseIPv4Number(input) {\r\n  let R = 10;\r\n\r\n  if (input.length >= 2 && input.charAt(0) === \"0\" && input.charAt(1).toLowerCase() === \"x\") {\r\n    input = input.substring(2);\r\n    R = 16;\r\n  } else if (input.length >= 2 && input.charAt(0) === \"0\") {\r\n    input = input.substring(1);\r\n    R = 8;\r\n  }\r\n\r\n  if (input === \"\") {\r\n    return 0;\r\n  }\r\n\r\n  const regex = R === 10 ? /[^0-9]/ : (R === 16 ? /[^0-9A-Fa-f]/ : /[^0-7]/);\r\n  if (regex.test(input)) {\r\n    return failure;\r\n  }\r\n\r\n  return parseInt(input, R);\r\n}\r\n\r\nfunction parseIPv4(input) {\r\n  const parts = input.split(\".\");\r\n  if (parts[parts.length - 1] === \"\") {\r\n    if (parts.length > 1) {\r\n      parts.pop();\r\n    }\r\n  }\r\n\r\n  if (parts.length > 4) {\r\n    return input;\r\n  }\r\n\r\n  const numbers = [];\r\n  for (const part of parts) {\r\n    if (part === \"\") {\r\n      return input;\r\n    }\r\n    const n = parseIPv4Number(part);\r\n    if (n === failure) {\r\n      return input;\r\n    }\r\n\r\n    numbers.push(n);\r\n  }\r\n\r\n  for (let i = 0; i < numbers.length - 1; ++i) {\r\n    if (numbers[i] > 255) {\r\n      return failure;\r\n    }\r\n  }\r\n  if (numbers[numbers.length - 1] >= Math.pow(256, 5 - numbers.length)) {\r\n    return failure;\r\n  }\r\n\r\n  let ipv4 = numbers.pop();\r\n  let counter = 0;\r\n\r\n  for (const n of numbers) {\r\n    ipv4 += n * Math.pow(256, 3 - counter);\r\n    ++counter;\r\n  }\r\n\r\n  return ipv4;\r\n}\r\n\r\nfunction serializeIPv4(address) {\r\n  let output = \"\";\r\n  let n = address;\r\n\r\n  for (let i = 1; i <= 4; ++i) {\r\n    output = String(n % 256) + output;\r\n    if (i !== 4) {\r\n      output = \".\" + output;\r\n    }\r\n    n = Math.floor(n / 256);\r\n  }\r\n\r\n  return output;\r\n}\r\n\r\nfunction parseIPv6(input) {\r\n  const address = [0, 0, 0, 0, 0, 0, 0, 0];\r\n  let pieceIndex = 0;\r\n  let compress = null;\r\n  let pointer = 0;\r\n\r\n  input = punycode.ucs2.decode(input);\r\n\r\n  if (input[pointer] === 58) {\r\n    if (input[pointer + 1] !== 58) {\r\n      return failure;\r\n    }\r\n\r\n    pointer += 2;\r\n    ++pieceIndex;\r\n    compress = pieceIndex;\r\n  }\r\n\r\n  while (pointer < input.length) {\r\n    if (pieceIndex === 8) {\r\n      return failure;\r\n    }\r\n\r\n    if (input[pointer] === 58) {\r\n      if (compress !== null) {\r\n        return failure;\r\n      }\r\n      ++pointer;\r\n      ++pieceIndex;\r\n      compress = pieceIndex;\r\n      continue;\r\n    }\r\n\r\n    let value = 0;\r\n    let length = 0;\r\n\r\n    while (length < 4 && isASCIIHex(input[pointer])) {\r\n      value = value * 0x10 + parseInt(at(input, pointer), 16);\r\n      ++pointer;\r\n      ++length;\r\n    }\r\n\r\n    if (input[pointer] === 46) {\r\n      if (length === 0) {\r\n        return failure;\r\n      }\r\n\r\n      pointer -= length;\r\n\r\n      if (pieceIndex > 6) {\r\n        return failure;\r\n      }\r\n\r\n      let numbersSeen = 0;\r\n\r\n      while (input[pointer] !== undefined) {\r\n        let ipv4Piece = null;\r\n\r\n        if (numbersSeen > 0) {\r\n          if (input[pointer] === 46 && numbersSeen < 4) {\r\n            ++pointer;\r\n          } else {\r\n            return failure;\r\n          }\r\n        }\r\n\r\n        if (!isASCIIDigit(input[pointer])) {\r\n          return failure;\r\n        }\r\n\r\n        while (isASCIIDigit(input[pointer])) {\r\n          const number = parseInt(at(input, pointer));\r\n          if (ipv4Piece === null) {\r\n            ipv4Piece = number;\r\n          } else if (ipv4Piece === 0) {\r\n            return failure;\r\n          } else {\r\n            ipv4Piece = ipv4Piece * 10 + number;\r\n          }\r\n          if (ipv4Piece > 255) {\r\n            return failure;\r\n          }\r\n          ++pointer;\r\n        }\r\n\r\n        address[pieceIndex] = address[pieceIndex] * 0x100 + ipv4Piece;\r\n\r\n        ++numbersSeen;\r\n\r\n        if (numbersSeen === 2 || numbersSeen === 4) {\r\n          ++pieceIndex;\r\n        }\r\n      }\r\n\r\n      if (numbersSeen !== 4) {\r\n        return failure;\r\n      }\r\n\r\n      break;\r\n    } else if (input[pointer] === 58) {\r\n      ++pointer;\r\n      if (input[pointer] === undefined) {\r\n        return failure;\r\n      }\r\n    } else if (input[pointer] !== undefined) {\r\n      return failure;\r\n    }\r\n\r\n    address[pieceIndex] = value;\r\n    ++pieceIndex;\r\n  }\r\n\r\n  if (compress !== null) {\r\n    let swaps = pieceIndex - compress;\r\n    pieceIndex = 7;\r\n    while (pieceIndex !== 0 && swaps > 0) {\r\n      const temp = address[compress + swaps - 1];\r\n      address[compress + swaps - 1] = address[pieceIndex];\r\n      address[pieceIndex] = temp;\r\n      --pieceIndex;\r\n      --swaps;\r\n    }\r\n  } else if (compress === null && pieceIndex !== 8) {\r\n    return failure;\r\n  }\r\n\r\n  return address;\r\n}\r\n\r\nfunction serializeIPv6(address) {\r\n  let output = \"\";\r\n  const seqResult = findLongestZeroSequence(address);\r\n  const compress = seqResult.idx;\r\n  let ignore0 = false;\r\n\r\n  for (let pieceIndex = 0; pieceIndex <= 7; ++pieceIndex) {\r\n    if (ignore0 && address[pieceIndex] === 0) {\r\n      continue;\r\n    } else if (ignore0) {\r\n      ignore0 = false;\r\n    }\r\n\r\n    if (compress === pieceIndex) {\r\n      const separator = pieceIndex === 0 ? \"::\" : \":\";\r\n      output += separator;\r\n      ignore0 = true;\r\n      continue;\r\n    }\r\n\r\n    output += address[pieceIndex].toString(16);\r\n\r\n    if (pieceIndex !== 7) {\r\n      output += \":\";\r\n    }\r\n  }\r\n\r\n  return output;\r\n}\r\n\r\nfunction parseHost(input, isSpecialArg) {\r\n  if (input[0] === \"[\") {\r\n    if (input[input.length - 1] !== \"]\") {\r\n      return failure;\r\n    }\r\n\r\n    return parseIPv6(input.substring(1, input.length - 1));\r\n  }\r\n\r\n  if (!isSpecialArg) {\r\n    return parseOpaqueHost(input);\r\n  }\r\n\r\n  const domain = utf8PercentDecode(input);\r\n  const asciiDomain = tr46.toASCII(domain, false, tr46.PROCESSING_OPTIONS.NONTRANSITIONAL, false);\r\n  if (asciiDomain === null) {\r\n    return failure;\r\n  }\r\n\r\n  if (containsForbiddenHostCodePoint(asciiDomain)) {\r\n    return failure;\r\n  }\r\n\r\n  const ipv4Host = parseIPv4(asciiDomain);\r\n  if (typeof ipv4Host === \"number\" || ipv4Host === failure) {\r\n    return ipv4Host;\r\n  }\r\n\r\n  return asciiDomain;\r\n}\r\n\r\nfunction parseOpaqueHost(input) {\r\n  if (containsForbiddenHostCodePointExcludingPercent(input)) {\r\n    return failure;\r\n  }\r\n\r\n  let output = \"\";\r\n  const decoded = punycode.ucs2.decode(input);\r\n  for (let i = 0; i < decoded.length; ++i) {\r\n    output += percentEncodeChar(decoded[i], isC0ControlPercentEncode);\r\n  }\r\n  return output;\r\n}\r\n\r\nfunction findLongestZeroSequence(arr) {\r\n  let maxIdx = null;\r\n  let maxLen = 1; // only find elements > 1\r\n  let currStart = null;\r\n  let currLen = 0;\r\n\r\n  for (let i = 0; i < arr.length; ++i) {\r\n    if (arr[i] !== 0) {\r\n      if (currLen > maxLen) {\r\n        maxIdx = currStart;\r\n        maxLen = currLen;\r\n      }\r\n\r\n      currStart = null;\r\n      currLen = 0;\r\n    } else {\r\n      if (currStart === null) {\r\n        currStart = i;\r\n      }\r\n      ++currLen;\r\n    }\r\n  }\r\n\r\n  // if trailing zeros\r\n  if (currLen > maxLen) {\r\n    maxIdx = currStart;\r\n    maxLen = currLen;\r\n  }\r\n\r\n  return {\r\n    idx: maxIdx,\r\n    len: maxLen\r\n  };\r\n}\r\n\r\nfunction serializeHost(host) {\r\n  if (typeof host === \"number\") {\r\n    return serializeIPv4(host);\r\n  }\r\n\r\n  // IPv6 serializer\r\n  if (host instanceof Array) {\r\n    return \"[\" + serializeIPv6(host) + \"]\";\r\n  }\r\n\r\n  return host;\r\n}\r\n\r\nfunction trimControlChars(url) {\r\n  return url.replace(/^[\\u0000-\\u001F\\u0020]+|[\\u0000-\\u001F\\u0020]+$/g, \"\");\r\n}\r\n\r\nfunction trimTabAndNewline(url) {\r\n  return url.replace(/\\u0009|\\u000A|\\u000D/g, \"\");\r\n}\r\n\r\nfunction shortenPath(url) {\r\n  const path = url.path;\r\n  if (path.length === 0) {\r\n    return;\r\n  }\r\n  if (url.scheme === \"file\" && path.length === 1 && isNormalizedWindowsDriveLetter(path[0])) {\r\n    return;\r\n  }\r\n\r\n  path.pop();\r\n}\r\n\r\nfunction includesCredentials(url) {\r\n  return url.username !== \"\" || url.password !== \"\";\r\n}\r\n\r\nfunction cannotHaveAUsernamePasswordPort(url) {\r\n  return url.host === null || url.host === \"\" || url.cannotBeABaseURL || url.scheme === \"file\";\r\n}\r\n\r\nfunction isNormalizedWindowsDriveLetter(string) {\r\n  return /^[A-Za-z]:$/.test(string);\r\n}\r\n\r\nfunction URLStateMachine(input, base, encodingOverride, url, stateOverride) {\r\n  this.pointer = 0;\r\n  this.input = input;\r\n  this.base = base || null;\r\n  this.encodingOverride = encodingOverride || \"utf-8\";\r\n  this.stateOverride = stateOverride;\r\n  this.url = url;\r\n  this.failure = false;\r\n  this.parseError = false;\r\n\r\n  if (!this.url) {\r\n    this.url = {\r\n      scheme: \"\",\r\n      username: \"\",\r\n      password: \"\",\r\n      host: null,\r\n      port: null,\r\n      path: [],\r\n      query: null,\r\n      fragment: null,\r\n\r\n      cannotBeABaseURL: false\r\n    };\r\n\r\n    const res = trimControlChars(this.input);\r\n    if (res !== this.input) {\r\n      this.parseError = true;\r\n    }\r\n    this.input = res;\r\n  }\r\n\r\n  const res = trimTabAndNewline(this.input);\r\n  if (res !== this.input) {\r\n    this.parseError = true;\r\n  }\r\n  this.input = res;\r\n\r\n  this.state = stateOverride || \"scheme start\";\r\n\r\n  this.buffer = \"\";\r\n  this.atFlag = false;\r\n  this.arrFlag = false;\r\n  this.passwordTokenSeenFlag = false;\r\n\r\n  this.input = punycode.ucs2.decode(this.input);\r\n\r\n  for (; this.pointer <= this.input.length; ++this.pointer) {\r\n    const c = this.input[this.pointer];\r\n    const cStr = isNaN(c) ? undefined : String.fromCodePoint(c);\r\n\r\n    // exec state machine\r\n    const ret = this[\"parse \" + this.state](c, cStr);\r\n    if (!ret) {\r\n      break; // terminate algorithm\r\n    } else if (ret === failure) {\r\n      this.failure = true;\r\n      break;\r\n    }\r\n  }\r\n}\r\n\r\nURLStateMachine.prototype[\"parse scheme start\"] = function parseSchemeStart(c, cStr) {\r\n  if (isASCIIAlpha(c)) {\r\n    this.buffer += cStr.toLowerCase();\r\n    this.state = \"scheme\";\r\n  } else if (!this.stateOverride) {\r\n    this.state = \"no scheme\";\r\n    --this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    return failure;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse scheme\"] = function parseScheme(c, cStr) {\r\n  if (isASCIIAlphanumeric(c) || c === 43 || c === 45 || c === 46) {\r\n    this.buffer += cStr.toLowerCase();\r\n  } else if (c === 58) {\r\n    if (this.stateOverride) {\r\n      if (isSpecial(this.url) && !isSpecialScheme(this.buffer)) {\r\n        return false;\r\n      }\r\n\r\n      if (!isSpecial(this.url) && isSpecialScheme(this.buffer)) {\r\n        return false;\r\n      }\r\n\r\n      if ((includesCredentials(this.url) || this.url.port !== null) && this.buffer === \"file\") {\r\n        return false;\r\n      }\r\n\r\n      if (this.url.scheme === \"file\" && (this.url.host === \"\" || this.url.host === null)) {\r\n        return false;\r\n      }\r\n    }\r\n    this.url.scheme = this.buffer;\r\n    this.buffer = \"\";\r\n    if (this.stateOverride) {\r\n      return false;\r\n    }\r\n    if (this.url.scheme === \"file\") {\r\n      if (this.input[this.pointer + 1] !== 47 || this.input[this.pointer + 2] !== 47) {\r\n        this.parseError = true;\r\n      }\r\n      this.state = \"file\";\r\n    } else if (isSpecial(this.url) && this.base !== null && this.base.scheme === this.url.scheme) {\r\n      this.state = \"special relative or authority\";\r\n    } else if (isSpecial(this.url)) {\r\n      this.state = \"special authority slashes\";\r\n    } else if (this.input[this.pointer + 1] === 47) {\r\n      this.state = \"path or authority\";\r\n      ++this.pointer;\r\n    } else {\r\n      this.url.cannotBeABaseURL = true;\r\n      this.url.path.push(\"\");\r\n      this.state = \"cannot-be-a-base-URL path\";\r\n    }\r\n  } else if (!this.stateOverride) {\r\n    this.buffer = \"\";\r\n    this.state = \"no scheme\";\r\n    this.pointer = -1;\r\n  } else {\r\n    this.parseError = true;\r\n    return failure;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse no scheme\"] = function parseNoScheme(c) {\r\n  if (this.base === null || (this.base.cannotBeABaseURL && c !== 35)) {\r\n    return failure;\r\n  } else if (this.base.cannotBeABaseURL && c === 35) {\r\n    this.url.scheme = this.base.scheme;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = this.base.query;\r\n    this.url.fragment = \"\";\r\n    this.url.cannotBeABaseURL = true;\r\n    this.state = \"fragment\";\r\n  } else if (this.base.scheme === \"file\") {\r\n    this.state = \"file\";\r\n    --this.pointer;\r\n  } else {\r\n    this.state = \"relative\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse special relative or authority\"] = function parseSpecialRelativeOrAuthority(c) {\r\n  if (c === 47 && this.input[this.pointer + 1] === 47) {\r\n    this.state = \"special authority ignore slashes\";\r\n    ++this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    this.state = \"relative\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse path or authority\"] = function parsePathOrAuthority(c) {\r\n  if (c === 47) {\r\n    this.state = \"authority\";\r\n  } else {\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse relative\"] = function parseRelative(c) {\r\n  this.url.scheme = this.base.scheme;\r\n  if (isNaN(c)) {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = this.base.query;\r\n  } else if (c === 47) {\r\n    this.state = \"relative slash\";\r\n  } else if (c === 63) {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = \"\";\r\n    this.state = \"query\";\r\n  } else if (c === 35) {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = this.base.query;\r\n    this.url.fragment = \"\";\r\n    this.state = \"fragment\";\r\n  } else if (isSpecial(this.url) && c === 92) {\r\n    this.parseError = true;\r\n    this.state = \"relative slash\";\r\n  } else {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice(0, this.base.path.length - 1);\r\n\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse relative slash\"] = function parseRelativeSlash(c) {\r\n  if (isSpecial(this.url) && (c === 47 || c === 92)) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"special authority ignore slashes\";\r\n  } else if (c === 47) {\r\n    this.state = \"authority\";\r\n  } else {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse special authority slashes\"] = function parseSpecialAuthoritySlashes(c) {\r\n  if (c === 47 && this.input[this.pointer + 1] === 47) {\r\n    this.state = \"special authority ignore slashes\";\r\n    ++this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    this.state = \"special authority ignore slashes\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse special authority ignore slashes\"] = function parseSpecialAuthorityIgnoreSlashes(c) {\r\n  if (c !== 47 && c !== 92) {\r\n    this.state = \"authority\";\r\n    --this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse authority\"] = function parseAuthority(c, cStr) {\r\n  if (c === 64) {\r\n    this.parseError = true;\r\n    if (this.atFlag) {\r\n      this.buffer = \"%40\" + this.buffer;\r\n    }\r\n    this.atFlag = true;\r\n\r\n    // careful, this is based on buffer and has its own pointer (this.pointer != pointer) and inner chars\r\n    const len = countSymbols(this.buffer);\r\n    for (let pointer = 0; pointer < len; ++pointer) {\r\n      const codePoint = this.buffer.codePointAt(pointer);\r\n\r\n      if (codePoint === 58 && !this.passwordTokenSeenFlag) {\r\n        this.passwordTokenSeenFlag = true;\r\n        continue;\r\n      }\r\n      const encodedCodePoints = percentEncodeChar(codePoint, isUserinfoPercentEncode);\r\n      if (this.passwordTokenSeenFlag) {\r\n        this.url.password += encodedCodePoints;\r\n      } else {\r\n        this.url.username += encodedCodePoints;\r\n      }\r\n    }\r\n    this.buffer = \"\";\r\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\r\n             (isSpecial(this.url) && c === 92)) {\r\n    if (this.atFlag && this.buffer === \"\") {\r\n      this.parseError = true;\r\n      return failure;\r\n    }\r\n    this.pointer -= countSymbols(this.buffer) + 1;\r\n    this.buffer = \"\";\r\n    this.state = \"host\";\r\n  } else {\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse hostname\"] =\r\nURLStateMachine.prototype[\"parse host\"] = function parseHostName(c, cStr) {\r\n  if (this.stateOverride && this.url.scheme === \"file\") {\r\n    --this.pointer;\r\n    this.state = \"file host\";\r\n  } else if (c === 58 && !this.arrFlag) {\r\n    if (this.buffer === \"\") {\r\n      this.parseError = true;\r\n      return failure;\r\n    }\r\n\r\n    const host = parseHost(this.buffer, isSpecial(this.url));\r\n    if (host === failure) {\r\n      return failure;\r\n    }\r\n\r\n    this.url.host = host;\r\n    this.buffer = \"\";\r\n    this.state = \"port\";\r\n    if (this.stateOverride === \"hostname\") {\r\n      return false;\r\n    }\r\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\r\n             (isSpecial(this.url) && c === 92)) {\r\n    --this.pointer;\r\n    if (isSpecial(this.url) && this.buffer === \"\") {\r\n      this.parseError = true;\r\n      return failure;\r\n    } else if (this.stateOverride && this.buffer === \"\" &&\r\n               (includesCredentials(this.url) || this.url.port !== null)) {\r\n      this.parseError = true;\r\n      return false;\r\n    }\r\n\r\n    const host = parseHost(this.buffer, isSpecial(this.url));\r\n    if (host === failure) {\r\n      return failure;\r\n    }\r\n\r\n    this.url.host = host;\r\n    this.buffer = \"\";\r\n    this.state = \"path start\";\r\n    if (this.stateOverride) {\r\n      return false;\r\n    }\r\n  } else {\r\n    if (c === 91) {\r\n      this.arrFlag = true;\r\n    } else if (c === 93) {\r\n      this.arrFlag = false;\r\n    }\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse port\"] = function parsePort(c, cStr) {\r\n  if (isASCIIDigit(c)) {\r\n    this.buffer += cStr;\r\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\r\n             (isSpecial(this.url) && c === 92) ||\r\n             this.stateOverride) {\r\n    if (this.buffer !== \"\") {\r\n      const port = parseInt(this.buffer);\r\n      if (port > Math.pow(2, 16) - 1) {\r\n        this.parseError = true;\r\n        return failure;\r\n      }\r\n      this.url.port = port === defaultPort(this.url.scheme) ? null : port;\r\n      this.buffer = \"\";\r\n    }\r\n    if (this.stateOverride) {\r\n      return false;\r\n    }\r\n    this.state = \"path start\";\r\n    --this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    return failure;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nconst fileOtherwiseCodePoints = new Set([47, 92, 63, 35]);\r\n\r\nURLStateMachine.prototype[\"parse file\"] = function parseFile(c) {\r\n  this.url.scheme = \"file\";\r\n\r\n  if (c === 47 || c === 92) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"file slash\";\r\n  } else if (this.base !== null && this.base.scheme === \"file\") {\r\n    if (isNaN(c)) {\r\n      this.url.host = this.base.host;\r\n      this.url.path = this.base.path.slice();\r\n      this.url.query = this.base.query;\r\n    } else if (c === 63) {\r\n      this.url.host = this.base.host;\r\n      this.url.path = this.base.path.slice();\r\n      this.url.query = \"\";\r\n      this.state = \"query\";\r\n    } else if (c === 35) {\r\n      this.url.host = this.base.host;\r\n      this.url.path = this.base.path.slice();\r\n      this.url.query = this.base.query;\r\n      this.url.fragment = \"\";\r\n      this.state = \"fragment\";\r\n    } else {\r\n      if (this.input.length - this.pointer - 1 === 0 || // remaining consists of 0 code points\r\n          !isWindowsDriveLetterCodePoints(c, this.input[this.pointer + 1]) ||\r\n          (this.input.length - this.pointer - 1 >= 2 && // remaining has at least 2 code points\r\n           !fileOtherwiseCodePoints.has(this.input[this.pointer + 2]))) {\r\n        this.url.host = this.base.host;\r\n        this.url.path = this.base.path.slice();\r\n        shortenPath(this.url);\r\n      } else {\r\n        this.parseError = true;\r\n      }\r\n\r\n      this.state = \"path\";\r\n      --this.pointer;\r\n    }\r\n  } else {\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse file slash\"] = function parseFileSlash(c) {\r\n  if (c === 47 || c === 92) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"file host\";\r\n  } else {\r\n    if (this.base !== null && this.base.scheme === \"file\") {\r\n      if (isNormalizedWindowsDriveLetterString(this.base.path[0])) {\r\n        this.url.path.push(this.base.path[0]);\r\n      } else {\r\n        this.url.host = this.base.host;\r\n      }\r\n    }\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse file host\"] = function parseFileHost(c, cStr) {\r\n  if (isNaN(c) || c === 47 || c === 92 || c === 63 || c === 35) {\r\n    --this.pointer;\r\n    if (!this.stateOverride && isWindowsDriveLetterString(this.buffer)) {\r\n      this.parseError = true;\r\n      this.state = \"path\";\r\n    } else if (this.buffer === \"\") {\r\n      this.url.host = \"\";\r\n      if (this.stateOverride) {\r\n        return false;\r\n      }\r\n      this.state = \"path start\";\r\n    } else {\r\n      let host = parseHost(this.buffer, isSpecial(this.url));\r\n      if (host === failure) {\r\n        return failure;\r\n      }\r\n      if (host === \"localhost\") {\r\n        host = \"\";\r\n      }\r\n      this.url.host = host;\r\n\r\n      if (this.stateOverride) {\r\n        return false;\r\n      }\r\n\r\n      this.buffer = \"\";\r\n      this.state = \"path start\";\r\n    }\r\n  } else {\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse path start\"] = function parsePathStart(c) {\r\n  if (isSpecial(this.url)) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"path\";\r\n\r\n    if (c !== 47 && c !== 92) {\r\n      --this.pointer;\r\n    }\r\n  } else if (!this.stateOverride && c === 63) {\r\n    this.url.query = \"\";\r\n    this.state = \"query\";\r\n  } else if (!this.stateOverride && c === 35) {\r\n    this.url.fragment = \"\";\r\n    this.state = \"fragment\";\r\n  } else if (c !== undefined) {\r\n    this.state = \"path\";\r\n    if (c !== 47) {\r\n      --this.pointer;\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse path\"] = function parsePath(c) {\r\n  if (isNaN(c) || c === 47 || (isSpecial(this.url) && c === 92) ||\r\n      (!this.stateOverride && (c === 63 || c === 35))) {\r\n    if (isSpecial(this.url) && c === 92) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    if (isDoubleDot(this.buffer)) {\r\n      shortenPath(this.url);\r\n      if (c !== 47 && !(isSpecial(this.url) && c === 92)) {\r\n        this.url.path.push(\"\");\r\n      }\r\n    } else if (isSingleDot(this.buffer) && c !== 47 &&\r\n               !(isSpecial(this.url) && c === 92)) {\r\n      this.url.path.push(\"\");\r\n    } else if (!isSingleDot(this.buffer)) {\r\n      if (this.url.scheme === \"file\" && this.url.path.length === 0 && isWindowsDriveLetterString(this.buffer)) {\r\n        if (this.url.host !== \"\" && this.url.host !== null) {\r\n          this.parseError = true;\r\n          this.url.host = \"\";\r\n        }\r\n        this.buffer = this.buffer[0] + \":\";\r\n      }\r\n      this.url.path.push(this.buffer);\r\n    }\r\n    this.buffer = \"\";\r\n    if (this.url.scheme === \"file\" && (c === undefined || c === 63 || c === 35)) {\r\n      while (this.url.path.length > 1 && this.url.path[0] === \"\") {\r\n        this.parseError = true;\r\n        this.url.path.shift();\r\n      }\r\n    }\r\n    if (c === 63) {\r\n      this.url.query = \"\";\r\n      this.state = \"query\";\r\n    }\r\n    if (c === 35) {\r\n      this.url.fragment = \"\";\r\n      this.state = \"fragment\";\r\n    }\r\n  } else {\r\n    // TODO: If c is not a URL code point and not \"%\", parse error.\r\n\r\n    if (c === 37 &&\r\n      (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n        !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    this.buffer += percentEncodeChar(c, isPathPercentEncode);\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse cannot-be-a-base-URL path\"] = function parseCannotBeABaseURLPath(c) {\r\n  if (c === 63) {\r\n    this.url.query = \"\";\r\n    this.state = \"query\";\r\n  } else if (c === 35) {\r\n    this.url.fragment = \"\";\r\n    this.state = \"fragment\";\r\n  } else {\r\n    // TODO: Add: not a URL code point\r\n    if (!isNaN(c) && c !== 37) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    if (c === 37 &&\r\n        (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n         !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    if (!isNaN(c)) {\r\n      this.url.path[0] = this.url.path[0] + percentEncodeChar(c, isC0ControlPercentEncode);\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse query\"] = function parseQuery(c, cStr) {\r\n  if (isNaN(c) || (!this.stateOverride && c === 35)) {\r\n    if (!isSpecial(this.url) || this.url.scheme === \"ws\" || this.url.scheme === \"wss\") {\r\n      this.encodingOverride = \"utf-8\";\r\n    }\r\n\r\n    const buffer = new Buffer(this.buffer); // TODO: Use encoding override instead\r\n    for (let i = 0; i < buffer.length; ++i) {\r\n      if (buffer[i] < 0x21 || buffer[i] > 0x7E || buffer[i] === 0x22 || buffer[i] === 0x23 ||\r\n          buffer[i] === 0x3C || buffer[i] === 0x3E) {\r\n        this.url.query += percentEncode(buffer[i]);\r\n      } else {\r\n        this.url.query += String.fromCodePoint(buffer[i]);\r\n      }\r\n    }\r\n\r\n    this.buffer = \"\";\r\n    if (c === 35) {\r\n      this.url.fragment = \"\";\r\n      this.state = \"fragment\";\r\n    }\r\n  } else {\r\n    // TODO: If c is not a URL code point and not \"%\", parse error.\r\n    if (c === 37 &&\r\n      (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n        !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse fragment\"] = function parseFragment(c) {\r\n  if (isNaN(c)) { // do nothing\r\n  } else if (c === 0x0) {\r\n    this.parseError = true;\r\n  } else {\r\n    // TODO: If c is not a URL code point and not \"%\", parse error.\r\n    if (c === 37 &&\r\n      (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n        !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    this.url.fragment += percentEncodeChar(c, isC0ControlPercentEncode);\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nfunction serializeURL(url, excludeFragment) {\r\n  let output = url.scheme + \":\";\r\n  if (url.host !== null) {\r\n    output += \"//\";\r\n\r\n    if (url.username !== \"\" || url.password !== \"\") {\r\n      output += url.username;\r\n      if (url.password !== \"\") {\r\n        output += \":\" + url.password;\r\n      }\r\n      output += \"@\";\r\n    }\r\n\r\n    output += serializeHost(url.host);\r\n\r\n    if (url.port !== null) {\r\n      output += \":\" + url.port;\r\n    }\r\n  } else if (url.host === null && url.scheme === \"file\") {\r\n    output += \"//\";\r\n  }\r\n\r\n  if (url.cannotBeABaseURL) {\r\n    output += url.path[0];\r\n  } else {\r\n    for (const string of url.path) {\r\n      output += \"/\" + string;\r\n    }\r\n  }\r\n\r\n  if (url.query !== null) {\r\n    output += \"?\" + url.query;\r\n  }\r\n\r\n  if (!excludeFragment && url.fragment !== null) {\r\n    output += \"#\" + url.fragment;\r\n  }\r\n\r\n  return output;\r\n}\r\n\r\nfunction serializeOrigin(tuple) {\r\n  let result = tuple.scheme + \"://\";\r\n  result += serializeHost(tuple.host);\r\n\r\n  if (tuple.port !== null) {\r\n    result += \":\" + tuple.port;\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nmodule.exports.serializeURL = serializeURL;\r\n\r\nmodule.exports.serializeURLOrigin = function (url) {\r\n  // https://url.spec.whatwg.org/#concept-url-origin\r\n  switch (url.scheme) {\r\n    case \"blob\":\r\n      try {\r\n        return module.exports.serializeURLOrigin(module.exports.parseURL(url.path[0]));\r\n      } catch (e) {\r\n        // serializing an opaque origin returns \"null\"\r\n        return \"null\";\r\n      }\r\n    case \"ftp\":\r\n    case \"gopher\":\r\n    case \"http\":\r\n    case \"https\":\r\n    case \"ws\":\r\n    case \"wss\":\r\n      return serializeOrigin({\r\n        scheme: url.scheme,\r\n        host: url.host,\r\n        port: url.port\r\n      });\r\n    case \"file\":\r\n      // spec says \"exercise to the reader\", chrome says \"file://\"\r\n      return \"file://\";\r\n    default:\r\n      // serializing an opaque origin returns \"null\"\r\n      return \"null\";\r\n  }\r\n};\r\n\r\nmodule.exports.basicURLParse = function (input, options) {\r\n  if (options === undefined) {\r\n    options = {};\r\n  }\r\n\r\n  const usm = new URLStateMachine(input, options.baseURL, options.encodingOverride, options.url, options.stateOverride);\r\n  if (usm.failure) {\r\n    return \"failure\";\r\n  }\r\n\r\n  return usm.url;\r\n};\r\n\r\nmodule.exports.setTheUsername = function (url, username) {\r\n  url.username = \"\";\r\n  const decoded = punycode.ucs2.decode(username);\r\n  for (let i = 0; i < decoded.length; ++i) {\r\n    url.username += percentEncodeChar(decoded[i], isUserinfoPercentEncode);\r\n  }\r\n};\r\n\r\nmodule.exports.setThePassword = function (url, password) {\r\n  url.password = \"\";\r\n  const decoded = punycode.ucs2.decode(password);\r\n  for (let i = 0; i < decoded.length; ++i) {\r\n    url.password += percentEncodeChar(decoded[i], isUserinfoPercentEncode);\r\n  }\r\n};\r\n\r\nmodule.exports.serializeHost = serializeHost;\r\n\r\nmodule.exports.cannotHaveAUsernamePasswordPort = cannotHaveAUsernamePasswordPort;\r\n\r\nmodule.exports.serializeInteger = function (integer) {\r\n  return String(integer);\r\n};\r\n\r\nmodule.exports.parseURL = function (input, options) {\r\n  if (options === undefined) {\r\n    options = {};\r\n  }\r\n\r\n  // We don't handle blobs, so this just delegates:\r\n  return module.exports.basicURLParse(input, { baseURL: options.baseURL, encodingOverride: options.encodingOverride });\r\n};\r\n","module.exports = require(\"punycode\");;","\"use strict\";\n\nvar punycode = require(\"punycode\");\nvar mappingTable = require(\"./lib/mappingTable.json\");\n\nvar PROCESSING_OPTIONS = {\n  TRANSITIONAL: 0,\n  NONTRANSITIONAL: 1\n};\n\nfunction normalize(str) { // fix bug in v8\n  return str.split('\\u0000').map(function (s) { return s.normalize('NFC'); }).join('\\u0000');\n}\n\nfunction findStatus(val) {\n  var start = 0;\n  var end = mappingTable.length - 1;\n\n  while (start <= end) {\n    var mid = Math.floor((start + end) / 2);\n\n    var target = mappingTable[mid];\n    if (target[0][0] <= val && target[0][1] >= val) {\n      return target;\n    } else if (target[0][0] > val) {\n      end = mid - 1;\n    } else {\n      start = mid + 1;\n    }\n  }\n\n  return null;\n}\n\nvar regexAstralSymbols = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n\nfunction countSymbols(string) {\n  return string\n    // replace every surrogate pair with a BMP symbol\n    .replace(regexAstralSymbols, '_')\n    // then get the length\n    .length;\n}\n\nfunction mapChars(domain_name, useSTD3, processing_option) {\n  var hasError = false;\n  var processed = \"\";\n\n  var len = countSymbols(domain_name);\n  for (var i = 0; i < len; ++i) {\n    var codePoint = domain_name.codePointAt(i);\n    var status = findStatus(codePoint);\n\n    switch (status[1]) {\n      case \"disallowed\":\n        hasError = true;\n        processed += String.fromCodePoint(codePoint);\n        break;\n      case \"ignored\":\n        break;\n      case \"mapped\":\n        processed += String.fromCodePoint.apply(String, status[2]);\n        break;\n      case \"deviation\":\n        if (processing_option === PROCESSING_OPTIONS.TRANSITIONAL) {\n          processed += String.fromCodePoint.apply(String, status[2]);\n        } else {\n          processed += String.fromCodePoint(codePoint);\n        }\n        break;\n      case \"valid\":\n        processed += String.fromCodePoint(codePoint);\n        break;\n      case \"disallowed_STD3_mapped\":\n        if (useSTD3) {\n          hasError = true;\n          processed += String.fromCodePoint(codePoint);\n        } else {\n          processed += String.fromCodePoint.apply(String, status[2]);\n        }\n        break;\n      case \"disallowed_STD3_valid\":\n        if (useSTD3) {\n          hasError = true;\n        }\n\n        processed += String.fromCodePoint(codePoint);\n        break;\n    }\n  }\n\n  return {\n    string: processed,\n    error: hasError\n  };\n}\n\nvar combiningMarksRegex = /[\\u0300-\\u036F\\u0483-\\u0489\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u08E4-\\u0903\\u093A-\\u093C\\u093E-\\u094F\\u0951-\\u0957\\u0962\\u0963\\u0981-\\u0983\\u09BC\\u09BE-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CD\\u09D7\\u09E2\\u09E3\\u0A01-\\u0A03\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81-\\u0A83\\u0ABC\\u0ABE-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AE2\\u0AE3\\u0B01-\\u0B03\\u0B3C\\u0B3E-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B62\\u0B63\\u0B82\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD7\\u0C00-\\u0C03\\u0C3E-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C81-\\u0C83\\u0CBC\\u0CBE-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CE2\\u0CE3\\u0D01-\\u0D03\\u0D3E-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4D\\u0D57\\u0D62\\u0D63\\u0D82\\u0D83\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F3E\\u0F3F\\u0F71-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102B-\\u103E\\u1056-\\u1059\\u105E-\\u1060\\u1062-\\u1064\\u1067-\\u106D\\u1071-\\u1074\\u1082-\\u108D\\u108F\\u109A-\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B4-\\u17D3\\u17DD\\u180B-\\u180D\\u18A9\\u1920-\\u192B\\u1930-\\u193B\\u19B0-\\u19C0\\u19C8\\u19C9\\u1A17-\\u1A1B\\u1A55-\\u1A5E\\u1A60-\\u1A7C\\u1A7F\\u1AB0-\\u1ABE\\u1B00-\\u1B04\\u1B34-\\u1B44\\u1B6B-\\u1B73\\u1B80-\\u1B82\\u1BA1-\\u1BAD\\u1BE6-\\u1BF3\\u1C24-\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE8\\u1CED\\u1CF2-\\u1CF4\\u1CF8\\u1CF9\\u1DC0-\\u1DF5\\u1DFC-\\u1DFF\\u20D0-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F-\\uA672\\uA674-\\uA67D\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA823-\\uA827\\uA880\\uA881\\uA8B4-\\uA8C4\\uA8E0-\\uA8F1\\uA926-\\uA92D\\uA947-\\uA953\\uA980-\\uA983\\uA9B3-\\uA9C0\\uA9E5\\uAA29-\\uAA36\\uAA43\\uAA4C\\uAA4D\\uAA7B-\\uAA7D\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEB-\\uAAEF\\uAAF5\\uAAF6\\uABE3-\\uABEA\\uABEC\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE2D]|\\uD800[\\uDDFD\\uDEE0\\uDF76-\\uDF7A]|\\uD802[\\uDE01-\\uDE03\\uDE05\\uDE06\\uDE0C-\\uDE0F\\uDE38-\\uDE3A\\uDE3F\\uDEE5\\uDEE6]|\\uD804[\\uDC00-\\uDC02\\uDC38-\\uDC46\\uDC7F-\\uDC82\\uDCB0-\\uDCBA\\uDD00-\\uDD02\\uDD27-\\uDD34\\uDD73\\uDD80-\\uDD82\\uDDB3-\\uDDC0\\uDE2C-\\uDE37\\uDEDF-\\uDEEA\\uDF01-\\uDF03\\uDF3C\\uDF3E-\\uDF44\\uDF47\\uDF48\\uDF4B-\\uDF4D\\uDF57\\uDF62\\uDF63\\uDF66-\\uDF6C\\uDF70-\\uDF74]|\\uD805[\\uDCB0-\\uDCC3\\uDDAF-\\uDDB5\\uDDB8-\\uDDC0\\uDE30-\\uDE40\\uDEAB-\\uDEB7]|\\uD81A[\\uDEF0-\\uDEF4\\uDF30-\\uDF36]|\\uD81B[\\uDF51-\\uDF7E\\uDF8F-\\uDF92]|\\uD82F[\\uDC9D\\uDC9E]|\\uD834[\\uDD65-\\uDD69\\uDD6D-\\uDD72\\uDD7B-\\uDD82\\uDD85-\\uDD8B\\uDDAA-\\uDDAD\\uDE42-\\uDE44]|\\uD83A[\\uDCD0-\\uDCD6]|\\uDB40[\\uDD00-\\uDDEF]/;\n\nfunction validateLabel(label, processing_option) {\n  if (label.substr(0, 4) === \"xn--\") {\n    label = punycode.toUnicode(label);\n    processing_option = PROCESSING_OPTIONS.NONTRANSITIONAL;\n  }\n\n  var error = false;\n\n  if (normalize(label) !== label ||\n      (label[3] === \"-\" && label[4] === \"-\") ||\n      label[0] === \"-\" || label[label.length - 1] === \"-\" ||\n      label.indexOf(\".\") !== -1 ||\n      label.search(combiningMarksRegex) === 0) {\n    error = true;\n  }\n\n  var len = countSymbols(label);\n  for (var i = 0; i < len; ++i) {\n    var status = findStatus(label.codePointAt(i));\n    if ((processing === PROCESSING_OPTIONS.TRANSITIONAL && status[1] !== \"valid\") ||\n        (processing === PROCESSING_OPTIONS.NONTRANSITIONAL &&\n         status[1] !== \"valid\" && status[1] !== \"deviation\")) {\n      error = true;\n      break;\n    }\n  }\n\n  return {\n    label: label,\n    error: error\n  };\n}\n\nfunction processing(domain_name, useSTD3, processing_option) {\n  var result = mapChars(domain_name, useSTD3, processing_option);\n  result.string = normalize(result.string);\n\n  var labels = result.string.split(\".\");\n  for (var i = 0; i < labels.length; ++i) {\n    try {\n      var validation = validateLabel(labels[i]);\n      labels[i] = validation.label;\n      result.error = result.error || validation.error;\n    } catch(e) {\n      result.error = true;\n    }\n  }\n\n  return {\n    string: labels.join(\".\"),\n    error: result.error\n  };\n}\n\nmodule.exports.toASCII = function(domain_name, useSTD3, processing_option, verifyDnsLength) {\n  var result = processing(domain_name, useSTD3, processing_option);\n  var labels = result.string.split(\".\");\n  labels = labels.map(function(l) {\n    try {\n      return punycode.toASCII(l);\n    } catch(e) {\n      result.error = true;\n      return l;\n    }\n  });\n\n  if (verifyDnsLength) {\n    var total = labels.slice(0, labels.length - 1).join(\".\").length;\n    if (total.length > 253 || total.length === 0) {\n      result.error = true;\n    }\n\n    for (var i=0; i < labels.length; ++i) {\n      if (labels.length > 63 || labels.length === 0) {\n        result.error = true;\n        break;\n      }\n    }\n  }\n\n  if (result.error) return null;\n  return labels.join(\".\");\n};\n\nmodule.exports.toUnicode = function(domain_name, useSTD3) {\n  var result = processing(domain_name, useSTD3, PROCESSING_OPTIONS.NONTRANSITIONAL);\n\n  return {\n    domain: result.string,\n    error: result.error\n  };\n};\n\nmodule.exports.PROCESSING_OPTIONS = PROCESSING_OPTIONS;\n","var baseKeys = require('./_baseKeys'),\n    getTag = require('./_getTag'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isArrayLike = require('./isArrayLike'),\n    isBuffer = require('./isBuffer'),\n    isPrototype = require('./_isPrototype'),\n    isTypedArray = require('./isTypedArray');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    setTag = '[object Set]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if `value` is an empty object, collection, map, or set.\n *\n * Objects are considered empty if they have no own enumerable string keyed\n * properties.\n *\n * Array-like values such as `arguments` objects, arrays, buffers, strings, or\n * jQuery-like collections are considered empty if they have a `length` of `0`.\n * Similarly, maps and sets are considered empty if they have a `size` of `0`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n * @example\n *\n * _.isEmpty(null);\n * // => true\n *\n * _.isEmpty(true);\n * // => true\n *\n * _.isEmpty(1);\n * // => true\n *\n * _.isEmpty([1, 2, 3]);\n * // => false\n *\n * _.isEmpty({ 'a': 1 });\n * // => false\n */\nfunction isEmpty(value) {\n  if (value == null) {\n    return true;\n  }\n  if (isArrayLike(value) &&\n      (isArray(value) || typeof value == 'string' || typeof value.splice == 'function' ||\n        isBuffer(value) || isTypedArray(value) || isArguments(value))) {\n    return !value.length;\n  }\n  var tag = getTag(value);\n  if (tag == mapTag || tag == setTag) {\n    return !value.size;\n  }\n  if (isPrototype(value)) {\n    return !baseKeys(value).length;\n  }\n  for (var key in value) {\n    if (hasOwnProperty.call(value, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nmodule.exports = isEmpty;\n","var isPrototype = require('./_isPrototype'),\n    nativeKeys = require('./_nativeKeys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeys;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n","var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n","var DataView = require('./_DataView'),\n    Map = require('./_Map'),\n    Promise = require('./_Promise'),\n    Set = require('./_Set'),\n    WeakMap = require('./_WeakMap'),\n    baseGetTag = require('./_baseGetTag'),\n    toSource = require('./_toSource');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nmodule.exports = getTag;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nmodule.exports = DataView;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nmodule.exports = Promise;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nmodule.exports = WeakMap;\n","var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n","var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n","var baseGetTag = require('./_baseGetTag'),\n    isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n","var isArray = require('./isArray');\n\n/**\n * Casts `value` as an array if it's not one.\n *\n * @static\n * @memberOf _\n * @since 4.4.0\n * @category Lang\n * @param {*} value The value to inspect.\n * @returns {Array} Returns the cast array.\n * @example\n *\n * _.castArray(1);\n * // => [1]\n *\n * _.castArray({ 'a': 1 });\n * // => [{ 'a': 1 }]\n *\n * _.castArray('abc');\n * // => ['abc']\n *\n * _.castArray(null);\n * // => [null]\n *\n * _.castArray(undefined);\n * // => [undefined]\n *\n * _.castArray();\n * // => []\n *\n * var array = [1, 2, 3];\n * console.log(_.castArray(array) === array);\n * // => true\n */\nfunction castArray() {\n  if (!arguments.length) {\n    return [];\n  }\n  var value = arguments[0];\n  return isArray(value) ? value : [value];\n}\n\nmodule.exports = castArray;\n","var baseFlatten = require('./_baseFlatten');\n\n/**\n * Flattens `array` a single level deep.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flatten([1, [2, [3, [4]], 5]]);\n * // => [1, 2, [3, [4]], 5]\n */\nfunction flatten(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, 1) : [];\n}\n\nmodule.exports = flatten;\n","var arrayPush = require('./_arrayPush'),\n    isFlattenable = require('./_isFlattenable');\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseFlatten;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n","var Symbol = require('./_Symbol'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray');\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nmodule.exports = isFlattenable;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","import mainConfig from 'mainConfig';\nconst sdkInfo = mainConfig['analytics.header.sdkName'] + '/' + mainConfig['sdk.version'];\nconst headerName = mainConfig['analytics.header.name'];\n\nconst getGlobalAnalytics = () => {\n    global.__tomtomAnalyticsInfo_ = global.__tomtomAnalyticsInfo_ ? global.__tomtomAnalyticsInfo_ : {};\n    return global.__tomtomAnalyticsInfo_;\n};\n\nexport const getHeaderName = () => headerName;\n\nexport const getHeaderContent = () => {\n    const prodInfo = getGlobalAnalytics().productInfo !== undefined ? ' ' + getGlobalAnalytics().productInfo : '';\n    return sdkInfo + prodInfo;\n};\n\nexport const setProductInfo = (productId, productVersion) => {\n    if (!productId) {\n        throw new Error('ProductId needs to be set');\n    }\n    const prodVersion = productVersion || productVersion === 0 ? '/' + productVersion : '';\n    getGlobalAnalytics().productInfo = productId + prodVersion;\n};\n\nexport const getProductInfo = () => getGlobalAnalytics().productInfo;\n\nexport const addAnalyticsHeader = (req) => {\n    req.header(headerName, getHeaderContent());\n    return req;\n};\n\nexport const getAnalyticsHeader = () => {\n    const header = {};\n    header[headerName] = getHeaderContent();\n    return header;\n};\n","const DEFAULT_SERVICE_KEY = 'DEFAULT';\nconst EXTENDED_SEARCH = 'EXTENDED_SEARCH';\nconst MAP = 'MAP';\nconst ROUTING = 'ROUTING';\nconst SEARCH = 'SEARCH';\nconst TRAFFIC_FLOW = 'TRAFFIC_FLOW';\nconst TRAFFIC_INCIDENTS = 'TRAFFIC_INCIDENTS';\n\nexport const SERVICE_TYPES = {\n    'DEFAULT': DEFAULT_SERVICE_KEY,\n    EXTENDED_SEARCH,\n    MAP,\n    ROUTING,\n    SEARCH,\n    TRAFFIC_FLOW,\n    TRAFFIC_INCIDENTS\n};\n","/**\n * @ignore\n * Consider NaN and Infinite as not a number.\n * @param {*} val\n * @return {Boolean}\n */\nexport function isValidNumber(val) {\n    return typeof val === 'number' && isFinite(val);\n}\n\n/**\n * @ignore\n * @param {*} val\n * @return {Boolean}\n */\nexport function isNonEmptyString(val) {\n    return typeof val === 'string' && val.length > 0;\n}\n\n/**\n * @ignore\n * Used instead of Number.isNaN\n * @param {*} val\n * @return {Boolean}\n */\nfunction numberIsNaN(val) {\n    // only true for NaN\n    return val !== val; // eslint-disable-line no-self-compare\n}\n\n/**\n * @ignore\n * Returns TRUE if the value is not undefined, null, or NaN.\n * @param {*} val\n * @return {Boolean}\n */\nexport function isValidValue(val) {\n    return val !== undefined && val !== null && !numberIsNaN(val);\n}\n\nfunction cloneProperties(object, clonedObject) {\n    for (const property in object) {\n        if (Object.prototype.hasOwnProperty.call(object, property)) {\n            if (Array.isArray(object[property])) {\n                clonedObject[property] = object[property].slice(0);\n            } else if (typeof object[property] === 'object') {\n                clonedObject[property] = {};\n                cloneProperties(object[property], clonedObject[property]);\n            } else {\n                clonedObject[property] = object[property];\n            }\n        }\n    }\n}\n\nfunction getValueOrEmptyObject(value) {\n    return value === undefined ? {} : value;\n}\n\nfunction addNewField(result, field, newFields) {\n    result[field] = getValueOrEmptyObject(result[field]);\n    for (const property in newFields[field]) {\n        if (Object.prototype.hasOwnProperty.call(newFields[field], property)) {\n            result[field][property] = newFields[field][property];\n        }\n    }\n}\n\nexport function extend(obj, src) {\n    for (const key in src) {\n        if (Object.prototype.hasOwnProperty.call(src, key)) {\n            obj[key] = src[key];\n        }\n\n    }\n    return obj;\n}\n\nexport function validateAgainstSetOfValues(value, arrayOfValues, messageIfNotFound) {\n    if (arrayOfValues.indexOf(value) === -1) {\n        throw new TypeError(messageIfNotFound);\n    }\n    return value;\n}\nexport function encodeQuery(query) {\n    return encodeURIComponent(query);\n}\n\n/**\n * @ignore\n * Converts fields list in the following format into an JS Object\n * '{\n *     field1,\n *     field2,\n *     field3 {\n *         field4,\n *         field5\n *     }\n * }'\n * @param {String} str Object-like fields definition.\n * @returns {Object} Fields definition converted into an Object.\n */\nexport function convertFieldStringIntoObject(str) {\n    if (typeof str !== 'string') {\n        return {};\n    }\n    let index = -1;\n    const fieldRegex = new RegExp('[a-zA-Z]');\n    const parserRecursive = function(rootLevel) {\n        let obj = {};\n        let buffer = '';\n        while (++index < str.length) {\n            const char = str.charAt(index);\n            switch (char) {\n            case '}':\n                if (buffer !== '') {\n                    obj[buffer] = true;\n                }\n                return obj;\n            case '{':\n                if (buffer === '') {\n                    if (rootLevel) {\n                        obj = parserRecursive();\n                    } else {\n                        parserRecursive();\n                    }\n                } else {\n                    obj[buffer] = parserRecursive();\n                    buffer = '';\n                }\n                break;\n            case ',':\n                if (buffer !== '') {\n                    obj[buffer] = true;\n                }\n                buffer = '';\n                break;\n            default:\n                if (fieldRegex.test(char)) {\n                    buffer += char;\n                }\n            }\n        }\n        if (buffer !== '') {\n            obj[buffer] = true;\n        }\n        return obj;\n    };\n    return parserRecursive(true);\n}\n\nexport function clone(object) {\n    const clonedObject = {};\n    cloneProperties(object, clonedObject);\n    return clonedObject;\n}\n\nexport const pointRegex = /(-?\\d+(?:\\.\\d+)?)(?:\\s+|\\s*,\\s*)(-?\\d+(?:\\.\\d+)?)/;\n\nexport const circleRegex = /circle\\((-?\\d+(?:\\.\\d+)?)\\s*,\\s*(-?\\d+(?:\\.\\d+)?)\\s*,\\s*(\\d+)\\)/;\n\nexport function addFields(newFields, defaultFields = {}) {\n    const result = { ...defaultFields };\n    for (const field in newFields) {\n        if (Object.prototype.hasOwnProperty.call(newFields, field)) {\n            addNewField(result, field, newFields);\n        }\n    }\n    return result;\n}\n","const mappings = {\n    'af-ZA': {\n        'synonyms': {\n            'af': null,\n            'afr': null,\n            'af-za': null,\n            'af_za': null,\n            'afrikaans': null\n        },\n        'label': 'Afrikaans'\n    },\n    'ar': {\n        'synonyms': {\n            'ar': null,\n            'ara': null,\n            'ar-ar': null,\n            'ar_ar': null,\n            'arabic': null\n        },\n        'label': 'Arabic'\n    },\n    'bg-BG': {\n        'synonyms': {\n            'bg': null,\n            'bul': null,\n            'bg-bg': null,\n            'bg_bg': null,\n            'bulgarian': null\n        },\n        'label': 'Bulgarian'\n    },\n    'ca-ES': {\n        'synonyms': {\n            'ca': null,\n            'cat': null,\n            'ca-fr': null,\n            'ca_fr': null,\n            'ca-es': null,\n            'ca_es': null,\n            'catalan': null\n        },\n        'label': 'Catalan'\n    },\n    'zh-CN': {\n        'synonyms': {\n            'zh-cn': null,\n            'zh_cn': null\n        },\n        'label': 'Chinese (PRC)'\n    },\n    'zh-TW': {\n        'synonyms': {\n            'zh': null,\n            'chi': null,\n            'zh-tw': null,\n            'zh_tw': null,\n            'chinese': null\n        },\n        'label': 'Chinese (Taiwan)'\n    },\n    'cs-CZ': {\n        'synonyms': {\n            'cs': null,\n            'cz': null,\n            'cze': null,\n            'cs-cz': null,\n            'cs_cz': null,\n            'czech': null\n        },\n        'label': 'Czech'\n    },\n    'da-DK': {\n        'synonyms': {\n            'da': null,\n            'dan': null,\n            'da-dk': null,\n            'da_dk': null,\n            'danish': null\n        },\n        'label': 'Danish'\n    },\n    'nl-BE': {\n        'synonyms': {\n            'nl-be': null,\n            'nl_be': null,\n            'dutch belgium': null\n        },\n        'label': 'Dutch (Belgium)'\n    },\n    'nl-NL': {\n        'synonyms': {\n            'nl': null,\n            'dut': null,\n            'nl-nl': null,\n            'nl_nl': null,\n            'dutch': null\n        },\n        'label': 'Dutch'\n    },\n    'en-AU': {\n        'synonyms': {\n            'aue': null,\n            'aus': null,\n            'en-au': null,\n            'en_au': null,\n            'english au': null\n        },\n        'label': 'English (Australia)'\n    },\n    'en-GB': {\n        'synonyms': {\n            'en': null,\n            'eng': null,\n            'en-gb': null,\n            'en_gb': null,\n            'english': null,\n            'default': null\n        },\n        'label': 'English (Great Britain)'\n    },\n    'en-NZ': {\n        'synonyms': {\n            'en-nz': null,\n            'en_nz': null,\n            'english new zealand': null\n        },\n        'label': 'English (New Zealand)'\n    },\n    'en-US': {\n        'synonyms': {\n            'us': null,\n            'ame': null,\n            'en-us': null,\n            'en_us': null,\n            'english us': null\n        },\n        'label': 'English (US)'\n    },\n    'et-EE': {\n        'synonyms': {\n            'et-ee': null,\n            'et_ee': null,\n            'estonian': null\n        },\n        'label': 'Estonian'\n    },\n    'eu-ES': {\n        'synonyms': {\n            'eu-es': null,\n            'eu_es': null,\n            'basque': null\n        },\n        'label': 'Basque (Spain)'\n    },\n    'fi-FI': {\n        'synonyms': {\n            'fi': null,\n            'fin': null,\n            'fi-fi': null,\n            'fi_fi': null,\n            'finnish': null\n        },\n        'label': 'Finnish'\n    },\n    'fr-CA': {\n        'synonyms': {\n            'fr-ca': null,\n            'fr_ca': null,\n            'french canadian': null\n        },\n        'label': 'French (Canadian)'\n    },\n    'fr-FR': {\n        'synonyms': {\n            'fr': null,\n            'fre': null,\n            'fr-fr': null,\n            'fr_fr': null,\n            'french': null\n        },\n        'label': 'French'\n    },\n    'de-DE': {\n        'synonyms': {\n            'de': null,\n            'ger': null,\n            'de-de': null,\n            'de_de': null,\n            'german': null\n        },\n        'label': 'German'\n    },\n    'el-GR': {\n        'synonyms': {\n            'el': null,\n            'gre': null,\n            'el-gr': null,\n            'el_gr': null,\n            'greek': null\n        },\n        'label': 'Greek'\n    },\n    'gl-ES': {\n        'synonyms': {\n            'gl-es': null,\n            'gl_es': null,\n            'galician': null\n        },\n        'label': 'Galician (Spain)'\n    },\n    'he-IL': {\n        'synonyms': {\n            'he-il': null,\n            'he_il': null,\n            'hebrew': null\n        },\n        'label': 'Hebrew (Israel)'\n    },\n    'hr-HR': {\n        'synonyms': {\n            'hr': null,\n            'hr-hr': null,\n            'hr_hr': null,\n            'croatian': null\n        },\n        'label': 'Croatian'\n    },\n    'hu-HU': {\n        'synonyms': {\n            'hu': null,\n            'hun': null,\n            'hu-hu': null,\n            'hu_hu': null,\n            'hungarian': null\n        },\n        'label': 'Hungarian'\n    },\n    'id-ID': {\n        'synonyms': {\n            'id': null,\n            'ind': null,\n            'id-id': null,\n            'id_id': null,\n            'indonesian': null\n        },\n        'label': 'Indonesian'\n    },\n    'it-IT': {\n        'synonyms': {\n            'it': null,\n            'ita': null,\n            'it-it': null,\n            'it_it': null,\n            'italian': null\n        },\n        'label': 'Italian'\n    },\n    'kk-KZ': {\n        'synonyms': {\n            'kk-kz': null,\n            'kk_kz': null,\n            'kazakh': null\n        },\n        'label': 'Kazakh (Kazakhstan)'\n    },\n    'lv-LV': {\n        'synonyms': {\n            'lt': null,\n            'lv-lv': null,\n            'lv_lv': null,\n            'latvian': null\n        },\n        'label': 'Latvian'\n    },\n    'lt-LT': {\n        'synonyms': {\n            'lt': null,\n            'lit': null,\n            'lt-lt': null,\n            'lt_lt': null,\n            'lithuanian': null\n        },\n        'label': 'Lithuanian'\n    },\n    'ms-MY': {\n        'synonyms': {\n            'ms': null,\n            'mal': null,\n            'ms-my': null,\n            'ms_my': null,\n            'malay': null\n        },\n        'label': 'Malay'\n    },\n    'no-NO': {\n        'synonyms': {\n            'no': null,\n            'nb': null,\n            'nor': null,\n            'nb-no': null,\n            'nb_no': null,\n            'no-no': null,\n            'no_no': null,\n            'norwegian': null\n        },\n        'label': 'Norwegian'\n    },\n    'pl-PL': {\n        'synonyms': {\n            'pl': null,\n            'pol': null,\n            'pl-pl': null,\n            'pl_pl': null,\n            'polish': null\n        },\n        'label': 'Polish'\n    },\n    'ro-RO': {\n        'synonyms': {\n            'ro-ro': null,\n            'ro_ro': null,\n            'romanian': null\n        },\n        'label': 'Romanian'\n    },\n    'ru-RU': {\n        'synonyms': {\n            'ru': null,\n            'rus': null,\n            'ru-ru': null,\n            'ru_ru': null,\n            'russian': null\n        },\n        'label': 'Russian'\n    },\n    'sr-RS': {\n        'synonyms': {\n            'sr-rs': null,\n            'sr_rs': null,\n            'serbian': null\n        },\n        'label': 'Serbian'\n    },\n    'sk-SK': {\n        'synonyms': {\n            'sk': null,\n            'slo': null,\n            'sk-sk': null,\n            'sk_sk': null,\n            'slovak': null\n        },\n        'label': 'Slovak'\n    },\n    'sl-SI': {\n        'synonyms': {\n            'sl': null,\n            'slv': null,\n            'sl-si': null,\n            'sl_si': null,\n            'slovenian': null\n        },\n        'label': 'Slovenian'\n    },\n    'es-ES': {\n        'synonyms': {\n            'es': null,\n            'spa': null,\n            'es-es': null,\n            'es_es': null,\n            'spanish': null\n        },\n        'label': 'Spanish'\n    },\n    'es-419': {\n        'synonyms': {\n            'es-419': null,\n            'es_419': null,\n            'latin america spanish': null\n        },\n        'label': 'Latin American Spanish'\n    },\n    'sv-SE': {\n        'synonyms': {\n            'sv': null,\n            'swe': null,\n            'sv-se': null,\n            'sv_se': null,\n            'swedish': null\n        },\n        'label': 'Swedish'\n    },\n    'th-TH': {\n        'synonyms': {\n            'th': null,\n            'tha': null,\n            'th-th': null,\n            'th_th': null,\n            'thai': null\n        },\n        'label': 'Thai'\n    },\n    'tr-TR': {\n        'synonyms': {\n            'tr': null,\n            'tur': null,\n            'tr-tr': null,\n            'tr_tr': null,\n            'turkish': null\n        },\n        'label': 'Turkish'\n    },\n    'uk-UA': {\n        'synonyms': {\n            'uk-ua': null,\n            'uk_ua': null,\n            'ukrainian': null\n        },\n        'label': 'Ukrainian'\n    },\n    'vi-VN': {\n        'synonyms': {\n            'vi-vn': null,\n            'vi_vn': null,\n            'vietnamese': null\n        },\n        'label': 'Vietnamese (Viet Nam)'\n    },\n    'NGT': {\n        'synonyms': {\n            'ngt': null\n        },\n        'label': 'Neutral Ground Truth'\n    },\n    'NGT-Latn': {\n        'synonyms': {\n            'ngt-latn': null\n        },\n        'label': 'Neutral Ground Truth - Latin exonyms'\n    },\n    'en-CA': {\n        'synonyms': {\n            'en-ca': null,\n            'en_ca': null,\n            'english canadian': null\n        },\n        'label': 'English (Canada)'\n    },\n    'ko-KR': {\n        'synonyms': {\n            'ko': null,\n            'kor': null,\n            'ko-kr': null,\n            'ko_kr': null,\n            'korean': null\n        },\n        'label': 'Korean'\n    },\n    'nb-NO': {\n        'synonyms': {\n            'nb': null,\n            'nor': null,\n            'nb-no': null,\n            'nb_no': null,\n            'norwegian': null\n        },\n        'label': 'Norwegian'\n    },\n    'pt-BR': {\n        'synonyms': {\n            'br': null,\n            'pob': null,\n            'pt-br': null,\n            'pt_br': null,\n            'portuguese br': null\n        },\n        'label': 'Portuguese (BR)'\n    },\n    'pt-PT': {\n        'synonyms': {\n            'pt': null,\n            'por': null,\n            'pt-pt': null,\n            'pt_pt': null,\n            'portuguese': null\n        },\n        'label': 'Portuguese'\n    },\n    'ru-Latn-RU': {\n        'synonyms': {\n            'ru-latn-ru': null,\n            'ru_latn_ru': null\n        },\n        'label': 'Russian (Latin)'\n    },\n    'ru-Cyrl-RU': {\n        'synonyms': {\n            'ru-cyrl-ru': null,\n            'ru_cyrl_ru': null\n        },\n        'label': 'Russian (Cyrlic)'\n    },\n    'es-MX': {\n        'synonyms': {\n            'mx': null,\n            'spm': null,\n            'es-mx': null,\n            'es_mx': null,\n            'spanish mx': null\n        },\n        'label': 'Spanish (Mexico)'\n    },\n    'defaultValue': {\n        'value': 'en-GB',\n        'label': 'English (Great Britain)'\n    }\n};\n\nexport const traffic = {\n    'ar': mappings.ar,\n    'ca': mappings['ca-ES'],\n    'cs': mappings['cs-CZ'],\n    'da': mappings['da-DK'],\n    'de': mappings['de-DE'],\n    'el': mappings['el-GR'],\n    'en': {\n        'synonyms': {\n            'en': null,\n            'eng': null,\n            'en-gb': null,\n            'en_gb': null,\n            'english': null,\n            'us': null,\n            'ame': null,\n            'en-us': null,\n            'en_us': null,\n            'english us': null,\n            'default': null\n        },\n        'label': 'English'\n    },\n    'es': {\n        'synonyms': {\n            'es': null,\n            'spa': null,\n            'es-es': null,\n            'es_es': null,\n            'spanish': null,\n            'mx': null,\n            'spm': null,\n            'es-mx': null,\n            'es_mx': null,\n            'spanish mx': null\n        },\n        'label': 'Spanish'\n    },\n    'et': mappings['et-EE'],\n    'fi': mappings['fi-FI'],\n    'fr': mappings['fr-FR'],\n    'he': mappings['he-IL'],\n    'hu': mappings['hu-HU'],\n    'id': mappings['id-ID'],\n    'it': mappings['it-IT'],\n    'lt': mappings['lt-LT'],\n    'lv': mappings['lv-LV'],\n    'nb': mappings['nb-NO'],\n    'nl': mappings['nl-NL'],\n    'no': mappings['no-NO'],\n    'pl': mappings['pl-PL'],\n    'pt': {\n        'synonyms': {\n            'br': null,\n            'por': null,\n            'pt-br': null,\n            'pt_br': null,\n            'portuguese': null,\n            'pt': null,\n            'pob': null,\n            'pt-pt': null,\n            'pt_pt': null,\n            'portuguese br': null\n        },\n        'label': 'Portuguese'\n    },\n    'ro': mappings['ro-RO'],\n    'ru': mappings['ru-RU'],\n    'sk': mappings['sk-SK'],\n    'sv': mappings['sv-SE'],\n    'th': mappings['th-TH'],\n    'tr': mappings['tr-TR'],\n    'zh': mappings['zh-TW'],\n    'defaultValue': {\n        'value': 'en',\n        'label': 'English (Great Britain)'\n    }\n};\n\nexport const routing = {\n    'ar': mappings.ar,\n    'af-ZA': mappings['af-ZA'],\n    'bg-BG': mappings['bg-BG'],\n    'zh-TW': mappings['zh-TW'],\n    'cs-CZ': mappings['cs-CZ'],\n    'da-DK': mappings['da-DK'],\n    'nl-NL': mappings['nl-NL'],\n    'en-GB': mappings['en-GB'],\n    'en-US': mappings['en-US'],\n    'fi-FI': mappings['fi-FI'],\n    'fr-FR': mappings['fr-FR'],\n    'de-DE': mappings['de-DE'],\n    'el-GR': mappings['el-GR'],\n    'hu-HU': mappings['hu-HU'],\n    'id-ID': mappings['id-ID'],\n    'it-IT': mappings['it-IT'],\n    'ko-KR': mappings['ko-KR'],\n    'lt-LT': mappings['lt-LT'],\n    'ms-MY': mappings['ms-MY'],\n    'nb-NO': mappings['nb-NO'],\n    'pl-PL': mappings['pl-PL'],\n    'pt-BR': mappings['pt-BR'],\n    'pt-PT': mappings['pt-PT'],\n    'ru-RU': mappings['ru-RU'],\n    'sk-SK': mappings['sk-SK'],\n    'sl-SI': mappings['sl-SI'],\n    'es-ES': mappings['es-ES'],\n    'es-MX': mappings['es-MX'],\n    'sv-SE': mappings['sv-SE'],\n    'th-TH': mappings['th-TH'],\n    'tr-TR': mappings['tr-TR'],\n    'defaultValue': mappings.defaultValue\n};\n\nexport const search = {\n    'NGT': mappings.NGT,\n    'NGT-Latn': mappings['NGT-Latn'],\n    'af-ZA': mappings['af-ZA'],\n    'ar': mappings.ar,\n    'eu-ES': mappings['eu-ES'],\n    'bg-BG': mappings['bg-BG'],\n    'ca-ES': mappings['ca-ES'],\n    'zh-CN': mappings['zh-CN'],\n    'zh-TW': mappings['zh-TW'],\n    'cs-CZ': mappings['cs-CZ'],\n    'da-DK': mappings['da-DK'],\n    'nl-BE': mappings['nl-BE'],\n    'nl-NL': mappings['nl-NL'],\n    'en-AU': mappings['en-AU'],\n    'en-NZ': mappings['en-NZ'],\n    'en-GB': mappings['en-GB'],\n    'en-US': mappings['en-US'],\n    'et-EE': mappings['et-EE'],\n    'fi-FI': mappings['fi-FI'],\n    'fr-CA': mappings['fr-CA'],\n    'fr-FR': mappings['fr-FR'],\n    'gl-ES': mappings['gl-ES'],\n    'de-DE': mappings['de-DE'],\n    'el-GR': mappings['el-GR'],\n    'hr-HR': mappings['hr-HR'],\n    'he-IL': mappings['he-IL'],\n    'hu-HU': mappings['hu-HU'],\n    'id-ID': mappings['id-ID'],\n    'it-IT': mappings['it-IT'],\n    'kk-KZ': mappings['kk-KZ'],\n    'lv-LV': mappings['lv-LV'],\n    'lt-LT': mappings['lt-LT'],\n    'ms-MY': mappings['ms-MY'],\n    'no-NO': mappings['no-NO'],\n    'nb-NO': mappings['nb-NO'],\n    'pl-PL': mappings['pl-PL'],\n    'pt-BR': mappings['pt-BR'],\n    'pt-PT': mappings['pt-PT'],\n    'ro-RO': mappings['ro-RO'],\n    'ru-RU': mappings['ru-RU'],\n    'ru-Latn-RU': mappings['ru-Latn-RU'],\n    'ru-Cyrl-RU': mappings['ru-Cyrl-RU'],\n    'sr-RS': mappings['sr-RS'],\n    'sk-SK': mappings['sk-SK'],\n    'sl-SI': mappings['sl-SI'],\n    'es-ES': mappings['es-ES'],\n    'es-419': mappings['es-419'],\n    'sv-SE': mappings['sv-SE'],\n    'th-TH': mappings['th-TH'],\n    'tr-TR': mappings['tr-TR'],\n    'uk-UA': mappings['uk-UA'],\n    'vi-VN': mappings['vi-VN'],\n    'defaultValue': mappings.defaultValue\n};\n\nexport const maps = {\n    'NGT': mappings.NGT,\n    'NGT-Latn': mappings['NGT-Latn'],\n    'ar': mappings.ar,\n    'bg-BG': mappings['bg-BG'],\n    'zh-TW': mappings['zh-TW'],\n    'cs-CZ': mappings['cs-CZ'],\n    'da-DK': mappings['da-DK'],\n    'nl-NL': mappings['nl-NL'],\n    'en-AU': mappings['en-AU'],\n    'en-CA': mappings['en-CA'],\n    'en-GB': mappings['en-GB'],\n    'en-NZ': mappings['en-NZ'],\n    'en-US': mappings['en-US'],\n    'fi-FI': mappings['fi-FI'],\n    'fr-FR': mappings['fr-FR'],\n    'de-DE': mappings['de-DE'],\n    'el-GR': mappings['el-GR'],\n    'hu-HU': mappings['hu-HU'],\n    'id-ID': mappings['id-ID'],\n    'it-IT': mappings['it-IT'],\n    'ko-KR': mappings['ko-KR'],\n    'lt-LT': mappings['lt-LT'],\n    'ms-MY': mappings['ms-MY'],\n    'nb-NO': mappings['nb-NO'],\n    'pl-PL': mappings['pl-PL'],\n    'pt-BR': mappings['pt-BR'],\n    'pt-PT': mappings['pt-PT'],\n    'ru-RU': mappings['ru-RU'],\n    'ru-Latn-RU': mappings['ru-Latn-RU'],\n    'ru-Cyrl-RU': mappings['ru-Cyrl-RU'],\n    'sk-SK': mappings['sk-SK'],\n    'sl-SI': mappings['sl-SI'],\n    'es-ES': mappings['es-ES'],\n    'es-MX': mappings['es-MX'],\n    'sv-SE': mappings['sv-SE'],\n    'th-TH': mappings['th-TH'],\n    'tr-TR': mappings['tr-TR'],\n    'defaultValue': mappings.defaultValue\n};\n\nexport const incidentV5 = {\n    'ar': mappings.ar,\n    'ca-ES': mappings['ca-ES'],\n    'cs-CZ': mappings['cs-CZ'],\n    'da-DK': mappings['da-DK'],\n    'de-DE': mappings['de-DE'],\n    'el-GR': mappings['el-GR'],\n    'en-GB': mappings['en-GB'],\n    'en-US': mappings['en-US'],\n    'es-ES': mappings['es-ES'],\n    'et-EE': mappings['et-EE'],\n    'fi-FI': mappings['fi-FI'],\n    'fr-FR': mappings['fr-FR'],\n    'he-IL': mappings['he-IL'],\n    'hu-HU': mappings['hu-HU'],\n    'id-ID': mappings['id-ID'],\n    'it-IT': mappings['it-IT'],\n    'lt-LT': mappings['lt-LT'],\n    'lv-LV': mappings['lv-LV'],\n    'nb-NO': mappings['nb-NO'],\n    'nl-NL': mappings['nl-NL'],\n    'pl-PL': mappings['pl-PL'],\n    'pt-PT': mappings['pt-PT'],\n    'ro-RO': mappings['ro-RO'],\n    'ru-RU': mappings['ru-RU'],\n    'sk-SK': mappings['sk-SK'],\n    'sv-SE': mappings['sv-SE'],\n    'th-TH': mappings['th-TH'],\n    'tr-TR': mappings['tr-TR'],\n    'zh-TW': mappings['zh-TW'],\n    'defaultValue': mappings.defaultValue\n};\n\nexport const defaultLanguage = 'en-GB';\n","import isFunction from 'lodash/isFunction';\nimport isString from 'lodash/isString';\n\nexport function keyValidator(value) {\n    if (!isString(value) && !isFunction(value)) {\n        throw new TypeError('Unsupported key type', value);\n    }\n    return value;\n}\n","/**\n * @ignore\n * Checks whether the given parameter is a float number.\n * @param {*} value The value\n * @return {Number} value\n * @throws {TypeError} for an invalid parameter.\n */\nexport function numberValidator(value) {\n    const numValue = parseFloat(value);\n    if (!isFinite(numValue)) {\n        throw new TypeError('a number is expected, but ' + value + ' [' + typeof value + '] given');\n    }\n    return numValue;\n}\n","import {validateAgainstSetOfValues} from '../utils';\n\nexport function oneOfValueValidator(values, paramName) {\n    return (value) => {\n        const message = 'Supported ' + paramName + ' is expected (one of: ' + values + '), but ' + value +\n            ' [' + typeof value + '] was given.';\n        return validateAgainstSetOfValues(value, values, message);\n    };\n}\n","import {pointRegex, circleRegex, validateAgainstSetOfValues, convertFieldStringIntoObject} from './utils';\nimport isFunction from 'lodash/isFunction';\nimport isString from 'lodash/isString';\nimport isNil from 'lodash/isNil';\nimport isInteger from 'lodash/isInteger';\nimport {\n    routing as routingLanguageMap,\n    search as searchLanguageMap\n} from '../config/language/mappings';\n\n// Search supported language codes\n// Up-to-date list available on:\n// https://developer.tomtom.com/search-api/search-api-documentation/supported-languages\n\n// Up-to-date list available on:\n// eslint-disable-next-line\n// https://developer.tomtom.com/search-api-and-extended-search-api/search-api-and-extended-search-api-documentation/supported-connector-types\nconst connectorNames = [\n    'StandardHouseholdCountrySpecific',\n    'IEC62196Type2CableAttached',\n    'IEC60309AC1PhaseBlue',\n    'IEC60309AC3PhaseRed',\n    'IEC62196Type2Outlet',\n    'IEC62196Type1CCS',\n    'IEC62196Type2CCS',\n    'IEC60309DCWhite',\n    'IEC62196Type1',\n    'IEC62196Type3',\n    'GBT20234Part2',\n    'GBT20234Part3',\n    'Chademo',\n    'Tesla'\n];\n\n// Up-to-date list available on:\n// https://developer.tomtom.com/routing-api/routing-api-documentation/long-distance-ev-routing\nconst plugTypes = [\n    'Small_Paddle_Inductive',\n    'Large_Paddle_Inductive',\n    'IEC_60309_1_Phase',\n    'IEC_60309_3_Phase',\n    'IEC_62196_Type_1_Outlet',\n    'IEC_62196_Type_2_Outlet',\n    'IEC_62196_Type_3_Outlet',\n    'IEC_62196_Type_1_Connector_Cable_Attached',\n    'IEC_62196_Type_2_Connector_Cable_Attached',\n    'IEC_62196_Type_3_Connector_Cable_Attached',\n    'Combo_to_IEC_62196_Type_1_Base',\n    'Combo_to_IEC_62196_Type_2_Base',\n    'Type_E_French_Standard_CEE_7_5',\n    'Type_F_Schuko_CEE_7_4',\n    'Type_G_British_Standard_BS_1363',\n    'Type_J_Swiss_Standard_SEV_1011',\n    'China_GB_Part_2',\n    'China_GB_Part_3',\n    'IEC_309_DC_Plug',\n    'AVCON_Connector',\n    'Tesla_Connector',\n    'NEMA_5_20',\n    'CHAdeMO',\n    'SAE_J1772',\n    'TEPCO',\n    'Better_Place_Socket',\n    'Marechal_Socket',\n    'Standard_Household_Country_Specific'\n];\n\n// Up-to-date list available on:\n// https://developer.tomtom.com/routing-api/routing-api-documentation/long-distance-ev-routing\nconst facilityTypes = [\n    'Battery_Exchange',\n    'Charge_100_to_120V_1_Phase_at_8A',\n    'Charge_100_to_120V_1_Phase_at_10A',\n    'Charge_100_to_120V_1_Phase_at_12A',\n    'Charge_100_to_120V_1_Phase_at_13A',\n    'Charge_100_to_120V_1_Phase_at_16A',\n    'Charge_100_to_120V_1_Phase_at_32A',\n    'Charge_200_to_240V_1_Phase_at_8A',\n    'Charge_200_to_240V_1_Phase_at_10A',\n    'Charge_200_to_240V_1_Phase_at_12A',\n    'Charge_200_to_240V_1_Phase_at_16A',\n    'Charge_200_to_240V_1_Phase_at_20A',\n    'Charge_200_to_240V_1_Phase_at_32A',\n    'Charge_200_to_240V_1_Phase_above_32A',\n    'Charge_200_to_240V_3_Phase_at_16A',\n    'Charge_200_to_240V_3_Phase_at_32A',\n    'Charge_380_to_480V_3_Phase_at_16A',\n    'Charge_380_to_480V_3_Phase_at_32A',\n    'Charge_380_to_480V_3_Phase_at_63A',\n    'Charge_50_to_500V_Direct_Current_at_62A_25kW',\n    'Charge_50_to_500V_Direct_Current_at_125A_50kW',\n    'Charge_200_to_450V_Direct_Current_at_200A_90kW',\n    'Charge_200_to_480V_Direct_Current_at_255A_120kW',\n    'Charge_Direct_Current_at_20kW',\n    'Charge_Direct_Current_at_50kW',\n    'Charge_Direct_Current_above_50kW'\n];\n\nconst mapsLangCodes = [\n    'NGT', 'NGT-Latn', 'ar', 'bg-BG', 'zh-TW', 'cs-CZ', 'da-DK', 'nl-NL', 'en-AU', 'en-CA', 'en-GB', 'en-NZ',\n    'en-US', 'fi-FI', 'fr-FR', 'de-DE', 'el-GR', 'hu-HU', 'id-ID', 'it-IT', 'ko-KR', 'lt-LT', 'ms-MY', 'nb-NO',\n    'pl-PL', 'pt-BR', 'pt-PT', 'ru-RU', 'ru-Latn-RU', 'ru-Cyrl-RU', 'sk-SK', 'sl-SI', 'es-ES', 'es-MX', 'sv-SE',\n    'th-TH', 'tr-TR'\n];\n\n// Up-to-date list available on:\n// https://developer.tomtom.com/search-api/search-api-documentation-search/fuzzy-search [fuelSet] section\nconst fuelTypes = [\n    'Petrol', 'LPG', 'Diesel', 'Biodiesel', 'DieselForCommercialVehicles',\n    'E85', 'LNG', 'CNG', 'Hydrogen', 'AdBlue'\n];\n\nconst incidentDetailsAvailableFields = `\n    {\n        incidents {\n            type,\n            geometry {\n                type,\n                coordinates\n            },\n            properties {\n                id,\n                iconCategory,\n                magnitudeOfDelay,\n                events {\n                    description,\n                    code,\n                    iconCategory\n                },\n                startTime,\n                endTime,\n                from,\n                to,\n                length,\n                delay,\n                roadNumbers,\n                aci {\n                    probabilityOfOccurrence,\n                    numberOfReports,\n                    lastReportTime\n                }\n            }\n        }\n    }`;\n\nfunction isDateRfc3339(dateString) {\n    return dateString.toString()\n        .match(/(\\d\\d\\d\\d)(-)?(\\d\\d)(-)?(\\d\\d)(T)?(\\d\\d)(:)?(\\d\\d)(:)?(\\d\\d)(\\.\\d+)?(Z|([+-])(\\d\\d)(:)?(\\d\\d))/);\n}\n\nfunction hasBoundingBoxFields(bbox) {\n    return Object.prototype.hasOwnProperty.call(bbox, 'minLon') &&\n        Object.prototype.hasOwnProperty.call(bbox, 'maxLon') &&\n        Object.prototype.hasOwnProperty.call(bbox, 'minLat') &&\n        Object.prototype.hasOwnProperty.call(bbox, 'maxLat');\n}\n\nfunction checkBBoxNormalized(bbox) {\n    return parseFloat(bbox.maxLat) <= parseFloat(bbox.minLat) || parseFloat(bbox.maxLon) <= parseFloat(bbox.minLon);\n}\n\nfunction hasChargingCurveSupportPointFields(value) {\n    return Object.prototype.hasOwnProperty.call(value, 'chargeInkWh') &&\n        Object.prototype.hasOwnProperty.call(value, 'timeToChargeInSeconds');\n}\n\nfunction hasChargingConnectionFields(value) {\n    return Object.prototype.hasOwnProperty.call(value, 'facilityType') &&\n        Object.prototype.hasOwnProperty.call(value, 'plugType');\n}\n\nfunction hasChargingModeFields(value) {\n    return Object.prototype.hasOwnProperty.call(value, 'chargingConnections') &&\n        Object.prototype.hasOwnProperty.call(value, 'chargingCurve');\n}\n\nfunction isNumberInInterval(numValue, min, max) {\n    return isFinite(numValue) && numValue >= min && numValue <= max;\n}\n\nfunction checkArray(array) {\n    return array.constructor.toString().indexOf('Array') < 0;\n}\nfunction throwTypeErrorWhen(condition, message) {\n    if (condition) {\n        throw new TypeError(message);\n    }\n}\n\nfunction isPointValid(point) {\n    if (!isString(point) || !pointRegex.test(point)) {\n        throw new TypeError('A point is expected, but ' + point + ' [' + typeof point + '] given');\n    }\n    return true;\n}\n\nfunction checkLongitude(value) {\n    const numValue = parseFloat(value);\n    if (!isNumberInInterval(numValue, -180, 180)) {\n        throw new TypeError('an longitude <-180,180> is expected, but ' +\n            value + ' [' + typeof value + '] given');\n    }\n    return numValue;\n}\n\nfunction checkChargingMode(chargingMode) {\n    throwTypeErrorWhen(!hasChargingModeFields(chargingMode),\n        'a chargingMode is expected, but ' + chargingMode +\n        ' [' + typeof chargingMode + '] given');\n\n    checkChargingCurve(chargingMode.chargingCurve);\n    checkChargingConnections(chargingMode.chargingConnections);\n\n    return chargingMode;\n}\n\nfunction checkChargingCurve(chargingCurve) {\n    if (chargingCurve.length > 10) {\n        throw new Error('Given chargingCurve array contains more than 10 elements.');\n    }\n\n    chargingCurve.forEach((element) => {\n        checkChargingCurveSupportPoint(element);\n    });\n\n    return chargingCurve;\n}\n\nfunction checkChargingCurveSupportPoint(chargingCurveSupportPoint) {\n    throwTypeErrorWhen(!hasChargingCurveSupportPointFields(chargingCurveSupportPoint),\n        'a chargingCurveSupportPoint is expected, but ' + chargingCurveSupportPoint +\n        ' [' + typeof chargingCurveSupportPoint + '] given');\n\n    throwTypeErrorWhen(!isNumberInInterval(chargingCurveSupportPoint.chargeInkWh, 0, Number.MAX_VALUE),\n        'a chargeInkWh is expected, but ' + chargingCurveSupportPoint.chargeInkWh +\n        ' [' + typeof chargingCurveSupportPoint.chargeInkWh + '] given');\n\n    throwTypeErrorWhen(!isNumberInInterval(chargingCurveSupportPoint.timeToChargeInSeconds, 0, Number.MAX_VALUE),\n        'a timeToChargeInSeconds is expected, but ' + chargingCurveSupportPoint.timeToChargeInSeconds +\n        ' [' + typeof chargingCurveSupportPoint.timeToChargeInSeconds + '] given');\n\n    return chargingCurveSupportPoint;\n}\n\nfunction checkChargingConnection(chargingConnection) {\n    throwTypeErrorWhen(!hasChargingConnectionFields(chargingConnection),\n        'a chargingConnection is expected, but ' + chargingConnection +\n        ' [' + typeof chargingConnection + '] given');\n\n    checkPlugType(chargingConnection.plugType);\n    checkFacilityType(chargingConnection.facilityType);\n\n    return chargingConnection;\n}\n\nfunction checkPlugType(plugType) {\n    const message = 'Plug type is expected to be one of supported values, but ' +\n        plugType + ' [' + typeof plugType + '] given';\n    return validateAgainstSetOfValues(plugType, plugTypes, message);\n}\n\nfunction checkFacilityType(facilityType) {\n    const message = 'Facility type is expected to be one of supported values, but ' +\n    facilityType + ' [' + typeof facilityType + '] given';\n    return validateAgainstSetOfValues(facilityType, facilityTypes, message);\n}\n\nfunction checkChargingConnections(chargingConnections) {\n    if (chargingConnections.length > 20) {\n        throw new Error('Given chargingConnections array contains more than 20 elements.');\n    }\n\n    chargingConnections.forEach((element) => {\n        checkChargingConnection(element);\n    });\n\n    return chargingConnections;\n}\n\nfunction checkLatitude(value) {\n    const numValue = parseFloat(value);\n    if (!isNumberInInterval(numValue, -90, 90)) {\n        throw new TypeError('an latitude <-90,90> is expected, but ' + value + ' [' + typeof value + '] given');\n    }\n    return numValue;\n}\n\nfunction checkPointObjectOrArray(point) {\n    let lat, lon;\n    if (Array.isArray(point)) {\n        if (!(point.length === 2 && point.filter(isFinite).length === 2)) {\n            throw new TypeError('Invalid point array in route points');\n        }\n        lat = point[1];\n        lon = point[0];\n    } else {\n        if (!(isFinite(point.lat) && (isFinite(point.lon) || isFinite(point.lng)))) {\n            throw new TypeError('Invalid point object in route points');\n        }\n        lat = point.lat;\n        lon = typeof point.lon !== 'undefined' ? point.lon : point.lng;\n    }\n\n    if (!(typeof lat === 'number' || lat instanceof Number) ||\n        !(typeof lon === 'number' || lon instanceof Number)) {\n        throw new TypeError('Lat and lon components of point should be finite numbers');\n    }\n\n    checkLongitude(lon);\n    checkLatitude(lat);\n}\n\nfunction validateField(options, value) {\n    for (const key in options) {\n        if (Object.prototype.hasOwnProperty.call(options, key)) {\n            if (Object.prototype.hasOwnProperty.call(value, key) && Array.isArray(options[key].validators)) {\n                for (const validator of options[key].validators) {\n                    if (isFunction(validator)) {\n                        value[key] = validator(value[key]);\n                    }\n                }\n            }\n\n            if (options[key].required === true && !Object.prototype.hasOwnProperty.call(value, key)) {\n                throw new Error('Missing required ' + key);\n            }\n        }\n    }\n}\n\nfunction validateNumberInInterval(min, max, errorMsg, integerRequired) {\n    if (isNil(min) || isNil(max)) {\n        throw new TypeError('Number in interval validator requires min and max value parameters');\n    }\n\n    return function(value) {\n        const numValue = parseFloat(value);\n\n        if (!isNumberInInterval(numValue, min, max) || (integerRequired && !isInteger(numValue))) {\n            throw new TypeError(errorMsg + ', but ' + value + ' [' + typeof value + '] given');\n        }\n\n        return numValue;\n    };\n}\n\nfunction validateIntInInterval(min, max, errorMsg) {\n    return validateNumberInInterval(min, max, errorMsg, true);\n}\n\nfunction validateAllowedTypes(value, message, allowedTypes) {\n    if (isString(value)) {\n        value = value.split(',');\n    }\n\n    if (Array.isArray(value) && value.length > 0) {\n        for (let i = 0; i < value.length; i += 1) {\n            validateAgainstSetOfValues(value[i], allowedTypes, message);\n        }\n\n        return value.join(',');\n    } else {\n        throw new TypeError(message);\n    }\n}\n\nfunction checkDateRfc3339(value, paramName) {\n    if (!isDateRfc3339(value)) {\n        throw new TypeError(`Invalid \"${paramName}\" parameter value.\n        Valid format: YYYY-MM-DDThh:mm:ss.SSSTZD`);\n    }\n\n    return value;\n}\n\nexport function trackingId(value) {\n    if (isString(value) && /^[a-zA-Z0-9-]{1,100}$/.test(value)) {\n        return value;\n    } else {\n        throw new TypeError('a string matching regular expression ^[a-zA-Z0-9-]{1,100}$ is expected, but ' +\n            value + ' [' + typeof value + '] given');\n    }\n}\n\n/**\n * @ignore\n * Casts to boolean.\n * @param {*} value\n * @return {Boolean} A casted value.\n */\nexport function bool(value) {\n    return value === 'false' ? false : Boolean(value);\n}\n\n/**\n * @ignore\n * Checks whether the given parameter is an integer greater than or equal to 0.\n * @param {*} value The value\n * @return {Number} value\n * @throws {TypeError} for an invalid parameter.\n */\nexport function naturalInteger(value) {\n    const numValue = parseFloat(value);\n    if (!isInteger(numValue) || numValue < 0) {\n        throw new TypeError('a natural integer (greater than or equal 0) is expected, but ' +\n            value + ' [' + typeof value + '] given');\n    }\n    return numValue;\n}\n\n/**\n * @ignore\n * Checks whether the given parameter is an integer greater than 0.\n * @param {*} value The value\n * @return {Number} value\n * @throws {TypeError} for an invalid parameter.\n */\nexport function positiveInteger(value) {\n    const numValue = parseFloat(value);\n    if (!isInteger(numValue) || numValue <= 0) {\n        throw new TypeError('a positive integer (greater than 0) is expected, but ' +\n            value + ' [' + typeof value + '] given');\n    }\n    return numValue;\n}\n\nexport function integer(value) {\n    const numValue = parseFloat(value);\n    if (!isInteger(numValue)) {\n        throw new TypeError('an integer is expected, but ' + value + ' [' + typeof value + '] given');\n    }\n    return numValue;\n}\n\n/**\n * @ignore\n * Checks whether the given parameter is a longitude and casts to a proper interval <-180, 180>.\n * @param {*} value\n * @return {Number} value\n * @throws {TypeError} for an invalid parameter.\n */\nexport function longitude(value) {\n    return checkLongitude(value);\n}\n\n/**\n * @ignore\n * Checks whether the given parameter is a latitude and casts to a proper interval <-90, 90>\n * @param {*} value\n * @return {Number} value\n * @throws {TypeError} for an invalid parameter.\n */\nexport function latitude(value) {\n    return checkLatitude(value);\n}\n\n/**\n * @ignore\n * Checks whether the given parameter is a valid bounding box. Contains the whole world and a half on each\n * side.\n * @param {*} bbox The bounding box\n * @return {Object} bbox\n * @throws {TypeError} for an invalid parameter.\n */\nexport function validateBoundingBox(bbox) {\n    throwTypeErrorWhen(!hasBoundingBoxFields(bbox),\n        'a bounding box is expected, but ' + bbox + ' [' + typeof bbox + '] given');\n\n    throwTypeErrorWhen(!isNumberInInterval(bbox.minLat, -90, 90),\n        'a bounding box minimal latitude is expected ' + bbox.minLat + ' [' + typeof bbox.minLat + '] given');\n\n    throwTypeErrorWhen(!isNumberInInterval(bbox.maxLat, -90, 90),\n        'a bounding box maximal latitude is expected ' + bbox.maxLat + ' [' + typeof bbox.maxLat + '] given');\n\n    throwTypeErrorWhen(!isNumberInInterval(bbox.minLon, -270, 180),\n        'a bounding box minimal longitude is expected ' + bbox.minLon + ' [' + typeof bbox.minLon + '] given');\n\n    throwTypeErrorWhen(!isNumberInInterval(bbox.maxLon, -180, 270),\n        'a bounding box maximal longitude is expected ' + bbox.maxLon + ' [' + typeof bbox.maxLon + '] given');\n\n    throwTypeErrorWhen(checkBBoxNormalized(bbox), 'a bounding box expected but max <= min');\n\n    return bbox;\n}\n\n/**\n * @ignore\n * Checks whether the given parameter is a float number in a proper interval <min, max>.\n * @example\n * var numberBetweenMinusFiveAndFive = validators.numberInInterval(-5,5);\n * numberBetweenMinusFiveAndFive(-10); // false\n * numberBetweenMinusFiveAndFive(3); //true\n *\n * @param {Number} [min] The minimal value.\n * @param {Number} [max] The maximal value.\n * @return {Function} validator function that checks the type and value range.\n * @throws {TypeError} when missing a min or max value.\n */\nexport function numberInInterval(min, max) {\n    return validateNumberInInterval(min, max, 'a number in interval <' + min + ', ' + max + '> is expected');\n}\n\n/**\n * @ignore\n * Checks whether the given parameter is an integer number in a proper interval <min, max>.\n * @example\n * var numberBetweenMinusFiveAndFive = validators.numberInInterval(-5,5);\n * numberBetweenMinusFiveAndFive(-10); // false\n * numberBetweenMinusFiveAndFive(3); //true\n *\n * @param {Number} [min] The minimal value.\n * @param {Number} [max] The maximal value.\n * @return {Function} validator function that checks the type and value range.\n * @throws {TypeError} when missing a min or max value.\n */\nexport function integerInInterval(min, max) {\n    return validateIntInInterval(min, max, 'an integer in interval <' + min + ', ' + max + '> is expected');\n}\n\n/**\n * @ignore\n * Checks whether the given parameter is a string.\n * @param {String} string\n * @return {String} value\n * @throws {TypeError} for non strings.\n */\nexport function string(string) {\n    if (!isString(string)) {\n        throw new TypeError('a string is expected, but ' + string + ' [' + typeof string + '] given');\n    }\n    return string;\n}\n\n/**\n * @ignore\n * Checks whether the given parameter geometries zoom has the value <0, 22>.\n * @param {Number} geometriesZoom\n * @return {Number} value\n * @throws {TypeError} for a non invalid parameter.\n */\nexport function geometriesZoom(geometriesZoom) {\n    return validateNumberInInterval(0, 22, 'a geometries zoom value <0, 22> is expected')(geometriesZoom);\n}\n\n/**\n * @ignore\n * Checks whether the given parameter is a zoom level of <0, 22>\n * @param {Number} zoomLevel\n * @return {Number} value\n * @throws {TypeError} for a non invalid parameter.\n */\nexport function zoomLevel(zoomLevel) {\n    return validateIntInInterval(0, 22, 'zoom level <0, 22> is expected')(zoomLevel);\n}\n\n/**\n * @ignore\n * Checks whether the given parameter is a function.\n * @param {Function} fun\n * @return {Function} fun\n * @throws {TypeError} for a non-function.\n */\nexport function functionType(fun) {\n    if (typeof fun !== 'function') {\n        throw new TypeError('a function is expected, but ' + fun + '  [' + typeof fun + '] given');\n    }\n    return fun;\n}\n\n/**\n * @ignore\n * Checks whether the given country name uses the ISO 3166 alpha-3 or alpha-2 format.\n * @param {String} name\n * @return {String} name\n * @throws {TypeError} if the country name is not valid.\n */\nexport function countryCode(name) {\n    if (!(isString(name) && (name.length === 3 || name.length === 2))) {\n        throw new TypeError('a 2 or 3-characters long country name is expected, but ' + name +\n            ' [' + typeof name + '] given');\n    }\n    return name;\n}\n\n/**\n * @ignore\n * Checks whether the given language code belongs to a predefined set of supported language codes\n * which is a subset of the IETF language tags.\n * @param {String|undefined} langCode\n * @return {String}\n */\nexport function languageCode(langCode) {\n    const searchLanguageCodes = Object.keys(searchLanguageMap);\n    if (!isString(langCode) || searchLanguageCodes.indexOf(langCode) < 0) {\n        throw new TypeError('One of pre-defined language codes was expected: ' + searchLanguageCodes +\n            ', but ' + langCode + ' [' + typeof langCode + '] given');\n    }\n    return langCode;\n}\n\n/**\n * @ignore\n * Checks whether the given country name's list uses the ISO 3166 alpha-3 or alpha-2 format.\n * @param {String|Array} value\n * @return {String} list\n * @throws {TypeError} if one of the country names is not valid.\n */\nexport function countrySet(value) {\n    throwTypeErrorWhen(!isString(value) && checkArray(value),\n        'An array of string country names or string (divided with commas) of country ' +\n        'names (two or three-characters long) is expected, but ' + value + ' [' + typeof value + '] given');\n\n    const stringValue = isString(value) ? value : value.join();\n    throwTypeErrorWhen(!stringValue.match(/^([a-zA-z]{2,3},)*[a-zA-z]{2,3}$/),\n        'An array of string country names or string (divided with commas) of country ' +\n        'names (two or three-characters long) is expected, but ' + value + ' [' + typeof value + '] given');\n\n    return stringValue;\n}\n\n/**\n * @ignore\n * Checks whether the given EV connector names list belongs to a predefined set of supported names\n * @param {String} value\n * @return {String} list\n * @throws {TypeError} if one of the EV connectors names is not valid.\n */\nexport function connectorSet(value) {\n    const message = 'List of pre-defined EV connector names was expected,' +\n    'but ' + value + ' [' + typeof value + '] given';\n\n    return validateAllowedTypes(value, message, connectorNames);\n}\n\n/**\n * @ignore\n * Checks whether the given fuel types names list belongs to a predefined set of supported names\n * @param {String} value\n * @return {String} list\n * @throws {TypeError} if one of the fuel type names is not valid.\n */\nexport function fuelSet(value) {\n    const message = 'List of pre-defined Fuel types names was expected,' +\n    'but ' + value + ' [' + typeof value + '] given';\n\n    return validateAllowedTypes(value, message, fuelTypes);\n}\n\n/**\n * @ignore\n * Checks whether the given mapcode types list belongs to a predefined set of supported names\n * @param {String} value\n * @return {String} list\n * @throws {TypeError} if one of the mapcode types names is not valid.\n */\nexport function mapcodes(value) {\n    const mapcodesValues = [\n        'Local',\n        'International',\n        'Alternative'\n    ];\n\n    const message = 'List of pre-defined mapcode types names was expected,' +\n    'but ' + value + ' [' + typeof value + '] given';\n\n    if (isString(value)) {\n        value = value.split(',');\n    }\n\n    if (Array.isArray(value) && value.length > 0) {\n        for (let i = 0; i < value.length; i += 1) {\n            validateAgainstSetOfValues(value[i], mapcodesValues, message);\n        }\n\n        return value.join(',');\n\n    } else {\n        throw new TypeError(message);\n    }\n\n}\n\n/**\n * @ignore\n * Checks whether the given EV charging plug type belongs to a predefined set of supported types\n * @param {String} value\n * @return {String} plugType\n * @throws {TypeError} if the given plug type is not valid.\n */\nexport function plugType(value) {\n    return checkPlugType(value);\n}\n\n/**\n * @ignore\n * Checks whether the given EV charging facility type belongs to a predefined set of supported types\n * @param {String} value\n * @return {String} facilityType\n * @throws {TypeError} if the given facility type is not valid.\n */\nexport function facilityType(value) {\n    return checkFacilityType(value);\n}\n\n/**\n * @ignore\n * Checks whether the given chargingCurveSupportPoint object has right properties\n * @param {Object} chargingCurveSupportPoint\n * @return {Object} chargingCurveSupportPoint\n * @throws {TypeError} if the given chargingCurveSupportPoint is not valid.\n */\nexport function chargingCurveSupportPoint(chargingCurveSupportPoint) {\n    return checkChargingCurveSupportPoint(chargingCurveSupportPoint);\n}\n\n/**\n * @ignore\n * Checks whether the given chargingCurve array has proper elements\n * @param {Array} chargingCurve\n * @return {Array} chargingCurve\n * @throws {TypeError} if the given chargingCurve array is not valid.\n */\nexport function chargingCurve(chargingCurve) {\n    return checkChargingCurve(chargingCurve);\n}\n\n/**\n * @ignore\n * Checks whether the given chargingConnection has right properties\n * @param {Object} chargingConnection\n * @return {Object} chargingConnection\n * @throws {TypeError} if the given chargingConnection is not valid.\n */\nexport function chargingConnection(chargingConnection) {\n    return checkChargingConnection(chargingConnection);\n}\n\n/**\n * @ignore\n * Checks whether the given chargingConnections array has proper elements\n * @param {Array} chargingConnections\n * @return {Array} chargingConnections\n * @throws {TypeError} if the given chargingConnections array is not valid.\n */\nexport function chargingConnections(chargingConnections) {\n    return checkChargingConnections(chargingConnections);\n}\n\n/**\n * @ignore\n * Checks whether the given chargingMode has right properties\n * @param {Object} chargingMode\n * @return {Object} chargingMode\n * @throws {TypeError} if the given chargingMode is not valid.\n */\nexport function chargingMode(chargingMode) {\n    return checkChargingMode(chargingMode);\n}\n\n/**\n * @ignore\n * Checks whether the given chargingModes array has right elements\n * @param {Array} chargingModes\n * @return {Array} chargingModes\n * @throws {TypeError} if the given chargingModes array is not valid.\n */\nexport function chargingModes(chargingModes) {\n    if (chargingModes.length > 10) {\n        throw new Error('Given chargingModes array contains more than 10 elements.');\n    }\n\n    chargingModes.forEach((element) => {\n        checkChargingMode(element);\n    });\n\n    return chargingModes;\n}\n\n/**\n * @ignore\n * Checks whether the given country name's list uses the ISO 3166 alpha-3 or alpha-2 format.\n * @param {Boolean} allowEmpty Specifies that it allows an empty array as a valid value.\n * @param {String|Array} value\n * @return {String} list\n * @throws {TypeError} if one of the country names is not valid.\n */\nexport function countrySetAlpha3(allowEmpty, value) {\n    throwTypeErrorWhen(!isString(value) && checkArray(value),\n        'An array of string country names or string (divided with commas) of country ' +\n        'names (three-characters long) is expected, but ' + value + ' [' + typeof value + '] given');\n\n    const stringValue = isString(value) ? value : value.join();\n    if (allowEmpty && stringValue === '') {\n        return value;\n    }\n    throwTypeErrorWhen(!stringValue.match(/^([a-zA-z]{3},)*[a-zA-z]{3}$/),\n        'An array of string country names or string (divided with commas) of country ' +\n        'names (three-characters long) is expected, but ' + value + ' [' + typeof value + '] given');\n\n    return value;\n}\n\n/**\n * @ignore\n * Checks whether the given point is in the proper format.\n * @param {String} value\n * @return {String} value\n * @throws {TypeError} if the given value is in an invalid format.\n */\nexport function point(value) {\n    isPointValid(value);\n    return value;\n}\n\n/**\n * @ignore\n * Checks whether the given parameter is a positive integer (greater than 0) and lower than 5.\n * @param {Number} value The value\n * @return {Number} value\n * @throws {TypeError} for an invalid parameter.\n */\nexport function fuzzinessLevel(value) {\n    return validateIntInInterval(1, 4, 'Fuzziness level value (a positive integer lower than 5) is expected')(value);\n}\n\n/**\n * @ignore\n * Checks whether the given parameter is a positive integer (greater than 0) and lower than 100.\n * @param {Number} value The value\n * @return {Number} value\n * @throws {TypeError} for an invalid parameter.\n */\nexport function limit(value) {\n    return validateIntInInterval(1, 100, 'Limit value (a positive integer lower than 100) is expected')(value);\n}\n\n/**\n * @ignore\n * Checks whether the given parameter is an offset - positive integer <0, 1900>.\n * @param {Number} value The value\n * @return {Number} value\n * @throws {TypeError} for an invalid parameter.\n */\nexport function offset(value) {\n    return validateIntInInterval(0, 1900, 'Offset an integer value <0, 1900> is expected')(value);\n}\n\n/**\n * @ignore\n * Checks whether the given parameter is a plain object (array and functions are not accepted).\n * @param {Object} object\n * @return {Object} object\n * @throws {TypeError} for a non-object.\n */\nexport function plainObject(object) {\n    if (typeof object !== 'object' || object.constructor !== Object) {\n        throw new TypeError('an object is expected, but ' + object + '  [' + typeof object + '] given');\n    }\n    return object;\n}\n\n/**\n * @ignore\n * Checks whether the given parameter is an array (objects and functions are not accepted).\n * @param {Array} array\n * @return {Array} array\n * @throws {TypeError} for a non-array.\n */\nexport function arrayType(array) {\n    if (checkArray(array)) {\n        throw new TypeError('an array is expected, but ' + array + '  [' + typeof array + '] given');\n    }\n    return array;\n}\n\nexport function arrayOf(options) {\n    return (values) => {\n        values.forEach((value) => validateField(options, value));\n        return values;\n    };\n}\n\nexport function entityType(values) {\n    const entityTypeValues = [\n        'Country',\n        'CountrySubdivision',\n        'CountrySecondarySubdivision',\n        'CountryTertiarySubdivision',\n        'Municipality',\n        'MunicipalitySubdivision',\n        'Neighbourhood',\n        'PostalCodeArea'\n    ];\n    for (const value of values.split(',')) {\n        if (entityTypeValues.indexOf(value) === -1) {\n            throw new TypeError(\n                `Entity type (${entityTypeValues}) is expected, but ${values} [${typeof values}] given`);\n        }\n    }\n\n    return values;\n}\n\nexport function objectOf(options) {\n    return (value) => {\n        validateField(options, value);\n        return value;\n    };\n}\n\nexport function roadUse(value) {\n    const roadUseValues = ['LimitedAccess', 'Arterial', 'Terminal', 'Ramp', 'Rotary', 'LocalStreet'];\n    throwTypeErrorWhen(!isString(value) || !value.match(/^\\[(\"\\w*\",?)+\\]$/),\n        'Road use is expected, but ' + value + '  [' + typeof value + '] given');\n\n    const elements = value.replace(/[\"[\\]]/g, '').split(',');\n    for (let i = 0; i < elements.length; i += 1) {\n        throwTypeErrorWhen(roadUseValues.indexOf(elements[i]) < 0,\n            'Road use (' + roadUseValues + ') is expected, but ' + value +\n            '  [' + typeof value + '] given');\n    }\n    return value;\n}\n\nexport function arrayOfValues(values, paramName) {\n    return (value) => {\n        const message = 'Supported ' + paramName + ' type is expected (array with one of: ' + values +\n            '), but ' + value + ' [' + typeof value + '] given';\n        if (checkArray(value)) {\n            throw new TypeError('an array is expected, but ' + value + '  [' + typeof value + '] given');\n        }\n        for (let i = 0; i < value.length; i += 1) {\n            validateAgainstSetOfValues(value[i], values, message);\n        }\n        return value;\n    };\n}\n\n/**\n * @ignore\n * Checks whether the given departure time is now or in the proper RFC-3339 format ( 1996-12-19T16:39:57 or\n * 1996-12-19T16:39:57-08:00 ):\n * @param {String} value\n * @return {String} value\n * @throws {TypeError} if the given value is not valid.\n */\nexport function departAt(value) {\n    if (value === 'now' || isDateRfc3339(value) && Date.now() < Date.parse(value)) {\n        return value;\n    } else {\n        throw new TypeError('Supported departAt is now or rfc3339 format and no earlier than now(), but ' +\n            value + ' [' + typeof value + '] given');\n    }\n}\n\n/**\n * @ignore\n * Checks whether the given arrive time is in proper RFC-3339 format (1996-12-19T16:39:57 or\n * 1996-12-19T16:39:57-08:00):\n * @param {String} value\n * @return {String} value\n * @throws {TypeError} if the given value is not valid.\n */\nexport function arriveAt(value) {\n    if (isDateRfc3339(value) && Date.now() < Date.parse(value)) {\n        return value;\n    } else {\n        throw new TypeError('Supported arriveAt is rfc3339 format, but and no earlier than now() ' +\n            value + ' [' + typeof value + '] given');\n    }\n}\n\nexport function routingGuidanceLanguage(value) {\n    const routingGuidanceLanguageValues = Object.keys(routingLanguageMap);\n    const message = 'Supported routing guidance language is expected to be one of: ' +\n        routingGuidanceLanguageValues + '), but ' + value + ' [' + typeof value + '] given';\n    return validateAgainstSetOfValues(value, routingGuidanceLanguageValues, message);\n}\n\nexport function incidentDetailsLanguage(value) {\n    const incidentDetailsLanguageValues = [\n        'ar', 'ca', 'cs', 'da', 'de', 'el', 'en', 'en-GB', 'en-US',\n        'es', 'et', 'fi', 'fr', 'he', 'hu', 'id', 'it', 'lt', 'lv',\n        'nb', 'nl', 'no', 'pl', 'pt', 'ro', 'ru', 'sk', 'sv', 'th',\n        'tr', 'zh'\n    ];\n    const message = 'Supported traffic incidents language is expected to be one of: ' +\n    incidentDetailsLanguageValues + '), but ' + value + ' [' + typeof value + '] given';\n    return validateAgainstSetOfValues(value, incidentDetailsLanguageValues, message);\n}\n\nexport function mapsLanguage(value) {\n    const message = 'Supported maps language is expected to be one of: ' +\n    mapsLangCodes + '), but ' + value + ' [' + typeof value + '] given';\n    return validateAgainstSetOfValues(value, mapsLangCodes, message);\n}\n\n/**\n * @ignore\n * Checks whether the given routing locations is in the proper format:\n * circle - A circle with a center point and a radius (in meters).\n * The radius must be a positive integer with the maximum value of 20050000. Note that larger integer values\n * will not be rejected but lowered to the maximum value. circle(52.37245,4.89406,10000) location - A point or\n * a circle.\n * 52.37245,4.89406\n * circle(52.37245,4.89406,10000)\n * @param {String} value\n * @return {String} value\n * @throws {TypeError} if the given value is not valid.\n */\nexport function routingLocations(value) {\n    const point = pointRegex,\n        circle = circleRegex;\n\n    if (value.constructor.toString().indexOf('Array') > -1) {\n        value = value.join(':');\n    }\n\n    const routingLocation = new RegExp('^' + point.source + ':(?:(?:' + point.source + '|' +\n        circle.source + '):)*' + point.source + '$');\n    if (!value.match(routingLocation)) {\n        throw new TypeError('Routing location is expected. But ' + value + ' [' + typeof value + '] given');\n    }\n    return value;\n}\n\n/**\n * @ignore\n * Checks whether the given input is in the proper circle format:\n * circle - A circle with a center point and a radius (in meters).\n * The radius must be a positive integer with the maximum value of 20050000. Note that larger integer values\n * will not be rejected but lowered to the maximum value. circle(52.37245,4.89406,10000)\n * @param {String} value\n * @return {String} value\n * @throws {TypeError} if the given value is not valid.\n */\nexport function circle(value) {\n    throwTypeErrorWhen(!isString(value),\n        'Expecting circle but ' + value + ' [' + typeof value + '] given');\n\n    const match = value.match(/circle\\(-?\\d*(?:\\.\\d*)?\\s*,\\s*-?\\d*(?:\\.\\d*)?\\s*,\\s*(\\d+)\\)/);\n    throwTypeErrorWhen(!match || parseFloat(match[1]) > 20050000,\n        'Expecting circle but ' + value + ' [' + typeof value + '] given');\n\n    return value;\n}\n\n/**\n * @ignore\n * Checks whether the given input is in the proper geometry list format.\n * Geometry list represents a list of figures (polygons or circles) objects.\n * Circle contains properties like: type (\"CIRCLE\"), position (lat & lon) and radius.\n * Polygon contains properties like: type (\"POLYGON\") and vertices (as a list of points).\n *\n * @param {Array} value\n * @return {Array} value\n * @throws {TypeError} if the given value is not valid.\n */\nexport function geometryList(value) {\n    throwTypeErrorWhen(checkArray(value), 'An array of geometry objects is expected, but ' +\n    value + ' [' + typeof value + '] given');\n\n    if (value.length > 0) {\n        for (let i = 0; i < value.length; i += 1) {\n            const geoObject = value[i];\n            throwTypeErrorWhen(!Object.prototype.hasOwnProperty.call(geoObject, 'type') ||\n                !Object.prototype.hasOwnProperty.call(geoObject, 'vertices') &&\n                (!Object.prototype.hasOwnProperty.call(geoObject, 'position') ||\n                !Object.prototype.hasOwnProperty.call(geoObject, 'radius')),\n            'An array of geometry objects is expected, but ' + value + ' [' + typeof value + '] given');\n        }\n    } else {\n        throw new TypeError('An array of geometry objects is expected, but ' + value +\n            ' [' + typeof value + '] given');\n    }\n    return value;\n}\n\n/**\n * @ignore\n *\n * Checks if the given value has a property 'route' which is an array of points.\n * By an array of points we mean an array of an array of { lon, lat }, { lng, lat }, [ num, num ],\n * Maps.LngLat objects or mixed.\n *\n * @param {Object} value\n *\n * @return {Object} value Stringified array of figures (JSON format).\n * @throws {TypeError} if the given value is not valid.\n */\nexport function route(value) {\n    let points;\n\n    if (typeof value.points !== 'undefined') {\n        points = value.points;\n    } else {\n        throw new TypeError('Invalid structure of the route object');\n    }\n\n    if (points && !(Array.isArray(points) && points.length > 2)) {\n        throw new TypeError('Provided route array ' +\n            points + ' is not valid. It should be an array with at least 2 points.');\n    }\n    points.forEach(checkPointObjectOrArray);\n    return value;\n}\n\nexport function supportingPoints(value) {\n    if (!Array.isArray(value)) {\n        throw new TypeError('Expecting array in supporting points validator');\n    }\n    if (!value.length || value.length < 2) {\n        throw new TypeError('There should be at least two supporting points');\n    }\n    return value;\n}\n\nexport function waitTimeSeconds(value) {\n    if (isNaN(value) || !isInteger(value) || !(value === 120 || (value >= 5 && value <= 60))) {\n        throw new TypeError('Invalid `waitTimeSeconds` parameter value. ' +\n        'Must be 120 or an integer between 5 and 60.');\n    }\n\n    return value;\n}\n\nexport function clientTime(value) {\n    return checkDateRfc3339(value, 'clientTime');\n}\n\nexport function dateTime(value) {\n    return checkDateRfc3339(value, 'dateTime');\n}\n\n/**\n * @ignore\n * Checks whether object-like fields definition matches\n * available fields.\n *\n * @param {String} value Object-like fields definition.\n * @returns {String} value Object-like fields definition.\n * @throws {TypeError} if given value not matches available fields.\n */\nexport function validIncidentDetailsFields(value) {\n    const availableFields = convertFieldStringIntoObject(incidentDetailsAvailableFields);\n    const testFields = convertFieldStringIntoObject(value);\n\n    const recursiveComparer = (objToTest, objToCompare) => {\n        Object.keys(objToTest).forEach(function(key) {\n            if (objToCompare.hasOwnProperty(key) &&\n                (typeof objToTest[key] === typeof objToCompare[key])) {\n                if (typeof objToTest[key] === 'object') {\n                    recursiveComparer(objToTest[key], objToCompare[key]);\n                }\n            } else {\n                throw new TypeError(`Property ${key} not matches available fields: ` + incidentDetailsAvailableFields);\n            }\n        });\n    };\n    recursiveComparer(testFields, availableFields);\n\n    return value;\n}\n\nexport { keyValidator as key } from './validators/key';\nexport { numberValidator as number } from './validators/number';\nexport { oneOfValueValidator as oneOfValue } from './validators/oneOfValue';\n\n","import {isStringSinglePoint} from '../utils/pointUtils';\nimport has from 'lodash/has';\nimport isFunction from 'lodash/isFunction';\nimport isString from 'lodash/isString';\n\n/*\n * Class to convert points or arrays of points.\n *\n * By default, the points will be converted to {lon: 00, lat: 00} format.\n *\n * Points in the format [00.0, 00.0] are considered lon-lat points,\n * for lat-lon points set the option isLatLon to true;\n *\n * It is possible to convert the points to a custom format by passing a function in the options\n * as customPointConverter with params longitude and latitude - customPointConverter(longitude,latitude)\n */\nexport class PointFacade {\n\n    constructor(options = {}) {\n        this.options = options;\n    }\n\n    convert(data) {\n        if (this._isSinglePoint(data)) {\n            return this._convertPoint(data);\n        }\n        return this._convertToArrayOfPoints(data);\n    }\n\n    _isSinglePoint(data) {\n        if (Array.isArray(data)) {\n            if (data.length === 2 && typeof data[0] !== 'object') { // for [00, 00] points\n                return true;\n            }\n            return false;\n        }\n        if (isString(data)) {\n            const points = data.split(':');\n            if (points.length >= 2) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    _convertToArrayOfPoints(data) {\n        if (isString(data)) {\n            return data.split(':').map(this._convertPoint.bind(this));\n        }\n        return data.map(this._convertPoint.bind(this));\n    }\n\n    _convertPoint(point) {\n\n        // converts {lat: 00.0, lon: 00.0}\n        if (has(point, 'lat') && has(point, 'lon')) {\n            return this._covertToDefaultFormat(point.lon, point.lat);\n        }\n\n        // converts {latitude: 00.0, longitude: 00.0}\n        if (has(point, 'latitude') && has(point, 'longitude')) {\n            return this._covertToDefaultFormat(point.longitude, point.latitude);\n        }\n\n        // converts {x: 00.0, y: 00.0} x === longitude, y === latitude\n        if (has(point, 'x') && has(point, 'y')) {\n            return this._covertToDefaultFormat(point.x, point.y);\n        }\n\n        // converts [00.0, 00.0]\n        if (Array.isArray(point) && point.length === 2) {\n            if (this.options.isLatLon) {\n                return this._covertToDefaultFormat(point[1], point[0]);\n            }\n            return this._covertToDefaultFormat(point[0], point[1]);\n        }\n\n        // converts \"00.000,00.000\"\n        if (isString(point)) {\n            return this._convertStringPoint(point);\n        }\n\n        return point;\n    }\n\n    _convertStringPoint(point) {\n        const p = point.split(',');\n\n        if (!isStringSinglePoint(point) || p.length !== 2) {\n            throw new Error('The point is not valid: ' + point);\n        }\n\n        if (this.options.isLatLon) {\n            return this._covertToDefaultFormat(p[1], p[0]);\n        }\n        return this._covertToDefaultFormat(p[0], p[1]);\n    }\n\n    _covertToDefaultFormat(longitude, latitude) {\n        if ((!longitude && longitude !== 0) || (!latitude && latitude !== 0)) {\n            throw new Error('Longitude and latitude must be provided.');\n        }\n        if (isFunction(this.options.customPointConverter)) {\n            return this.options.customPointConverter(longitude, latitude);\n        }\n        return {\n            lng: parseFloat(longitude),\n            lat: parseFloat(latitude)\n        };\n    }\n}\n","export const isStringSinglePoint = stringPoint => {\n    if (/^-?\\d+(\\.\\d+)?,-?\\d+(\\.\\d+)?$/.test(stringPoint)) {\n        return true;\n    }\n    return false;\n};\n","import {PointFacade} from './pointFacade';\nimport isNil from 'lodash/isNil';\nimport isObject from 'lodash/isObject';\n\nconst pointFacade = new PointFacade();\n\nexport const convertResponsePoints = (elem) => {\n    if (!elem) {\n        return;\n    }\n\n    if (elem.boundingBox) {\n        elem.boundingBox.btmRightPoint = pointFacade.convert(elem.boundingBox.btmRightPoint);\n        elem.boundingBox.topLeftPoint = pointFacade.convert(elem.boundingBox.topLeftPoint);\n    }\n    if (elem.viewport) {\n        elem.viewport.btmRightPoint = pointFacade.convert(elem.viewport.btmRightPoint);\n        elem.viewport.topLeftPoint = pointFacade.convert(elem.viewport.topLeftPoint);\n    }\n    if (elem.position) {\n        elem.position = pointFacade.convert(elem.position);\n    }\n    if (elem.summary && elem.summary.geoBias) {\n        elem.summary.geoBias = pointFacade.convert(elem.summary.geoBias);\n    }\n};\n\nexport const setProperty = (properties, propertyName, value) => {\n    if (!isNil(value)) {\n        properties[propertyName] = value;\n    }\n};\n\nexport const newFeature = (properties, type) => {\n    return {\n        type: 'Feature',\n        geometry: {type, coordinates: []},\n        properties: properties\n    };\n};\n\nexport const newFeatureCollection = () => {\n    return {\n        type: 'FeatureCollection',\n        features: []\n    };\n};\n\nexport const getFeature = (data) => {\n    const properties = {};\n    properties.id = data.id;\n\n    if (isObject(data)) {\n        Object.keys(data).forEach(name => {\n            setProperty(properties, name, data[name]);\n        });\n    }\n\n    const feature = newFeature(properties, 'Point');\n    feature.geometry.coordinates = [data.position.lng, data.position.lat];\n\n    return feature;\n};\n\nexport const toGeoJson = (data) => {\n    const result = newFeatureCollection();\n\n    for (let i = 0; i < data.results.length; i++) {\n        const feature = getFeature(data.results[i]);\n        result.features.push(feature);\n    }\n    return result;\n};\n","import { convertResponsePoints, toGeoJson } from '../modelUtils';\n\nfunction convertEntryPoints(element) {\n    if (element && element.entryPoints && Array.isArray(element.entryPoints)) {\n        element.entryPoints.forEach(entryPoint => {\n            convertResponsePoints(entryPoint);\n        });\n    }\n}\n\nexport function searchModel(data) {\n    if (!data) {\n        return data;\n    }\n    // converts location points\n    if (Array.isArray(data.results)) {\n        data.results.forEach(result => {\n            if (Array.isArray(result)) {\n                result.forEach(r => {\n                    convertResponsePoints(r);\n                    convertEntryPoints(r);\n                });\n            } else {\n                convertResponsePoints(result);\n                convertEntryPoints(result);\n            }\n        });\n    } else {\n        convertResponsePoints(data);\n        convertEntryPoints(data);\n    }\n\n    return Object.assign(data, {\n        toGeoJson: () => toGeoJson(data)\n    });\n}\n","import {searchModel} from './search';\n\nexport function batchModel(data) {\n    if (!Array.isArray(data.batchItems)) {\n        return null;\n    }\n\n    data.batchItems = data.batchItems.map((batchItem) => {\n        if (batchItem.response.error) {\n            return { error: batchItem.response.error};\n        } else {\n            return searchModel(batchItem.response);\n        }\n    });\n\n    return data;\n}\n","\nexport default {\n    POST: 'POST',\n    PATH: 'PATH',\n    QUERY: 'QUERY',\n    OTHER: 'OTHER',\n    HEADER: 'HEADER'\n};\n","export function modelResponse({ data, trackingId }, modelCallback) {\n    const modeledResponseData = typeof data === 'string' ? { data } : { ...data };\n    const modeledResponse = modelCallback ? modelCallback(data) : modeledResponseData;\n    modeledResponse.getTrackingId = () => trackingId || null;\n\n    return modeledResponse;\n}\n","import mainConfig from 'mainConfig';\n\nexport const copyrightsWorldEndpoint = mainConfig['endpoints.copyrightsWorld'];\nexport const copyrightsBoundsEndpoint = mainConfig['endpoints.copyrightsBounds'];\nexport const copyrightsZoomEndpoint = mainConfig['endpoints.copyrightsZoom'];\nexport const captionEndpoint = mainConfig['endpoints.caption'];\nexport const copyrightsV2Endpoint = mainConfig['endpoints.copyrightsV2'];\nexport const captionV2Endpoint = mainConfig['endpoints.captionV2'];\n\n//Search\nexport const batchSearchEndpoint = mainConfig['endpoints.batchSearch'];\nexport const batchSyncSearchEndpoint = mainConfig['endpoints.batchSyncSearch'];\nexport const batchSearchQueryEndpoint = mainConfig['endpoints.batchSearchQuery'];\nexport const geocodeEndpoint = mainConfig['endpoints.geocode'];\nexport const reverseGeocodeEndpoint = mainConfig['endpoints.reverseGeocode'];\nexport const batchReverseGeocodeQueryEndpoint = mainConfig['endpoints.batchReverseGeocodeQuery'];\nexport const structuredGeocodeEndpoint = mainConfig['endpoints.structuredGeocode'];\nexport const searchEndpoint = mainConfig['endpoints.search'];\nexport const batchStructuredGeocodeQueryEndpoint = mainConfig['endpoints.batchStructuredGeocodeQuery'];\nexport const adpEndpoint = mainConfig['endpoints.adp'];\nexport const batchAdpQueryEndpoint = mainConfig['endpoints.batchAdpQuery'];\nexport const nearbySearchEndpoint = mainConfig['endpoints.nearbySearch'];\nexport const batchNearbySearchQueryEndpoint = mainConfig['endpoints.batchNearbySearchQuery'];\nexport const autocompleteEndpoint = mainConfig['endpoints.autocomplete'];\nexport const poiCategoriesEndpoint = mainConfig['endpoints.poiCategories'];\nexport const chargingAvailabilityEndpoint = mainConfig['endpoints.chargingAvailability'];\nexport const batchChargingAvailabilityQueryEndpoint = mainConfig['endpoints.batchChargingAvailabilityQuery'];\nexport const poiDetailsEndpoint = mainConfig['endpoints.poiDetails'];\nexport const poiPhotosEndpoint = mainConfig['endpoints.poiPhotos'];\nexport const placeByIdEndpoint = mainConfig['endpoints.placeById'];\n\n//Routing\nexport const routingEndpoint = mainConfig['endpoints.routing'];\nexport const calculateReachableRangeEndpoint = mainConfig['endpoints.calculateReachableRange'];\nexport const batchRoutingQueryEndpoint = mainConfig['endpoints.batchRoutingQuery'];\nexport const batchRoutingEndpoint = mainConfig['endpoints.batchRouting'];\nexport const batchSyncRoutingEndpoint = mainConfig['endpoints.batchSyncRouting'];\nexport const matrixRoutingEndpoint = mainConfig['endpoints.matrixRouting'];\nexport const matrixSyncRoutingEndpoint = mainConfig['endpoints.matrixSyncRouting'];\nexport const batchReachableRangeQueryEndpoint = mainConfig['endpoints.batchReachableRangeQuery'];\nexport const longDistanceEVRoutingEndpoint = mainConfig['endpoints.longDistanceEVRouting'];\n\n//traffic\nexport const incidentDetailsEndpoint = mainConfig['endpoints.incidentDetails'];\nexport const incidentDetailsV5Endpoint = mainConfig['endpoints.incidentDetailsV5'];\nexport const incidentViewportEndpoint = mainConfig['endpoints.incidentViewport'];\nexport const flowSegmentDataEndpoint = mainConfig['endpoints.flowSegmentData'];\nexport const incidentRegionsEndpoint = mainConfig['endpoints.incidentRegions'];\n\n//layers\nexport const trafficLayerEndpoint = mainConfig['endpoints.trafficLayer'];\nexport const rasterTrafficFlowTilesLayerEndpoint = mainConfig['endpoints.rasterTrafficFlowTilesLayer'];\nexport const vectorTrafficFlowTilesLayerEndpoint = mainConfig['endpoints.vectorTrafficFlowTilesLayer'];\nexport const tileLayerEndpoint = mainConfig['endpoints.tileLayer'];\n\nexport const staticMapImageEndpoint = mainConfig['endpoints.staticImage'];\nexport const origin = mainConfig.origin;\n","export default class ValidationError extends Error {\n    constructor(errors, ...params) {\n        super(...params);\n\n        // Maintains proper stack trace for where our error was thrown (only available on V8)\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, ValidationError);\n        }\n        let consolidatedErrorMessages = '\\n';\n        errors.forEach(element => {\n            consolidatedErrorMessages += element.message + '\\n';\n        });\n\n        this.errors = errors;\n        this.message = 'Validation errors occured: ' + consolidatedErrorMessages;\n    }\n}\n","import isFunction from 'lodash/isFunction';\n\nconst dateRegex = /^\\d{4}[\\/-]\\d{1,2}[\\/-]\\d{1,2}$/; // eslint-disable-line\n\nexport default class Field {\n    constructor({validators, converters, required, defaultValue, deprecationDate}) {\n        Object.assign(this, {validators, converters, required, defaultValue, deprecationDate});\n\n        this._validateFields();\n    }\n\n    _isArrayOfFunctions(array) {\n        if (!Array.isArray(array)) {\n            return false;\n        }\n\n        for (let i = 0; i < array.length; i++) {\n            if (!isFunction(array[i])) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    _validateFields() {\n        if (this.validators === null || (this.validators && !this._isArrayOfFunctions(this.validators))) {\n            throw new Error('Validators are not an array of functions.');\n        }\n        if (this.converters === null || (this.converters && !this._isArrayOfFunctions(this.converters))) {\n            throw new Error('Converters are not an array of functions.');\n        }\n        if (!(this.required === undefined || typeof this.required === 'boolean')) {\n            throw new Error('Required must be a Boolean.');\n        }\n        if (this.deprecationDate &&\n            (Number.isNaN(Date.parse(this.deprecationDate)) || !dateRegex.test(this.deprecationDate))) {\n            throw new Error('deprecationDate must contain a valid date');\n        }\n    }\n\n    getDefaultValue() {\n        if (isFunction(this.defaultValue)) {\n            return this.defaultValue();\n        }\n\n        return this.defaultValue;\n    }\n\n    getConverters() {\n        return this.converters ? this.converters : [];\n    }\n\n    getValidators() {\n        return this.validators ? this.validators : [];\n    }\n\n    getDeprecationDate() {\n        return this.deprecationDate;\n    }\n\n    isRequired() {\n        return this.required === true;\n    }\n}\n\nexport function field(options) {\n    return new Field(options);\n}\n","import isNil from 'lodash/isNil';\n\n// import * as isNil from 'lodash.isnil';\nclass DeprecationHandler {\n    constructor() {\n        this.log = {};\n    }\n\n    _isLogPrinted(serviceName, name) {\n        const serviceLog = this.log[serviceName];\n        if (serviceLog) {\n            return serviceLog[name];\n        }\n\n        return false;\n    }\n\n    _setLog(serviceName, name) {\n        this.log[serviceName] = this.log[serviceName] || {};\n        this.log[serviceName][name] = true;\n    }\n\n    _displayWarning(name, date, serviceName) {\n        const isPastCurrentDate = Date.now() > Date.parse(date);\n        const serviceNameMsg = serviceName !== 'default' ? `(used in ${serviceName}) ` : '';\n\n        if (isPastCurrentDate) {\n            console.error(`[DEPRECATION WARNING] The parameter '${name}' ${serviceNameMsg} deprecation period ` +\n            'has ended. It is recommended to stop using it as it may stop working. ' +\n            'Please refer to https://developer.tomtom.com/maps-sdk-web-js/documentation for more information');\n        } else {\n            console.warn(`[DEPRECATION NOTICE] The parameter '${name}' ${serviceNameMsg}is deprecated. ` +\n                `By ${date} we can not guarantee that it will continue to work. ` +\n                'Please refer to https://developer.tomtom.com/maps-sdk-web-js/documentation for more information');\n        }\n\n    }\n\n    checkDeprecation(name, date, serviceName = 'default') {\n        if (isNil(name) || isNil(date) || this._isLogPrinted(serviceName, name)) {\n            return;\n        }\n\n        this._displayWarning(name, date, serviceName);\n        this._setLog(serviceName, name);\n    }\n\n}\n\nexport default new DeprecationHandler();\n","import ValidationError from '../error/ValidationError';\nimport Field from '../model/Field';\nimport isNil from 'lodash/isNil';\nimport deprecationHandler from './deprecationHandler';\nimport { trackingId as validateTrackingId } from './validators';\nimport { v4 as uuid } from 'uuid';\nimport {keyValidator} from './validators/key';\nimport {oneOfValueValidator} from './validators/oneOfValue';\nimport {numberValidator} from './validators/number';\n\nconst runValidators = (value, validators, params, key) => {\n    const errors = [];\n\n    for (const validator of validators) {\n        try {\n            validator(value, params, key);\n        } catch (error) {\n            errors.push(error);\n        }\n    }\n    return errors;\n};\n\nconst convertToFields = (fields) => {\n    const convertedFields = {};\n    for (const [key, field] of Object.entries(fields)) {\n        convertedFields[key] = new Field(field);\n    }\n    return convertedFields;\n};\n\nconst internalValidator = (fields, params = {}, serviceName) => {\n    const convertedFields = convertToFields(fields);\n    let errors = [];\n    for (const [name, field] of Object.entries(convertedFields)) {\n        const value = params[name];\n        const isRequiredFieldMissing = isNil(value) && field.isRequired();\n        const isAppliedForAll = name === '__all';\n\n        if (isRequiredFieldMissing) {\n            errors.push(new Error(`${name} is a required field.`));\n        } else if (!isNil(value) || isAppliedForAll) { // runs validators for the given field)\n            deprecationHandler.checkDeprecation(name, field.getDeprecationDate(), serviceName);\n\n            const validationErrors = runValidators(value, field.getValidators(), params, name);\n            errors = [...errors, ...validationErrors];\n        }\n    }\n    return errors;\n};\n\n/**\n * Receives a list of fields and parameters and converts them according to the converters\n * defined. It also sets the default value when the field is undefined.\n *\n * @method convert\n * @private\n * @param {Object} [fields] Object containing the fields and their converters.\n * @param {Object} [params] Object containing the params and their values.\n * @param {Object} [serviceType] Service type - required for some converters.\n * @returns {Object} Converted values.\n */\nexport const convert = (fields, params = {}, serviceType) => {\n    const convertedFields = convertToFields(fields);\n    const converted = {};\n    for (const [name, field] of Object.entries(convertedFields)) {\n        const defaultValue = field.getDefaultValue();\n        let fieldValue = params[name];\n        if (isNil(fieldValue) || fieldValue === '') {\n            if (!isNil(defaultValue)) {\n                fieldValue = defaultValue;\n            } else {\n                continue;\n            }\n        }\n        const converters = field.getConverters();\n        converted[name] = converters.reduce((value, converter) => {\n            return converter(value, serviceType);\n        }, fieldValue);\n    }\n    return converted;\n};\n\n/**\n * Responsible for processing batch items. It validates and converts them and it returns\n * the properties and the errors.\n *\n * @method processBatchItems\n * @private\n * @param {Object} [fields] Object containing the fields, their validators and converters, and if they\n * are required.\n * @param {Object} [params] Object containing the parameters and their values.\n * @param {String} [serviceType] ServiceType.\n * @param {String} [serviceName] serviceName.\n * @returns {Object} Batch properties and errors.\n */\nfunction processBatchItems(fields, params, serviceType, serviceName) {\n    const batchProperties = {};\n    let batchErrors = [];\n\n    if (fields.batchItems && params.batchItems) {\n        batchProperties.batchItems = params.batchItems.map((param) => {\n            const convertedField = convert(fields.batchItems, param, serviceType);\n            batchErrors = batchErrors.concat(internalValidator(fields.batchItems, convertedField, serviceName));\n            return convertedField;\n        });\n        if (params.batchMode) {\n            batchProperties.batchMode =\n                oneOfValueValidator(['sync', 'async', 'redirect'], 'batchMode')(params.batchMode);\n        }\n        if (params.key) {\n            batchProperties.key = keyValidator(params.key);\n        }\n        batchProperties.trackingId = params.trackingId ? validateTrackingId(params.trackingId) : uuid();\n        if (params.waitTimeSeconds) {\n            numberValidator(params.waitTimeSeconds);\n\n            if (!(params.waitTimeSeconds === 120 || (params.waitTimeSeconds >= 5 && params.waitTimeSeconds <= 60))) {\n                throw new Error('Invalid `waitTimeSeconds` parameter value. ' +\n                'Must be 120 or an integer between 5 and 60.');\n            }\n\n            batchProperties.waitTimeSeconds = params.waitTimeSeconds;\n        }\n    }\n\n    return { batchProperties, batchErrors };\n}\n\n/**\n * Receives a list of fields and parameters, validates and converts them according to the validators and\n * converters defined.\n * It also sets the API Key if defined.\n *\n * @method goPrototype\n * @private\n * @param {Object} [fields] Object containing the fields, their validators and converters, and if they\n * are required.\n * @param {Object} [params] Object containing the parameters and their values.\n * @param {String} [serviceType] ServiceType.\n * @param {String} [serviceName] serviceName.\n * @param {Function} [callback] Callback.\n * @param {Object} [abortSignal] abortSignal generated with Abort Controller.\n * @returns {Object} Validated and converted values.\n */\nexport async function goPrototype(fields, params = {}, serviceType, serviceName, callback, abortSignal) {\n    let converted = convert(fields, params, serviceType);\n    let errors = internalValidator(fields, converted, serviceName);\n\n    if (fields.batchItems && params.batchItems) {\n        const { batchProperties, batchErrors } = processBatchItems(fields, params, serviceType, serviceName);\n        converted = { ...converted, ...batchProperties };\n        errors = errors.concat(batchErrors);\n    }\n\n    if (errors.length) {\n        throw new ValidationError(errors);\n    }\n    return callback(converted, abortSignal);\n}\n","import { goPrototype } from './service';\nimport isFunction from 'lodash/isFunction';\n\nexport function serviceFactory(fields, serviceType, serviceName, handleServiceCall, handleBatchServiceCall) {\n    const batchFields = {\n        batchItems: fields\n    };\n\n    return (options = {}, additionalOptions = {}) => {\n        let serviceCall = handleServiceCall;\n        let opt = options;\n        let serviceFields = fields;\n\n        if (options.batchItems && isFunction(handleBatchServiceCall)) {\n            opt = {\n                trackingId: options.trackingId,\n                batchMode: options.batchMode,\n                waitTimeSeconds: options.waitTimeSeconds,\n                batchItems: options.batchItems,\n                key: options.key\n            };\n            serviceCall = handleBatchServiceCall;\n            serviceFields = batchFields;\n        }\n\n        return goPrototype(\n            serviceFields,\n            opt,\n            serviceType,\n            serviceName,\n            serviceCall,\n            additionalOptions.abortSignal\n        );\n    };\n}\n","import isFunction from 'lodash/isFunction';\nimport isUndefined from 'lodash/isUndefined';\n\nexport default function(template, values) {\n    return template.replace(/\\{ *([\\w_]+) *\\}/g, (_, key) => {\n        let value = values[key];\n\n        if (isUndefined(value)) {\n            return '{' + key + '}';\n        }\n\n        if (isFunction(value)) {\n            value = value(key);\n        }\n\n        return key === 'query' ? encodeURIComponent(value) : value;\n    });\n}\n","var __WEBPACK_NAMESPACE_OBJECT__ = require(\"stream\");;","var __WEBPACK_NAMESPACE_OBJECT__ = require(\"http\");;","var __WEBPACK_NAMESPACE_OBJECT__ = require(\"url\");;","var __WEBPACK_NAMESPACE_OBJECT__ = require(\"https\");;","var __WEBPACK_NAMESPACE_OBJECT__ = require(\"zlib\");;","import Stream from 'stream';\nimport http from 'http';\nimport Url from 'url';\nimport whatwgUrl from 'whatwg-url';\nimport https from 'https';\nimport zlib from 'zlib';\n\n// Based on https://github.com/tmpvar/jsdom/blob/aa85b2abf07766ff7bf5c1f6daafb3726f2f2db5/lib/jsdom/living/blob.js\n\n// fix for \"Readable\" isn't a named export issue\nconst Readable = Stream.Readable;\n\nconst BUFFER = Symbol('buffer');\nconst TYPE = Symbol('type');\n\nclass Blob {\n\tconstructor() {\n\t\tthis[TYPE] = '';\n\n\t\tconst blobParts = arguments[0];\n\t\tconst options = arguments[1];\n\n\t\tconst buffers = [];\n\t\tlet size = 0;\n\n\t\tif (blobParts) {\n\t\t\tconst a = blobParts;\n\t\t\tconst length = Number(a.length);\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tconst element = a[i];\n\t\t\t\tlet buffer;\n\t\t\t\tif (element instanceof Buffer) {\n\t\t\t\t\tbuffer = element;\n\t\t\t\t} else if (ArrayBuffer.isView(element)) {\n\t\t\t\t\tbuffer = Buffer.from(element.buffer, element.byteOffset, element.byteLength);\n\t\t\t\t} else if (element instanceof ArrayBuffer) {\n\t\t\t\t\tbuffer = Buffer.from(element);\n\t\t\t\t} else if (element instanceof Blob) {\n\t\t\t\t\tbuffer = element[BUFFER];\n\t\t\t\t} else {\n\t\t\t\t\tbuffer = Buffer.from(typeof element === 'string' ? element : String(element));\n\t\t\t\t}\n\t\t\t\tsize += buffer.length;\n\t\t\t\tbuffers.push(buffer);\n\t\t\t}\n\t\t}\n\n\t\tthis[BUFFER] = Buffer.concat(buffers);\n\n\t\tlet type = options && options.type !== undefined && String(options.type).toLowerCase();\n\t\tif (type && !/[^\\u0020-\\u007E]/.test(type)) {\n\t\t\tthis[TYPE] = type;\n\t\t}\n\t}\n\tget size() {\n\t\treturn this[BUFFER].length;\n\t}\n\tget type() {\n\t\treturn this[TYPE];\n\t}\n\ttext() {\n\t\treturn Promise.resolve(this[BUFFER].toString());\n\t}\n\tarrayBuffer() {\n\t\tconst buf = this[BUFFER];\n\t\tconst ab = buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\treturn Promise.resolve(ab);\n\t}\n\tstream() {\n\t\tconst readable = new Readable();\n\t\treadable._read = function () {};\n\t\treadable.push(this[BUFFER]);\n\t\treadable.push(null);\n\t\treturn readable;\n\t}\n\ttoString() {\n\t\treturn '[object Blob]';\n\t}\n\tslice() {\n\t\tconst size = this.size;\n\n\t\tconst start = arguments[0];\n\t\tconst end = arguments[1];\n\t\tlet relativeStart, relativeEnd;\n\t\tif (start === undefined) {\n\t\t\trelativeStart = 0;\n\t\t} else if (start < 0) {\n\t\t\trelativeStart = Math.max(size + start, 0);\n\t\t} else {\n\t\t\trelativeStart = Math.min(start, size);\n\t\t}\n\t\tif (end === undefined) {\n\t\t\trelativeEnd = size;\n\t\t} else if (end < 0) {\n\t\t\trelativeEnd = Math.max(size + end, 0);\n\t\t} else {\n\t\t\trelativeEnd = Math.min(end, size);\n\t\t}\n\t\tconst span = Math.max(relativeEnd - relativeStart, 0);\n\n\t\tconst buffer = this[BUFFER];\n\t\tconst slicedBuffer = buffer.slice(relativeStart, relativeStart + span);\n\t\tconst blob = new Blob([], { type: arguments[2] });\n\t\tblob[BUFFER] = slicedBuffer;\n\t\treturn blob;\n\t}\n}\n\nObject.defineProperties(Blob.prototype, {\n\tsize: { enumerable: true },\n\ttype: { enumerable: true },\n\tslice: { enumerable: true }\n});\n\nObject.defineProperty(Blob.prototype, Symbol.toStringTag, {\n\tvalue: 'Blob',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * fetch-error.js\n *\n * FetchError interface for operational errors\n */\n\n/**\n * Create FetchError instance\n *\n * @param   String      message      Error message for human\n * @param   String      type         Error type for machine\n * @param   String      systemError  For Node.js system error\n * @return  FetchError\n */\nfunction FetchError(message, type, systemError) {\n  Error.call(this, message);\n\n  this.message = message;\n  this.type = type;\n\n  // when err.type is `system`, err.code contains system error code\n  if (systemError) {\n    this.code = this.errno = systemError.code;\n  }\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nFetchError.prototype = Object.create(Error.prototype);\nFetchError.prototype.constructor = FetchError;\nFetchError.prototype.name = 'FetchError';\n\nlet convert;\ntry {\n\tconvert = require('encoding').convert;\n} catch (e) {}\n\nconst INTERNALS = Symbol('Body internals');\n\n// fix an issue where \"PassThrough\" isn't a named export for node <10\nconst PassThrough = Stream.PassThrough;\n\n/**\n * Body mixin\n *\n * Ref: https://fetch.spec.whatwg.org/#body\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nfunction Body(body) {\n\tvar _this = this;\n\n\tvar _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n\t    _ref$size = _ref.size;\n\n\tlet size = _ref$size === undefined ? 0 : _ref$size;\n\tvar _ref$timeout = _ref.timeout;\n\tlet timeout = _ref$timeout === undefined ? 0 : _ref$timeout;\n\n\tif (body == null) {\n\t\t// body is undefined or null\n\t\tbody = null;\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\tbody = Buffer.from(body.toString());\n\t} else if (isBlob(body)) ; else if (Buffer.isBuffer(body)) ; else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\tbody = Buffer.from(body);\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\tbody = Buffer.from(body.buffer, body.byteOffset, body.byteLength);\n\t} else if (body instanceof Stream) ; else {\n\t\t// none of the above\n\t\t// coerce to string then buffer\n\t\tbody = Buffer.from(String(body));\n\t}\n\tthis[INTERNALS] = {\n\t\tbody,\n\t\tdisturbed: false,\n\t\terror: null\n\t};\n\tthis.size = size;\n\tthis.timeout = timeout;\n\n\tif (body instanceof Stream) {\n\t\tbody.on('error', function (err) {\n\t\t\tconst error = err.name === 'AbortError' ? err : new FetchError(`Invalid response body while trying to fetch ${_this.url}: ${err.message}`, 'system', err);\n\t\t\t_this[INTERNALS].error = error;\n\t\t});\n\t}\n}\n\nBody.prototype = {\n\tget body() {\n\t\treturn this[INTERNALS].body;\n\t},\n\n\tget bodyUsed() {\n\t\treturn this[INTERNALS].disturbed;\n\t},\n\n\t/**\n  * Decode response as ArrayBuffer\n  *\n  * @return  Promise\n  */\n\tarrayBuffer() {\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\t});\n\t},\n\n\t/**\n  * Return raw response as Blob\n  *\n  * @return Promise\n  */\n\tblob() {\n\t\tlet ct = this.headers && this.headers.get('content-type') || '';\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn Object.assign(\n\t\t\t// Prevent copying\n\t\t\tnew Blob([], {\n\t\t\t\ttype: ct.toLowerCase()\n\t\t\t}), {\n\t\t\t\t[BUFFER]: buf\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n  * Decode response as json\n  *\n  * @return  Promise\n  */\n\tjson() {\n\t\tvar _this2 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(buffer.toString());\n\t\t\t} catch (err) {\n\t\t\t\treturn Body.Promise.reject(new FetchError(`invalid json response body at ${_this2.url} reason: ${err.message}`, 'invalid-json'));\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n  * Decode response as text\n  *\n  * @return  Promise\n  */\n\ttext() {\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn buffer.toString();\n\t\t});\n\t},\n\n\t/**\n  * Decode response as buffer (non-spec api)\n  *\n  * @return  Promise\n  */\n\tbuffer() {\n\t\treturn consumeBody.call(this);\n\t},\n\n\t/**\n  * Decode response as text, while automatically detecting the encoding and\n  * trying to decode to UTF-8 (non-spec api)\n  *\n  * @return  Promise\n  */\n\ttextConverted() {\n\t\tvar _this3 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn convertBody(buffer, _this3.headers);\n\t\t});\n\t}\n};\n\n// In browsers, all properties are enumerable.\nObject.defineProperties(Body.prototype, {\n\tbody: { enumerable: true },\n\tbodyUsed: { enumerable: true },\n\tarrayBuffer: { enumerable: true },\n\tblob: { enumerable: true },\n\tjson: { enumerable: true },\n\ttext: { enumerable: true }\n});\n\nBody.mixIn = function (proto) {\n\tfor (const name of Object.getOwnPropertyNames(Body.prototype)) {\n\t\t// istanbul ignore else: future proof\n\t\tif (!(name in proto)) {\n\t\t\tconst desc = Object.getOwnPropertyDescriptor(Body.prototype, name);\n\t\t\tObject.defineProperty(proto, name, desc);\n\t\t}\n\t}\n};\n\n/**\n * Consume and convert an entire Body to a Buffer.\n *\n * Ref: https://fetch.spec.whatwg.org/#concept-body-consume-body\n *\n * @return  Promise\n */\nfunction consumeBody() {\n\tvar _this4 = this;\n\n\tif (this[INTERNALS].disturbed) {\n\t\treturn Body.Promise.reject(new TypeError(`body used already for: ${this.url}`));\n\t}\n\n\tthis[INTERNALS].disturbed = true;\n\n\tif (this[INTERNALS].error) {\n\t\treturn Body.Promise.reject(this[INTERNALS].error);\n\t}\n\n\tlet body = this.body;\n\n\t// body is null\n\tif (body === null) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is blob\n\tif (isBlob(body)) {\n\t\tbody = body.stream();\n\t}\n\n\t// body is buffer\n\tif (Buffer.isBuffer(body)) {\n\t\treturn Body.Promise.resolve(body);\n\t}\n\n\t// istanbul ignore if: should never happen\n\tif (!(body instanceof Stream)) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is stream\n\t// get ready to actually consume the body\n\tlet accum = [];\n\tlet accumBytes = 0;\n\tlet abort = false;\n\n\treturn new Body.Promise(function (resolve, reject) {\n\t\tlet resTimeout;\n\n\t\t// allow timeout on slow response body\n\t\tif (_this4.timeout) {\n\t\t\tresTimeout = setTimeout(function () {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`Response timeout while trying to fetch ${_this4.url} (over ${_this4.timeout}ms)`, 'body-timeout'));\n\t\t\t}, _this4.timeout);\n\t\t}\n\n\t\t// handle stream errors\n\t\tbody.on('error', function (err) {\n\t\t\tif (err.name === 'AbortError') {\n\t\t\t\t// if the request was aborted, reject with this Error\n\t\t\t\tabort = true;\n\t\t\t\treject(err);\n\t\t\t} else {\n\t\t\t\t// other errors, such as incorrect content-encoding\n\t\t\t\treject(new FetchError(`Invalid response body while trying to fetch ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\n\t\tbody.on('data', function (chunk) {\n\t\t\tif (abort || chunk === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (_this4.size && accumBytes + chunk.length > _this4.size) {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`content size at ${_this4.url} over limit: ${_this4.size}`, 'max-size'));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\taccumBytes += chunk.length;\n\t\t\taccum.push(chunk);\n\t\t});\n\n\t\tbody.on('end', function () {\n\t\t\tif (abort) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearTimeout(resTimeout);\n\n\t\t\ttry {\n\t\t\t\tresolve(Buffer.concat(accum, accumBytes));\n\t\t\t} catch (err) {\n\t\t\t\t// handle streams that have accumulated too much data (issue #414)\n\t\t\t\treject(new FetchError(`Could not create Buffer from response body for ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Detect buffer encoding and convert to target encoding\n * ref: http://www.w3.org/TR/2011/WD-html5-20110113/parsing.html#determining-the-character-encoding\n *\n * @param   Buffer  buffer    Incoming buffer\n * @param   String  encoding  Target encoding\n * @return  String\n */\nfunction convertBody(buffer, headers) {\n\tif (typeof convert !== 'function') {\n\t\tthrow new Error('The package `encoding` must be installed to use the textConverted() function');\n\t}\n\n\tconst ct = headers.get('content-type');\n\tlet charset = 'utf-8';\n\tlet res, str;\n\n\t// header\n\tif (ct) {\n\t\tres = /charset=([^;]*)/i.exec(ct);\n\t}\n\n\t// no charset in content type, peek at response body for at most 1024 bytes\n\tstr = buffer.slice(0, 1024).toString();\n\n\t// html5\n\tif (!res && str) {\n\t\tres = /<meta.+?charset=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// html4\n\tif (!res && str) {\n\t\tres = /<meta[\\s]+?http-equiv=(['\"])content-type\\1[\\s]+?content=(['\"])(.+?)\\2/i.exec(str);\n\t\tif (!res) {\n\t\t\tres = /<meta[\\s]+?content=(['\"])(.+?)\\1[\\s]+?http-equiv=(['\"])content-type\\3/i.exec(str);\n\t\t\tif (res) {\n\t\t\t\tres.pop(); // drop last quote\n\t\t\t}\n\t\t}\n\n\t\tif (res) {\n\t\t\tres = /charset=(.*)/i.exec(res.pop());\n\t\t}\n\t}\n\n\t// xml\n\tif (!res && str) {\n\t\tres = /<\\?xml.+?encoding=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// found charset\n\tif (res) {\n\t\tcharset = res.pop();\n\n\t\t// prevent decode issues when sites use incorrect encoding\n\t\t// ref: https://hsivonen.fi/encoding-menu/\n\t\tif (charset === 'gb2312' || charset === 'gbk') {\n\t\t\tcharset = 'gb18030';\n\t\t}\n\t}\n\n\t// turn raw buffers into a single utf-8 buffer\n\treturn convert(buffer, 'UTF-8', charset).toString();\n}\n\n/**\n * Detect a URLSearchParams object\n * ref: https://github.com/bitinn/node-fetch/issues/296#issuecomment-307598143\n *\n * @param   Object  obj     Object to detect by type or brand\n * @return  String\n */\nfunction isURLSearchParams(obj) {\n\t// Duck-typing as a necessary condition.\n\tif (typeof obj !== 'object' || typeof obj.append !== 'function' || typeof obj.delete !== 'function' || typeof obj.get !== 'function' || typeof obj.getAll !== 'function' || typeof obj.has !== 'function' || typeof obj.set !== 'function') {\n\t\treturn false;\n\t}\n\n\t// Brand-checking and more duck-typing as optional condition.\n\treturn obj.constructor.name === 'URLSearchParams' || Object.prototype.toString.call(obj) === '[object URLSearchParams]' || typeof obj.sort === 'function';\n}\n\n/**\n * Check if `obj` is a W3C `Blob` object (which `File` inherits from)\n * @param  {*} obj\n * @return {boolean}\n */\nfunction isBlob(obj) {\n\treturn typeof obj === 'object' && typeof obj.arrayBuffer === 'function' && typeof obj.type === 'string' && typeof obj.stream === 'function' && typeof obj.constructor === 'function' && typeof obj.constructor.name === 'string' && /^(Blob|File)$/.test(obj.constructor.name) && /^(Blob|File)$/.test(obj[Symbol.toStringTag]);\n}\n\n/**\n * Clone body given Res/Req instance\n *\n * @param   Mixed  instance  Response or Request instance\n * @return  Mixed\n */\nfunction clone(instance) {\n\tlet p1, p2;\n\tlet body = instance.body;\n\n\t// don't allow cloning a used body\n\tif (instance.bodyUsed) {\n\t\tthrow new Error('cannot clone body after it is used');\n\t}\n\n\t// check that body is a stream and not form-data object\n\t// note: we can't clone the form-data object without having it as a dependency\n\tif (body instanceof Stream && typeof body.getBoundary !== 'function') {\n\t\t// tee instance body\n\t\tp1 = new PassThrough();\n\t\tp2 = new PassThrough();\n\t\tbody.pipe(p1);\n\t\tbody.pipe(p2);\n\t\t// set instance body to teed body and return the other teed body\n\t\tinstance[INTERNALS].body = p1;\n\t\tbody = p2;\n\t}\n\n\treturn body;\n}\n\n/**\n * Performs the operation \"extract a `Content-Type` value from |object|\" as\n * specified in the specification:\n * https://fetch.spec.whatwg.org/#concept-bodyinit-extract\n *\n * This function assumes that instance.body is present.\n *\n * @param   Mixed  instance  Any options.body input\n */\nfunction extractContentType(body) {\n\tif (body === null) {\n\t\t// body is null\n\t\treturn null;\n\t} else if (typeof body === 'string') {\n\t\t// body is string\n\t\treturn 'text/plain;charset=UTF-8';\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\treturn 'application/x-www-form-urlencoded;charset=UTF-8';\n\t} else if (isBlob(body)) {\n\t\t// body is blob\n\t\treturn body.type || null;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn null;\n\t} else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\treturn null;\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\treturn null;\n\t} else if (typeof body.getBoundary === 'function') {\n\t\t// detect form data input from form-data module\n\t\treturn `multipart/form-data;boundary=${body.getBoundary()}`;\n\t} else if (body instanceof Stream) {\n\t\t// body is stream\n\t\t// can't really do much about this\n\t\treturn null;\n\t} else {\n\t\t// Body constructor defaults other things to string\n\t\treturn 'text/plain;charset=UTF-8';\n\t}\n}\n\n/**\n * The Fetch Standard treats this as if \"total bytes\" is a property on the body.\n * For us, we have to explicitly get it with a function.\n *\n * ref: https://fetch.spec.whatwg.org/#concept-body-total-bytes\n *\n * @param   Body    instance   Instance of Body\n * @return  Number?            Number of bytes, or null if not possible\n */\nfunction getTotalBytes(instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\treturn 0;\n\t} else if (isBlob(body)) {\n\t\treturn body.size;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn body.length;\n\t} else if (body && typeof body.getLengthSync === 'function') {\n\t\t// detect form data input from form-data module\n\t\tif (body._lengthRetrievers && body._lengthRetrievers.length == 0 || // 1.x\n\t\tbody.hasKnownLength && body.hasKnownLength()) {\n\t\t\t// 2.x\n\t\t\treturn body.getLengthSync();\n\t\t}\n\t\treturn null;\n\t} else {\n\t\t// body is stream\n\t\treturn null;\n\t}\n}\n\n/**\n * Write a Body to a Node.js WritableStream (e.g. http.Request) object.\n *\n * @param   Body    instance   Instance of Body\n * @return  Void\n */\nfunction writeToStream(dest, instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\tdest.end();\n\t} else if (isBlob(body)) {\n\t\tbody.stream().pipe(dest);\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\tdest.write(body);\n\t\tdest.end();\n\t} else {\n\t\t// body is stream\n\t\tbody.pipe(dest);\n\t}\n}\n\n// expose Promise\nBody.Promise = global.Promise;\n\n/**\n * headers.js\n *\n * Headers class offers convenient helpers\n */\n\nconst invalidTokenRegex = /[^\\^_`a-zA-Z\\-0-9!#$%&'*+.|~]/;\nconst invalidHeaderCharRegex = /[^\\t\\x20-\\x7e\\x80-\\xff]/;\n\nfunction validateName(name) {\n\tname = `${name}`;\n\tif (invalidTokenRegex.test(name) || name === '') {\n\t\tthrow new TypeError(`${name} is not a legal HTTP header name`);\n\t}\n}\n\nfunction validateValue(value) {\n\tvalue = `${value}`;\n\tif (invalidHeaderCharRegex.test(value)) {\n\t\tthrow new TypeError(`${value} is not a legal HTTP header value`);\n\t}\n}\n\n/**\n * Find the key in the map object given a header name.\n *\n * Returns undefined if not found.\n *\n * @param   String  name  Header name\n * @return  String|Undefined\n */\nfunction find(map, name) {\n\tname = name.toLowerCase();\n\tfor (const key in map) {\n\t\tif (key.toLowerCase() === name) {\n\t\t\treturn key;\n\t\t}\n\t}\n\treturn undefined;\n}\n\nconst MAP = Symbol('map');\nclass Headers {\n\t/**\n  * Headers class\n  *\n  * @param   Object  headers  Response headers\n  * @return  Void\n  */\n\tconstructor() {\n\t\tlet init = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\n\t\tthis[MAP] = Object.create(null);\n\n\t\tif (init instanceof Headers) {\n\t\t\tconst rawHeaders = init.raw();\n\t\t\tconst headerNames = Object.keys(rawHeaders);\n\n\t\t\tfor (const headerName of headerNames) {\n\t\t\t\tfor (const value of rawHeaders[headerName]) {\n\t\t\t\t\tthis.append(headerName, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// We don't worry about converting prop to ByteString here as append()\n\t\t// will handle it.\n\t\tif (init == null) ; else if (typeof init === 'object') {\n\t\t\tconst method = init[Symbol.iterator];\n\t\t\tif (method != null) {\n\t\t\t\tif (typeof method !== 'function') {\n\t\t\t\t\tthrow new TypeError('Header pairs must be iterable');\n\t\t\t\t}\n\n\t\t\t\t// sequence<sequence<ByteString>>\n\t\t\t\t// Note: per spec we have to first exhaust the lists then process them\n\t\t\t\tconst pairs = [];\n\t\t\t\tfor (const pair of init) {\n\t\t\t\t\tif (typeof pair !== 'object' || typeof pair[Symbol.iterator] !== 'function') {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be iterable');\n\t\t\t\t\t}\n\t\t\t\t\tpairs.push(Array.from(pair));\n\t\t\t\t}\n\n\t\t\t\tfor (const pair of pairs) {\n\t\t\t\t\tif (pair.length !== 2) {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be a name/value tuple');\n\t\t\t\t\t}\n\t\t\t\t\tthis.append(pair[0], pair[1]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// record<ByteString, ByteString>\n\t\t\t\tfor (const key of Object.keys(init)) {\n\t\t\t\t\tconst value = init[key];\n\t\t\t\t\tthis.append(key, value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError('Provided initializer must be an object');\n\t\t}\n\t}\n\n\t/**\n  * Return combined header value given name\n  *\n  * @param   String  name  Header name\n  * @return  Mixed\n  */\n\tget(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key === undefined) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this[MAP][key].join(', ');\n\t}\n\n\t/**\n  * Iterate over all headers\n  *\n  * @param   Function  callback  Executed for each item with parameters (value, name, thisArg)\n  * @param   Boolean   thisArg   `this` context for callback function\n  * @return  Void\n  */\n\tforEach(callback) {\n\t\tlet thisArg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\t\tlet pairs = getHeaders(this);\n\t\tlet i = 0;\n\t\twhile (i < pairs.length) {\n\t\t\tvar _pairs$i = pairs[i];\n\t\t\tconst name = _pairs$i[0],\n\t\t\t      value = _pairs$i[1];\n\n\t\t\tcallback.call(thisArg, value, name, this);\n\t\t\tpairs = getHeaders(this);\n\t\t\ti++;\n\t\t}\n\t}\n\n\t/**\n  * Overwrite header values given name\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tset(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tthis[MAP][key !== undefined ? key : name] = [value];\n\t}\n\n\t/**\n  * Append a value onto existing header\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tappend(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tthis[MAP][key].push(value);\n\t\t} else {\n\t\t\tthis[MAP][name] = [value];\n\t\t}\n\t}\n\n\t/**\n  * Check for header name existence\n  *\n  * @param   String   name  Header name\n  * @return  Boolean\n  */\n\thas(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\treturn find(this[MAP], name) !== undefined;\n\t}\n\n\t/**\n  * Delete all header values given name\n  *\n  * @param   String  name  Header name\n  * @return  Void\n  */\n\tdelete(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tdelete this[MAP][key];\n\t\t}\n\t}\n\n\t/**\n  * Return raw headers (non-spec api)\n  *\n  * @return  Object\n  */\n\traw() {\n\t\treturn this[MAP];\n\t}\n\n\t/**\n  * Get an iterator on keys.\n  *\n  * @return  Iterator\n  */\n\tkeys() {\n\t\treturn createHeadersIterator(this, 'key');\n\t}\n\n\t/**\n  * Get an iterator on values.\n  *\n  * @return  Iterator\n  */\n\tvalues() {\n\t\treturn createHeadersIterator(this, 'value');\n\t}\n\n\t/**\n  * Get an iterator on entries.\n  *\n  * This is the default iterator of the Headers object.\n  *\n  * @return  Iterator\n  */\n\t[Symbol.iterator]() {\n\t\treturn createHeadersIterator(this, 'key+value');\n\t}\n}\nHeaders.prototype.entries = Headers.prototype[Symbol.iterator];\n\nObject.defineProperty(Headers.prototype, Symbol.toStringTag, {\n\tvalue: 'Headers',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Headers.prototype, {\n\tget: { enumerable: true },\n\tforEach: { enumerable: true },\n\tset: { enumerable: true },\n\tappend: { enumerable: true },\n\thas: { enumerable: true },\n\tdelete: { enumerable: true },\n\tkeys: { enumerable: true },\n\tvalues: { enumerable: true },\n\tentries: { enumerable: true }\n});\n\nfunction getHeaders(headers) {\n\tlet kind = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'key+value';\n\n\tconst keys = Object.keys(headers[MAP]).sort();\n\treturn keys.map(kind === 'key' ? function (k) {\n\t\treturn k.toLowerCase();\n\t} : kind === 'value' ? function (k) {\n\t\treturn headers[MAP][k].join(', ');\n\t} : function (k) {\n\t\treturn [k.toLowerCase(), headers[MAP][k].join(', ')];\n\t});\n}\n\nconst INTERNAL = Symbol('internal');\n\nfunction createHeadersIterator(target, kind) {\n\tconst iterator = Object.create(HeadersIteratorPrototype);\n\titerator[INTERNAL] = {\n\t\ttarget,\n\t\tkind,\n\t\tindex: 0\n\t};\n\treturn iterator;\n}\n\nconst HeadersIteratorPrototype = Object.setPrototypeOf({\n\tnext() {\n\t\t// istanbul ignore if\n\t\tif (!this || Object.getPrototypeOf(this) !== HeadersIteratorPrototype) {\n\t\t\tthrow new TypeError('Value of `this` is not a HeadersIterator');\n\t\t}\n\n\t\tvar _INTERNAL = this[INTERNAL];\n\t\tconst target = _INTERNAL.target,\n\t\t      kind = _INTERNAL.kind,\n\t\t      index = _INTERNAL.index;\n\n\t\tconst values = getHeaders(target, kind);\n\t\tconst len = values.length;\n\t\tif (index >= len) {\n\t\t\treturn {\n\t\t\t\tvalue: undefined,\n\t\t\t\tdone: true\n\t\t\t};\n\t\t}\n\n\t\tthis[INTERNAL].index = index + 1;\n\n\t\treturn {\n\t\t\tvalue: values[index],\n\t\t\tdone: false\n\t\t};\n\t}\n}, Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));\n\nObject.defineProperty(HeadersIteratorPrototype, Symbol.toStringTag, {\n\tvalue: 'HeadersIterator',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * Export the Headers object in a form that Node.js can consume.\n *\n * @param   Headers  headers\n * @return  Object\n */\nfunction exportNodeCompatibleHeaders(headers) {\n\tconst obj = Object.assign({ __proto__: null }, headers[MAP]);\n\n\t// http.request() only supports string as Host header. This hack makes\n\t// specifying custom Host header possible.\n\tconst hostHeaderKey = find(headers[MAP], 'Host');\n\tif (hostHeaderKey !== undefined) {\n\t\tobj[hostHeaderKey] = obj[hostHeaderKey][0];\n\t}\n\n\treturn obj;\n}\n\n/**\n * Create a Headers object from an object of headers, ignoring those that do\n * not conform to HTTP grammar productions.\n *\n * @param   Object  obj  Object of headers\n * @return  Headers\n */\nfunction createHeadersLenient(obj) {\n\tconst headers = new Headers();\n\tfor (const name of Object.keys(obj)) {\n\t\tif (invalidTokenRegex.test(name)) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (Array.isArray(obj[name])) {\n\t\t\tfor (const val of obj[name]) {\n\t\t\t\tif (invalidHeaderCharRegex.test(val)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (headers[MAP][name] === undefined) {\n\t\t\t\t\theaders[MAP][name] = [val];\n\t\t\t\t} else {\n\t\t\t\t\theaders[MAP][name].push(val);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (!invalidHeaderCharRegex.test(obj[name])) {\n\t\t\theaders[MAP][name] = [obj[name]];\n\t\t}\n\t}\n\treturn headers;\n}\n\nconst INTERNALS$1 = Symbol('Response internals');\n\n// fix an issue where \"STATUS_CODES\" aren't a named export for node <10\nconst STATUS_CODES = http.STATUS_CODES;\n\n/**\n * Response class\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nclass Response {\n\tconstructor() {\n\t\tlet body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\t\tlet opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tBody.call(this, body, opts);\n\n\t\tconst status = opts.status || 200;\n\t\tconst headers = new Headers(opts.headers);\n\n\t\tif (body != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(body);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tthis[INTERNALS$1] = {\n\t\t\turl: opts.url,\n\t\t\tstatus,\n\t\t\tstatusText: opts.statusText || STATUS_CODES[status],\n\t\t\theaders,\n\t\t\tcounter: opts.counter\n\t\t};\n\t}\n\n\tget url() {\n\t\treturn this[INTERNALS$1].url || '';\n\t}\n\n\tget status() {\n\t\treturn this[INTERNALS$1].status;\n\t}\n\n\t/**\n  * Convenience property representing if the request ended normally\n  */\n\tget ok() {\n\t\treturn this[INTERNALS$1].status >= 200 && this[INTERNALS$1].status < 300;\n\t}\n\n\tget redirected() {\n\t\treturn this[INTERNALS$1].counter > 0;\n\t}\n\n\tget statusText() {\n\t\treturn this[INTERNALS$1].statusText;\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$1].headers;\n\t}\n\n\t/**\n  * Clone this response\n  *\n  * @return  Response\n  */\n\tclone() {\n\t\treturn new Response(clone(this), {\n\t\t\turl: this.url,\n\t\t\tstatus: this.status,\n\t\t\tstatusText: this.statusText,\n\t\t\theaders: this.headers,\n\t\t\tok: this.ok,\n\t\t\tredirected: this.redirected\n\t\t});\n\t}\n}\n\nBody.mixIn(Response.prototype);\n\nObject.defineProperties(Response.prototype, {\n\turl: { enumerable: true },\n\tstatus: { enumerable: true },\n\tok: { enumerable: true },\n\tredirected: { enumerable: true },\n\tstatusText: { enumerable: true },\n\theaders: { enumerable: true },\n\tclone: { enumerable: true }\n});\n\nObject.defineProperty(Response.prototype, Symbol.toStringTag, {\n\tvalue: 'Response',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nconst INTERNALS$2 = Symbol('Request internals');\nconst URL = Url.URL || whatwgUrl.URL;\n\n// fix an issue where \"format\", \"parse\" aren't a named export for node <10\nconst parse_url = Url.parse;\nconst format_url = Url.format;\n\n/**\n * Wrapper around `new URL` to handle arbitrary URLs\n *\n * @param  {string} urlStr\n * @return {void}\n */\nfunction parseURL(urlStr) {\n\t/*\n \tCheck whether the URL is absolute or not\n \t\tScheme: https://tools.ietf.org/html/rfc3986#section-3.1\n \tAbsolute URL: https://tools.ietf.org/html/rfc3986#section-4.3\n */\n\tif (/^[a-zA-Z][a-zA-Z\\d+\\-.]*:/.exec(urlStr)) {\n\t\turlStr = new URL(urlStr).toString();\n\t}\n\n\t// Fallback to old implementation for arbitrary URLs\n\treturn parse_url(urlStr);\n}\n\nconst streamDestructionSupported = 'destroy' in Stream.Readable.prototype;\n\n/**\n * Check if a value is an instance of Request.\n *\n * @param   Mixed   input\n * @return  Boolean\n */\nfunction isRequest(input) {\n\treturn typeof input === 'object' && typeof input[INTERNALS$2] === 'object';\n}\n\nfunction isAbortSignal(signal) {\n\tconst proto = signal && typeof signal === 'object' && Object.getPrototypeOf(signal);\n\treturn !!(proto && proto.constructor.name === 'AbortSignal');\n}\n\n/**\n * Request class\n *\n * @param   Mixed   input  Url or Request instance\n * @param   Object  init   Custom options\n * @return  Void\n */\nclass Request {\n\tconstructor(input) {\n\t\tlet init = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tlet parsedURL;\n\n\t\t// normalize input\n\t\tif (!isRequest(input)) {\n\t\t\tif (input && input.href) {\n\t\t\t\t// in order to support Node.js' Url objects; though WHATWG's URL objects\n\t\t\t\t// will fall into this branch also (since their `toString()` will return\n\t\t\t\t// `href` property anyway)\n\t\t\t\tparsedURL = parseURL(input.href);\n\t\t\t} else {\n\t\t\t\t// coerce input to a string before attempting to parse\n\t\t\t\tparsedURL = parseURL(`${input}`);\n\t\t\t}\n\t\t\tinput = {};\n\t\t} else {\n\t\t\tparsedURL = parseURL(input.url);\n\t\t}\n\n\t\tlet method = init.method || input.method || 'GET';\n\t\tmethod = method.toUpperCase();\n\n\t\tif ((init.body != null || isRequest(input) && input.body !== null) && (method === 'GET' || method === 'HEAD')) {\n\t\t\tthrow new TypeError('Request with GET/HEAD method cannot have body');\n\t\t}\n\n\t\tlet inputBody = init.body != null ? init.body : isRequest(input) && input.body !== null ? clone(input) : null;\n\n\t\tBody.call(this, inputBody, {\n\t\t\ttimeout: init.timeout || input.timeout || 0,\n\t\t\tsize: init.size || input.size || 0\n\t\t});\n\n\t\tconst headers = new Headers(init.headers || input.headers || {});\n\n\t\tif (inputBody != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(inputBody);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tlet signal = isRequest(input) ? input.signal : null;\n\t\tif ('signal' in init) signal = init.signal;\n\n\t\tif (signal != null && !isAbortSignal(signal)) {\n\t\t\tthrow new TypeError('Expected signal to be an instanceof AbortSignal');\n\t\t}\n\n\t\tthis[INTERNALS$2] = {\n\t\t\tmethod,\n\t\t\tredirect: init.redirect || input.redirect || 'follow',\n\t\t\theaders,\n\t\t\tparsedURL,\n\t\t\tsignal\n\t\t};\n\n\t\t// node-fetch-only options\n\t\tthis.follow = init.follow !== undefined ? init.follow : input.follow !== undefined ? input.follow : 20;\n\t\tthis.compress = init.compress !== undefined ? init.compress : input.compress !== undefined ? input.compress : true;\n\t\tthis.counter = init.counter || input.counter || 0;\n\t\tthis.agent = init.agent || input.agent;\n\t}\n\n\tget method() {\n\t\treturn this[INTERNALS$2].method;\n\t}\n\n\tget url() {\n\t\treturn format_url(this[INTERNALS$2].parsedURL);\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$2].headers;\n\t}\n\n\tget redirect() {\n\t\treturn this[INTERNALS$2].redirect;\n\t}\n\n\tget signal() {\n\t\treturn this[INTERNALS$2].signal;\n\t}\n\n\t/**\n  * Clone this request\n  *\n  * @return  Request\n  */\n\tclone() {\n\t\treturn new Request(this);\n\t}\n}\n\nBody.mixIn(Request.prototype);\n\nObject.defineProperty(Request.prototype, Symbol.toStringTag, {\n\tvalue: 'Request',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Request.prototype, {\n\tmethod: { enumerable: true },\n\turl: { enumerable: true },\n\theaders: { enumerable: true },\n\tredirect: { enumerable: true },\n\tclone: { enumerable: true },\n\tsignal: { enumerable: true }\n});\n\n/**\n * Convert a Request to Node.js http request options.\n *\n * @param   Request  A Request instance\n * @return  Object   The options object to be passed to http.request\n */\nfunction getNodeRequestOptions(request) {\n\tconst parsedURL = request[INTERNALS$2].parsedURL;\n\tconst headers = new Headers(request[INTERNALS$2].headers);\n\n\t// fetch step 1.3\n\tif (!headers.has('Accept')) {\n\t\theaders.set('Accept', '*/*');\n\t}\n\n\t// Basic fetch\n\tif (!parsedURL.protocol || !parsedURL.hostname) {\n\t\tthrow new TypeError('Only absolute URLs are supported');\n\t}\n\n\tif (!/^https?:$/.test(parsedURL.protocol)) {\n\t\tthrow new TypeError('Only HTTP(S) protocols are supported');\n\t}\n\n\tif (request.signal && request.body instanceof Stream.Readable && !streamDestructionSupported) {\n\t\tthrow new Error('Cancellation of streamed requests with AbortSignal is not supported in node < 8');\n\t}\n\n\t// HTTP-network-or-cache fetch steps 2.4-2.7\n\tlet contentLengthValue = null;\n\tif (request.body == null && /^(POST|PUT)$/i.test(request.method)) {\n\t\tcontentLengthValue = '0';\n\t}\n\tif (request.body != null) {\n\t\tconst totalBytes = getTotalBytes(request);\n\t\tif (typeof totalBytes === 'number') {\n\t\t\tcontentLengthValue = String(totalBytes);\n\t\t}\n\t}\n\tif (contentLengthValue) {\n\t\theaders.set('Content-Length', contentLengthValue);\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.11\n\tif (!headers.has('User-Agent')) {\n\t\theaders.set('User-Agent', 'node-fetch/1.0 (+https://github.com/bitinn/node-fetch)');\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.15\n\tif (request.compress && !headers.has('Accept-Encoding')) {\n\t\theaders.set('Accept-Encoding', 'gzip,deflate');\n\t}\n\n\tlet agent = request.agent;\n\tif (typeof agent === 'function') {\n\t\tagent = agent(parsedURL);\n\t}\n\n\tif (!headers.has('Connection') && !agent) {\n\t\theaders.set('Connection', 'close');\n\t}\n\n\t// HTTP-network fetch step 4.2\n\t// chunked encoding is handled by Node.js\n\n\treturn Object.assign({}, parsedURL, {\n\t\tmethod: request.method,\n\t\theaders: exportNodeCompatibleHeaders(headers),\n\t\tagent\n\t});\n}\n\n/**\n * abort-error.js\n *\n * AbortError interface for cancelled requests\n */\n\n/**\n * Create AbortError instance\n *\n * @param   String      message      Error message for human\n * @return  AbortError\n */\nfunction AbortError(message) {\n  Error.call(this, message);\n\n  this.type = 'aborted';\n  this.message = message;\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nAbortError.prototype = Object.create(Error.prototype);\nAbortError.prototype.constructor = AbortError;\nAbortError.prototype.name = 'AbortError';\n\nconst URL$1 = Url.URL || whatwgUrl.URL;\n\n// fix an issue where \"PassThrough\", \"resolve\" aren't a named export for node <10\nconst PassThrough$1 = Stream.PassThrough;\n\nconst isDomainOrSubdomain = function isDomainOrSubdomain(destination, original) {\n\tconst orig = new URL$1(original).hostname;\n\tconst dest = new URL$1(destination).hostname;\n\n\treturn orig === dest || orig[orig.length - dest.length - 1] === '.' && orig.endsWith(dest);\n};\n\n/**\n * Fetch function\n *\n * @param   Mixed    url   Absolute url or Request instance\n * @param   Object   opts  Fetch options\n * @return  Promise\n */\nfunction fetch(url, opts) {\n\n\t// allow custom promise\n\tif (!fetch.Promise) {\n\t\tthrow new Error('native promise missing, set fetch.Promise to your favorite alternative');\n\t}\n\n\tBody.Promise = fetch.Promise;\n\n\t// wrap http.request into fetch\n\treturn new fetch.Promise(function (resolve, reject) {\n\t\t// build request object\n\t\tconst request = new Request(url, opts);\n\t\tconst options = getNodeRequestOptions(request);\n\n\t\tconst send = (options.protocol === 'https:' ? https : http).request;\n\t\tconst signal = request.signal;\n\n\t\tlet response = null;\n\n\t\tconst abort = function abort() {\n\t\t\tlet error = new AbortError('The user aborted a request.');\n\t\t\treject(error);\n\t\t\tif (request.body && request.body instanceof Stream.Readable) {\n\t\t\t\trequest.body.destroy(error);\n\t\t\t}\n\t\t\tif (!response || !response.body) return;\n\t\t\tresponse.body.emit('error', error);\n\t\t};\n\n\t\tif (signal && signal.aborted) {\n\t\t\tabort();\n\t\t\treturn;\n\t\t}\n\n\t\tconst abortAndFinalize = function abortAndFinalize() {\n\t\t\tabort();\n\t\t\tfinalize();\n\t\t};\n\n\t\t// send request\n\t\tconst req = send(options);\n\t\tlet reqTimeout;\n\n\t\tif (signal) {\n\t\t\tsignal.addEventListener('abort', abortAndFinalize);\n\t\t}\n\n\t\tfunction finalize() {\n\t\t\treq.abort();\n\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\tclearTimeout(reqTimeout);\n\t\t}\n\n\t\tif (request.timeout) {\n\t\t\treq.once('socket', function (socket) {\n\t\t\t\treqTimeout = setTimeout(function () {\n\t\t\t\t\treject(new FetchError(`network timeout at: ${request.url}`, 'request-timeout'));\n\t\t\t\t\tfinalize();\n\t\t\t\t}, request.timeout);\n\t\t\t});\n\t\t}\n\n\t\treq.on('error', function (err) {\n\t\t\treject(new FetchError(`request to ${request.url} failed, reason: ${err.message}`, 'system', err));\n\t\t\tfinalize();\n\t\t});\n\n\t\treq.on('response', function (res) {\n\t\t\tclearTimeout(reqTimeout);\n\n\t\t\tconst headers = createHeadersLenient(res.headers);\n\n\t\t\t// HTTP fetch step 5\n\t\t\tif (fetch.isRedirect(res.statusCode)) {\n\t\t\t\t// HTTP fetch step 5.2\n\t\t\t\tconst location = headers.get('Location');\n\n\t\t\t\t// HTTP fetch step 5.3\n\t\t\t\tlet locationURL = null;\n\t\t\t\ttry {\n\t\t\t\t\tlocationURL = location === null ? null : new URL$1(location, request.url).toString();\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// error here can only be invalid URL in Location: header\n\t\t\t\t\t// do not throw when options.redirect == manual\n\t\t\t\t\t// let the user extract the errorneous redirect URL\n\t\t\t\t\tif (request.redirect !== 'manual') {\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with an invalid redirect URL: ${location}`, 'invalid-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// HTTP fetch step 5.5\n\t\t\t\tswitch (request.redirect) {\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with a redirect, redirect mode is set to error: ${request.url}`, 'no-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase 'manual':\n\t\t\t\t\t\t// node-fetch-specific step: make manual redirect a bit easier to use by setting the Location header value to the resolved URL.\n\t\t\t\t\t\tif (locationURL !== null) {\n\t\t\t\t\t\t\t// handle corrupted header\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\theaders.set('Location', locationURL);\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\t// istanbul ignore next: nodejs server prevent invalid response headers, we can't test this through normal request\n\t\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'follow':\n\t\t\t\t\t\t// HTTP-redirect fetch step 2\n\t\t\t\t\t\tif (locationURL === null) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 5\n\t\t\t\t\t\tif (request.counter >= request.follow) {\n\t\t\t\t\t\t\treject(new FetchError(`maximum redirect reached at: ${request.url}`, 'max-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 6 (counter increment)\n\t\t\t\t\t\t// Create a new Request object.\n\t\t\t\t\t\tconst requestOpts = {\n\t\t\t\t\t\t\theaders: new Headers(request.headers),\n\t\t\t\t\t\t\tfollow: request.follow,\n\t\t\t\t\t\t\tcounter: request.counter + 1,\n\t\t\t\t\t\t\tagent: request.agent,\n\t\t\t\t\t\t\tcompress: request.compress,\n\t\t\t\t\t\t\tmethod: request.method,\n\t\t\t\t\t\t\tbody: request.body,\n\t\t\t\t\t\t\tsignal: request.signal,\n\t\t\t\t\t\t\ttimeout: request.timeout,\n\t\t\t\t\t\t\tsize: request.size\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif (!isDomainOrSubdomain(request.url, locationURL)) {\n\t\t\t\t\t\t\tfor (const name of ['authorization', 'www-authenticate', 'cookie', 'cookie2']) {\n\t\t\t\t\t\t\t\trequestOpts.headers.delete(name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 9\n\t\t\t\t\t\tif (res.statusCode !== 303 && request.body && getTotalBytes(request) === null) {\n\t\t\t\t\t\t\treject(new FetchError('Cannot follow redirect with body being a readable stream', 'unsupported-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 11\n\t\t\t\t\t\tif (res.statusCode === 303 || (res.statusCode === 301 || res.statusCode === 302) && request.method === 'POST') {\n\t\t\t\t\t\t\trequestOpts.method = 'GET';\n\t\t\t\t\t\t\trequestOpts.body = undefined;\n\t\t\t\t\t\t\trequestOpts.headers.delete('content-length');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 15\n\t\t\t\t\t\tresolve(fetch(new Request(locationURL, requestOpts)));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// prepare response\n\t\t\tres.once('end', function () {\n\t\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\t});\n\t\t\tlet body = res.pipe(new PassThrough$1());\n\n\t\t\tconst response_options = {\n\t\t\t\turl: request.url,\n\t\t\t\tstatus: res.statusCode,\n\t\t\t\tstatusText: res.statusMessage,\n\t\t\t\theaders: headers,\n\t\t\t\tsize: request.size,\n\t\t\t\ttimeout: request.timeout,\n\t\t\t\tcounter: request.counter\n\t\t\t};\n\n\t\t\t// HTTP-network fetch step 12.1.1.3\n\t\t\tconst codings = headers.get('Content-Encoding');\n\n\t\t\t// HTTP-network fetch step 12.1.1.4: handle content codings\n\n\t\t\t// in following scenarios we ignore compression support\n\t\t\t// 1. compression support is disabled\n\t\t\t// 2. HEAD request\n\t\t\t// 3. no Content-Encoding header\n\t\t\t// 4. no content response (204)\n\t\t\t// 5. content not modified response (304)\n\t\t\tif (!request.compress || request.method === 'HEAD' || codings === null || res.statusCode === 204 || res.statusCode === 304) {\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For Node v6+\n\t\t\t// Be less strict when decoding compressed responses, since sometimes\n\t\t\t// servers send slightly invalid responses that are still accepted\n\t\t\t// by common browsers.\n\t\t\t// Always using Z_SYNC_FLUSH is what cURL does.\n\t\t\tconst zlibOptions = {\n\t\t\t\tflush: zlib.Z_SYNC_FLUSH,\n\t\t\t\tfinishFlush: zlib.Z_SYNC_FLUSH\n\t\t\t};\n\n\t\t\t// for gzip\n\t\t\tif (codings == 'gzip' || codings == 'x-gzip') {\n\t\t\t\tbody = body.pipe(zlib.createGunzip(zlibOptions));\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for deflate\n\t\t\tif (codings == 'deflate' || codings == 'x-deflate') {\n\t\t\t\t// handle the infamous raw deflate response from old servers\n\t\t\t\t// a hack for old IIS and Apache servers\n\t\t\t\tconst raw = res.pipe(new PassThrough$1());\n\t\t\t\traw.once('data', function (chunk) {\n\t\t\t\t\t// see http://stackoverflow.com/questions/37519828\n\t\t\t\t\tif ((chunk[0] & 0x0F) === 0x08) {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflate());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflateRaw());\n\t\t\t\t\t}\n\t\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for br\n\t\t\tif (codings == 'br' && typeof zlib.createBrotliDecompress === 'function') {\n\t\t\t\tbody = body.pipe(zlib.createBrotliDecompress());\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// otherwise, use response as-is\n\t\t\tresponse = new Response(body, response_options);\n\t\t\tresolve(response);\n\t\t});\n\n\t\twriteToStream(req, request);\n\t});\n}\n/**\n * Redirect code matching\n *\n * @param   Number   code  Status code\n * @return  Boolean\n */\nfetch.isRedirect = function (code) {\n\treturn code === 301 || code === 302 || code === 303 || code === 307 || code === 308;\n};\n\n// expose Promise\nfetch.Promise = global.Promise;\n\nexport default fetch;\nexport { Headers, Request, Response, FetchError };\n","import fetch from 'node-fetch';\n\nexport default fetch;\n","import fetchProxy from '@fetch';\nimport template from './template';\nimport { getAnalyticsHeader } from './analytics';\n\nexport function getRequestConfiguration(options, transformResponse, contentType) {\n    options.pathParameters = options.pathParameters || {};\n    options.pathParameters.contentType = contentType;\n    options.pathParameters.protocol = options.pathParameters.protocol || 'https';\n    const url = template(options.url, options.pathParameters);\n    const headers = getAnalyticsHeader();\n    headers['Accept'] = 'application/json'; //eslint-disable-line dot-notation\n    if (options.headers && options.headers.trackingId) {\n        headers['Tracking-ID'] = options.headers.trackingId;\n    }\n\n    let requestOptions = {\n        method: 'GET',\n        headers: headers,\n        mode: 'cors',\n        ...options.abortSignal && { signal: options.abortSignal }\n    };\n\n    if (transformResponse) {\n        requestOptions = { ...requestOptions, transformResponse };\n    }\n    return {\n        options, url, requestOptions\n    };\n}\n\nexport function performRequest(options, url, requestOptions = {}, getData) {\n    return fetchProxy(withQueryParams(options, url), requestOptions)\n        .then(async (response) => {\n            const data = await getData(response);\n            if (!response.ok) {\n                return Promise.reject({ response, data });\n            }\n\n            if (options._getOriginalResponse) {\n                return response;\n            }\n            if (options.requestType === 'batch' && response.status === 202) {\n                return response.headers.location;\n            }\n\n            const trackingIdHeader = response.headers &&\n                (response.headers.get('tracking-id') || response.headers.get('Tracking-ID'));\n\n            return {\n                data,\n                ...trackingIdHeader && { trackingId: trackingIdHeader }\n            };\n        })\n        .catch((error = {}) => {\n            if (requestOptions.signal && requestOptions.signal.aborted === true) {\n                return Promise.reject(error);\n            }\n\n            const { response, data } = error;\n            const err = options._getOriginalResponse ? response || error :\n                errorResponse(data, response && response.status) || error;\n\n            return Promise.reject(err);\n        });\n}\n\nexport function getResponseText(response) {\n    return response.text();\n}\n\nexport function getResponseJson(response) {\n    return response.json();\n}\n\nconst errorResponse = (data, status) => {\n    if (!data) {\n        return undefined;\n    }\n\n    const { error, detailedError } = data;\n\n    // preflight response failed\n    if (!error || !detailedError) {\n        return data;\n    }\n\n    return {\n        message: error.description,\n        data: detailedError,\n        status\n    };\n};\n\nfunction withQueryParams(options, url) {\n    if (!options.queryParameters) {\n        return url;\n    }\n\n    const queryString = Object.keys(options.queryParameters)\n        .map(function(key) {\n            return mapQueryParamToKeyValueString(options, key);\n        })\n        .join('&');\n    return url + '?' + queryString;\n}\n\nfunction mapQueryParamToKeyValueString(options, key) {\n    const queryParamValue = options.queryParameters[key];\n    let result = '';\n    if (Array.isArray(queryParamValue)) {\n        result = queryParamValue.map(function(value) {\n            return createKeyValueString(key, value);\n        }).join('&');\n    } else {\n        result = createKeyValueString(key, options.queryParameters[key]);\n    }\n    return result;\n}\n\nfunction createKeyValueString(key, value) {\n    return encodeURIComponent(key) + '=' + encodeURIComponent(value);\n}\n","import template from './template';\nimport { getAnalyticsHeader } from './analytics';\nimport isString from 'lodash/isString';\nimport isObject from 'lodash/isObject';\nimport { getRequestConfiguration, performRequest, getResponseJson } from './helpers';\n\nfunction stringify(obj) {\n    try {\n        return JSON.stringify(obj);\n    } catch (ex) {\n        return null;\n    }\n}\n\nfunction setHeader(requestOptions, headerName, headerValue) {\n    if (!requestOptions.headers) {\n        requestOptions.headers = {};\n    }\n\n    const header = requestOptions.headers[headerName] || requestOptions.headers[headerName.toLowerCase()];\n    if (!header) {\n        requestOptions.headers[headerName] = headerValue;\n    }\n}\n\nfunction addObjectBodyParams(bodyParams, requestOptions) {\n    const body = stringify(bodyParams);\n    if (!body) {\n        throw new Error('Unsupported request body type: ' + bodyParams);\n    }\n    setHeader(requestOptions, 'Content-Type', 'application/json');\n    return body;\n}\n\nfunction addBodyParams(options, requestOptions) {\n    const bodyParams = options.bodyParameters;\n    let body;\n    if (!bodyParams) {\n        return;\n    }\n\n    if (isObject(bodyParams)) {\n        body = addObjectBodyParams(bodyParams, requestOptions);\n    } else if (isString(bodyParams)) {\n        body = bodyParams;\n    }\n\n    requestOptions.body = body;\n}\n\nexport const json = {\n    /**\n     * Executes a request and processes the response as JSON.\n     * @method get\n     * @param {Object} options Specifies the details of the request.\n     * @param {String} options.url The URL to request.\n     * @param {Object} [options.queryParameters] The data to pass as GET parameters with the request.\n     * @param {Object} [options.pathParameters] The data to use as {placeholders} in url.\n     * @param {Function} [transformResponse] The custom response transformer function.\n     * @return {Promise} Returns a promise\n     */\n    get: function(options, transformResponse) {\n        const config = getRequestConfiguration(options, transformResponse, 'json');\n        return performRequest(config.options, config.url, config.requestOptions, getResponseJson);\n    },\n\n    /**\n     * Executes a request and processes the response as JSON.\n     * @method post\n     * @param {Object} options Specifies the details of the request.\n     * @param {String} options.url The URL to request.\n     * @param {Object} [options.queryParameters] The data to pass as Url parameters with the request.\n     * @param {Object} [options.pathParameters] The data to use as {placeholders} in url.\n     * @param {Object} [options.bodyParameters] The data to pass to request body.\n     * @return {Promise} Returns a promise\n     */\n    post: function(options) {\n        options.pathParameters = options.pathParameters || {};\n        options.pathParameters.contentType = 'json';\n        options.pathParameters.protocol = options.pathParameters.protocol || 'https';\n\n        const url = template(options.url, options.pathParameters);\n        const headers = getAnalyticsHeader();\n        headers['Accept'] = 'application/json'; //eslint-disable-line dot-notation\n        if (options.headers && options.headers.trackingId) {\n            headers['Tracking-ID'] = options.headers.trackingId;\n        }\n        const requestOptions = {\n            method: 'POST',\n            headers: headers,\n            mode: 'cors',\n            redirect: 'follow',\n            ...options.abortSignal && { signal: options.abortSignal }\n        };\n\n        addBodyParams(options, requestOptions);\n\n        return performRequest(options, url, requestOptions, getResponseJson);\n    }\n};\n","import { getRequestConfiguration, performRequest, getResponseText } from './helpers';\n\nexport const text = {\n    /**\n     * Executes a request and processes the response as text.\n     * @method get\n     * @param {Object} options Specifies the details of the request.\n     * @param {String} options.url The URL to request.\n     * @param {Object} [options.queryParameters] The data to pass as GET parameters with the request.\n     * @param {Object} [options.pathParameters] The data to use as {placeholders} in url.\n     * @param {Function} [transformResponse] The custom response transformer function.\n     * @return {Promise} Returns a promise\n     */\n    get: function(options, transformResponse) {\n        const config = getRequestConfiguration(options, transformResponse, 'text');\n        return performRequest(config.options, config.url, config.requestOptions, getResponseText);\n    }\n};\n","import { json } from './json';\nimport { text } from './text';\n\nlet useHttp = false;\n\nconst setUseHttp = (use) => {\n    useHttp = use;\n};\n\nconst getProtocol = () => {\n    return useHttp ? 'http' : 'https';\n};\n\nexport default {\n    useHttp: setUseHttp,\n    protocol: getProtocol,\n\n    get: (options, transformResponse) => {\n        options.protocol = (options && options.protocol) || getProtocol();\n        const pathParameters = options.pathParameters;\n        if (pathParameters && pathParameters.contentType === 'text') {\n            return text.get(options, transformResponse);\n        }\n        return json.get(options, transformResponse);\n    },\n\n    post: (options) => {\n        options.protocol = options.protocol || getProtocol();\n        return json.post(options);\n    }\n};\n","import parameterApplications from 'common/parameterApplications';\n\nfunction isQueryParameter(fieldEntry) {\n    const field = fieldEntry[1];\n    return !field.application || field.application === parameterApplications.QUERY;\n}\n\nfunction isPathParam(fieldEntry) {\n    const field = fieldEntry[1];\n    return field.application === parameterApplications.PATH;\n}\n\nfunction isPostParam(fieldEntry) {\n    const field = fieldEntry[1];\n    return field.application === parameterApplications.POST;\n}\n\nfunction isOtherParam(fieldEntry) {\n    const field = fieldEntry[1];\n    return field.application === parameterApplications.OTHER;\n}\n\nfunction isHeaderParam(fieldEntry) {\n    const field = fieldEntry[1];\n    return field.application === parameterApplications.HEADER;\n}\n\nfunction getFieldEntryNames(fieldEntry) {\n    return {\n        name: fieldEntry[0],\n        fieldName: fieldEntry[2]\n    };\n}\n\nfunction toEntry(source) {\n    return (fieldName) => {\n        const name = (source[fieldName] && source[fieldName].name) || fieldName;\n        return [name, source[fieldName], fieldName];\n    };\n}\n\nfunction createParamsNames(fields, paramsFilterFunction) {\n    let params = Object.keys(fields).map(toEntry(fields));\n    params = params.filter(paramsFilterFunction);\n    params = params.map(getFieldEntryNames);\n\n    return params;\n}\n\nfunction createQueryParamsNames(fields) {\n    return createParamsNames(fields, isQueryParameter);\n}\n\nfunction createPathParamsNames(fields) {\n    return createParamsNames(fields, isPathParam);\n}\n\nfunction createPostParamsNames(fields) {\n    return createParamsNames(fields, isPostParam);\n}\n\nfunction createOtherParamsNames(fields) {\n    return createParamsNames(fields, isOtherParam);\n}\n\nfunction createHeaderParamsNames(fields) {\n    return createParamsNames(fields, isHeaderParam);\n}\n\nfunction createParams(fields, createParamNamesFunction, requestOptions) {\n    const params = {};\n    const paramNames = createParamNamesFunction(fields);\n    paramNames.forEach((param) => {\n        if (param.fieldName in requestOptions) {\n            const field = fields[param.fieldName];\n            const paramValue = requestOptions[param.fieldName];\n            if (field.cast) {\n                field.cast(paramValue, params);\n            } else {\n                params[param.name] = paramValue;\n            }\n        }\n    });\n\n    return params;\n}\n\nexport function createRequestParams(fields, requestOptions) {\n    return {\n        pathParams: createParams(fields, createPathParamsNames, requestOptions),\n        queryParams: createParams(fields, createQueryParamsNames, requestOptions),\n        postParams: createParams(fields, createPostParamsNames, requestOptions),\n        otherParams: createParams(fields, createOtherParamsNames, requestOptions),\n        headerParams: createParams(fields, createHeaderParamsNames, requestOptions)\n    };\n}\n","import parameterApplications from 'common/parameterApplications';\n\nconst fieldName = 'contentType';\n\nexport function setField(fields) {\n    const copiedFields = Object.assign({}, fields);\n    copiedFields[fieldName] = {\n        application: parameterApplications.PATH\n    };\n    return copiedFields;\n}\n\nexport function setValue(requestOptions) {\n    requestOptions[fieldName] = requestOptions[fieldName] || 'json';\n    return requestOptions;\n}\n","import http from '@http';\nimport { createRequestParams } from '../request/requestParamsFactory';\nimport isEmpty from 'lodash/isEmpty';\nimport {setField, setValue} from '../request/contentTypeConfigurer';\n\nexport const singleRequestServiceFactory = (endpoint) => {\n    return (fields, options, abortSignal) => {\n        const { pathParams, queryParams, postParams, headerParams } = createRequestParams(\n            setField(fields),\n            setValue(options)\n        );\n\n        const httpOptions = {\n            headers: headerParams,\n            url: '{protocol}://' + endpoint,\n            pathParameters: pathParams,\n            queryParameters: queryParams,\n            abortSignal\n        };\n\n        if (isEmpty(postParams)) {\n            return http.get(httpOptions);\n        } else {\n            httpOptions.bodyParameters = postParams;\n            return http.post(httpOptions);\n        }\n    };\n};\n","export default {\n    or: (value, defaultValue) => {\n        return value || defaultValue;\n    },\n\n    required: (value, error) => {\n        if (value === undefined || value === null) {\n            throw new TypeError(error);\n        }\n        return value;\n    }\n};\n","/* eslint-disable object-curly-spacing */\n/* eslint-disable no-undef */\nimport template from './template';\n\nfunction createKeyValueString(key, value) {\n    return encodeURIComponent(key) + '=' + encodeURIComponent(value);\n}\n\nfunction mapQueryParamToKeyValueString(key, queryParams) {\n    const queryParamValue = queryParams[key];\n    let result = '';\n    if (Array.isArray(queryParamValue)) {\n        result = queryParamValue.map(function(value) {\n            return createKeyValueString(key, value);\n        }).join('&');\n    } else {\n        result = createKeyValueString(key, queryParams[key]);\n    }\n    return result;\n}\n\nfunction withQueryParams(url, queryParams) {\n    if (!queryParams) {\n        return url;\n    }\n\n    const queryString = Object.keys(queryParams)\n        .map((key) => {\n            return mapQueryParamToKeyValueString(key, queryParams);\n        })\n        .join('&');\n    return url + '?' + queryString;\n}\n\nexport default (urlTemplate, pathParams, queryParams) => {\n    const url = template(urlTemplate, pathParams);\n    return withQueryParams(url, queryParams);\n};\n","import http from '@http';\nimport asyncRedirectModeFactory from './asyncRedirectModeFactory';\n\nexport function batchRequestStrategy(options) {\n    let endpoint;\n\n    switch (options.batchMode) {\n    case 'async':\n        endpoint = options.endpoints.async;\n        break;\n    case 'sync':\n        endpoint = options.endpoints.sync;\n        break;\n    default: // same as redirect\n        endpoint = options.endpoints.async;\n        options.queryParams.redirectMode = 'manual';\n        break;\n    }\n\n    if (options.batchMode !== 'sync' && options.waitTimeSeconds) {\n        options.queryParams.waitTimeSeconds = options.waitTimeSeconds;\n    } else if (options.queryParams && options.queryParams.waitTimeSeconds) {\n        delete options.queryParams.waitTimeSeconds;\n    }\n\n    return http.post({\n        url: '{protocol}://' + endpoint,\n        queryParameters: options.queryParams,\n        bodyParameters: options.bodyParams,\n        headers: options.headers,\n        requestType: 'batch',\n        ...options.abortSignal && { abortSignal: options.abortSignal }\n    }).then((response) => {\n        if (options.queryParams.redirectMode === 'manual') {\n            // if batch request is async with manual mode - fetch the results using the url provided\n            return asyncRedirectModeFactory(response);\n        }\n        return response;\n    });\n}\n","import http from '@http';\nimport { origin } from 'endpoints';\n\nexport default urlResponse => http.get({ url: '{protocol}://' + origin + urlResponse });\n","import utils from 'rest/utils';\nimport urlBuilder from '../../requester/urlBuilder';\nimport {createRequestParams} from '../request/requestParamsFactory';\nimport isEmpty from 'lodash/isEmpty';\nimport {setField, setValue} from '../request/contentTypeConfigurer';\n\nimport {batchRequestStrategy} from './batchRequestStrategy';\n\nexport const batchRequestServiceFactory = (maxNoOfElementsInBatchRequest, batchEndpoints) => {\n    return (fields, options, abortSignal) => {\n        const queryParams = {},\n            bodyParams = {};\n\n        queryParams.key = options.key;\n\n        const headers = {};\n        if (options.trackingId) {\n            headers.trackingId = options.trackingId;\n        }\n\n        const rawBatchItems = utils.required(options.batchItems);\n\n        fields = setField(fields);\n        bodyParams.batchItems = rawBatchItems.map(function(item) {\n            const { pathParams, queryParams, postParams } = createRequestParams(\n                fields, setValue(item)\n            );\n\n            const request = {\n                query: urlBuilder(batchEndpoints.single, pathParams, queryParams)\n            };\n\n            if (!isEmpty(postParams)) {\n                request.post = postParams;\n            }\n\n            return request;\n        });\n\n        const batchMode = options.batchMode ||\n            (bodyParams.batchItems.length <= maxNoOfElementsInBatchRequest ? 'sync' : 'redirect');\n\n        return batchRequestStrategy({\n            batchMode,\n            waitTimeSeconds: options.waitTimeSeconds,\n            queryParams: queryParams,\n            bodyParams: bodyParams,\n            headers,\n            endpoints: {\n                sync: batchEndpoints.batchSync,\n                async: batchEndpoints.batch\n            },\n            abortSignal\n        });\n    };\n};\n","import { createRequestParams } from '../request/requestParamsFactory';\nimport { batchRequestStrategy } from './batchRequestStrategy';\n\nconst mainPostParamsName = ['origins', 'destinations'];\n\nfunction getOptionalBodyParams(postParams) {\n    const optionalBodyParamsNames = Object.keys(postParams)\n        .filter(paramName => mainPostParamsName.indexOf(paramName) === -1);\n\n    if (!optionalBodyParamsNames.length) {\n        return null;\n    }\n\n    return optionalBodyParamsNames.reduce((accumulator, paramName) => {\n        accumulator[paramName] = postParams[paramName];\n        return accumulator;\n    }, {});\n}\n\nfunction getBodyParams(postParams) {\n    const bodyParams = {\n            origins: postParams.origins,\n            destinations: postParams.destinations\n        },\n        optionalBodyParams = getOptionalBodyParams(postParams);\n\n    if (optionalBodyParams) {\n        bodyParams.options = {\n            post: optionalBodyParams\n        };\n    }\n\n    return bodyParams;\n}\n\nexport function matrixFactory(maxNoOfElementsInBatchRequest, matrixEndpoints) {\n    return (fields, options, abortSignal) => {\n        const requestParams = createRequestParams(fields, options);\n        const bodyParams = getBodyParams(requestParams.postParams);\n        const queryParams = requestParams.queryParams;\n        const headers = requestParams.headerParams;\n\n        const batchMode = options.batchMode ||\n            (bodyParams.origins.length * bodyParams.destinations.length <= maxNoOfElementsInBatchRequest ?\n                'sync' : 'redirect');\n\n        return batchRequestStrategy({\n            batchMode,\n            headers,\n            waitTimeSeconds: options.waitTimeSeconds,\n            queryParams: queryParams,\n            bodyParams: bodyParams,\n            endpoints: {\n                sync: matrixEndpoints.sync,\n                async: matrixEndpoints.async\n            },\n            abortSignal\n        });\n    };\n}\n","/* eslint-disable object-curly-spacing */\n/* eslint-disable no-undef */\n/**\n * Retrieve polygons (in GeoJSON format) representing administrative borders using IDs related to\n * search results entities.\n *\n * Parameters need to be passed to the constructor.\n *\n * ### Response\n * The response is extended with `getTrackingId()` method, which returns the `Tracking-ID`\n * associated with the request.\n *\n * Please refer to {{#crossLinkModule \"Services\"}}Difference between\n * API responses and this library's responses{{/crossLinkModule}} section.\n *\n * @example\n * ```js\n * tt.services.fuzzySearch({\n *      key: <Your API key>,\n *      query: \"Amsterdam\"\n * }).then(function(response) {\n *      var geometryId = response.results[0].dataSources.geometry.id;\n *      tt.services.additionalData({\n *          key: <Your API key>,\n *          geometries: [geometryId]\n *      }).then(function(adpResponse) {\n *          console.log(adpResponse);\n *      })\n *   });\n * ```\n *\n * @class additionalData\n * @module Services\n * @namespace Services.services\n * @uses KeyMixin\n * @uses BatchMixin\n * @uses GeometriesMixin\n * @uses GeometriesZoomMixin\n * @uses TrackingIdMixin\n * @uses AbortSignalMixin\n * @constructor\n *\n * @param {Object} [options]\n * @param {Object} [additionalOptions] Additional options to be passed to the service.\n */\n\nimport {SERVICE_TYPES} from 'Core/serviceTypes';\nimport {\n    string as validateString, trackingId as validateTrackingId, arrayType as validateArrayType,\n    geometriesZoom as validateGeometriesZoom\n} from '../validators';\nimport { batchModel } from '../../model/search/batchModel';\nimport parameterApplications from '../../common/parameterApplications';\nimport {modelResponse} from '../../model/modelResponse';\nimport { v4 as uuid } from 'uuid';\nimport {\n    adpEndpoint,\n    batchAdpQueryEndpoint,\n    batchSyncSearchEndpoint,\n    batchSearchEndpoint\n} from 'endpoints';\nimport {\n    serviceFactory,\n    singleRequestServiceFactory,\n    batchRequestServiceFactory\n} from '../../core';\n\nconst fields = {\n    key: {\n        validators: [validateString]\n    },\n    trackingId: {\n        validators: [validateTrackingId],\n        application: parameterApplications.HEADER,\n        defaultValue: uuid\n    },\n    geometries: {\n        validators: [validateArrayType],\n        required: true\n    },\n    geometriesZoom: {\n        validators: [validateGeometriesZoom]\n    }\n};\n\nexport function additionalData(options, additionalOptions) {\n    const singleAdpRequest = singleRequestServiceFactory(adpEndpoint);\n    const batchAdpRequest = batchRequestServiceFactory(100, {\n        single: batchAdpQueryEndpoint,\n        batchSync: batchSyncSearchEndpoint,\n        batch: batchSearchEndpoint\n    });\n\n    function handleServiceCall(data, abortSignal) {\n        return singleAdpRequest(fields, data, abortSignal).then(modelResponse);\n    }\n    function handleBatchServiceCall(data, abortSignal) {\n        return batchAdpRequest(fields, data, abortSignal).then(response => modelResponse(response, batchModel));\n    }\n\n    return serviceFactory(\n        fields,\n        SERVICE_TYPES.SEARCH,\n        'additionalData',\n        handleServiceCall,\n        handleBatchServiceCall\n    )(options, additionalOptions);\n}\n","/* jshint nomen:false */\nimport isFunction from 'lodash/isFunction';\nimport castArray from 'lodash/castArray';\nimport isString from 'lodash/isString';\nimport isNil from 'lodash/isNil';\nimport {pointRegex, circleRegex} from './utils';\nimport {\n    traffic as trafficLanguageMap,\n    routing as routingLanguageMap,\n    search as searchLanguageMap,\n    maps as mapsLanguageMap,\n    incidentV5 as incidentV5LanguageMap\n} from '../config/language/mappings';\n\nimport geopoliticalViewMappings from 'Services/config/geopolView/mappings';\n\nfunction isLatLon(latlon) {\n    return Object.prototype.hasOwnProperty.call(latlon, 'lat') &&\n    (Object.prototype.hasOwnProperty.call(latlon, 'lon') || Object.prototype.hasOwnProperty.call(latlon, 'lng'));\n}\n\nfunction or(first, second) {\n    if (first === undefined) {\n        return second;\n    }\n    return first;\n}\n\nfunction throwTypeErrorWhen(condition, message) {\n    if (condition) {\n        throw new TypeError(message);\n    }\n}\n\nfunction normalizeLatitude(latitude) {\n    const numLatitude = parseFloat(latitude);\n    if (!isFinite(numLatitude)) {\n        throw new TypeError('an number is expected, but ' + latitude + ' [' + typeof latitude + '] given');\n    }\n    const i = Math.ceil((numLatitude - 90) / 180);\n    return numLatitude - 180 * i;\n}\n\nfunction normalizeLongitude(longitude) {\n    const numLongitude = parseFloat(longitude);\n    if (!isFinite(numLongitude)) {\n        throw new TypeError('an number is expected, but ' + longitude + ' [' + typeof longitude + '] given');\n    }\n    const i = Math.ceil((numLongitude - 180) / 360);\n    return numLongitude - 360 * i;\n}\n\nfunction isXY(xy) {\n    return Object.prototype.hasOwnProperty.call(xy, 'x') && Object.prototype.hasOwnProperty.call(xy, 'y');\n}\n\nfunction isLatitudeLongitude(value) {\n    return Object.prototype.hasOwnProperty.call(value, 'latitude') &&\n        Object.prototype.hasOwnProperty.call(value, 'longitude');\n}\n\nfunction isLatLonFunction(value) {\n    return isFunction(value.lat) && isFunction(value.lng);\n}\n\nfunction castPoint(value) {\n    if (Array.isArray(value) && value.length === 2) {\n        return [...value].reverse();\n    }\n    if (isString(value)) {\n        const match = value.match(pointRegex);\n        throwTypeErrorWhen(!match || !match[1] || !match[2],\n            'A point is expected, but ' + value + ' [' + typeof value + '] given');\n        return [match[2], match[1]];\n    }\n    if (isLatLonFunction(value)) {\n        return [value.lat(), value.lng()];\n    }\n    if (isLatLon(value)) {\n        return [value.lat, or(value.lon, value.lng)];\n    }\n    if (isXY(value)) {\n        return [value.y, value.x];\n    }\n    if (isLatitudeLongitude(value)) {\n        return [value.latitude, value.longitude];\n    }\n    throw new TypeError('A point is expected, but ' + value + ' [' + typeof value + '] given');\n}\n\nfunction isLatLonBBox(bbox) {\n    return Object.prototype.hasOwnProperty.call(bbox, 'minLon') &&\n        Object.prototype.hasOwnProperty.call(bbox, 'minLat') &&\n        Object.prototype.hasOwnProperty.call(bbox, 'maxLon') &&\n        Object.prototype.hasOwnProperty.call(bbox, 'maxLat');\n}\n\nfunction isRightLeftTopBottomBBox(bbox) {\n    return Object.prototype.hasOwnProperty.call(bbox, 'left') &&\n        Object.prototype.hasOwnProperty.call(bbox, 'bottom') &&\n        Object.prototype.hasOwnProperty.call(bbox, 'right') &&\n        Object.prototype.hasOwnProperty.call(bbox, 'top');\n}\n\nfunction isWestEastNorthSouthBBox(bbox) {\n    return isFunction(bbox.getWest) && isFunction(bbox.getEast) &&\n        isFunction(bbox.getSouth) && isFunction(bbox.getNorth);\n}\n\nfunction castBoundingBox(bbox) {\n    let sw, ne;\n    if (isLatLonBBox(bbox)) {\n        return bbox;\n    }\n    if (isRightLeftTopBottomBBox(bbox)) {\n        return { minLon: bbox.left, minLat: bbox.bottom, maxLon: bbox.right, maxLat: bbox.top };\n    }\n    if (isWestEastNorthSouthBBox(bbox)) {\n        return {\n            minLon: bbox.getWest(),\n            minLat: bbox.getSouth(),\n            maxLon: bbox.getEast(),\n            maxLat: bbox.getNorth()\n        };\n    }\n    if (isFunction(bbox.getNorthEast) && isFunction(bbox.getSouthWest)) {\n        ne = castPoint(bbox.getNorthEast());\n        sw = castPoint(bbox.getSouthWest());\n        return { minLon: sw[1], minLat: sw[0], maxLon: ne[1], maxLat: ne[0] };\n    }\n    if (Array.isArray(bbox) && bbox.length === 4) {\n        return { minLon: bbox[0], minLat: bbox[1], maxLon: bbox[2], maxLat: bbox[3] };\n    }\n    if (Array.isArray(bbox) && bbox.length === 2) {\n        sw = castPoint(bbox[0]);\n        ne = castPoint(bbox[1]);\n        return { minLon: sw[1], minLat: sw[0], maxLon: ne[1], maxLat: ne[0] };\n    }\n    if (isString(bbox)) {\n        bbox = bbox.trim().split(/\\s*,\\s*/);\n        if (bbox.length === 4) {\n            return {\n                minLon: parseFloat(bbox[0]),\n                minLat: parseFloat(bbox[1]),\n                maxLon: parseFloat(bbox[2]),\n                maxLat: parseFloat(bbox[3])\n            };\n        }\n    }\n    throw new TypeError('Unable to cast ' + bbox + ' [' + typeof bbox + '] to bounding box');\n}\n\nfunction normalizeBoundingBox(bbox) {\n    let w = bbox.minLon, e = bbox.maxLon, s = bbox.minLat, n = bbox.maxLat;\n    if (e - w > 360) {\n        e = 180;\n        w = -180;\n    } else {\n        if (e > 270) {\n            const right = Math.ceil(w / 360);\n            e -= 360 * right;\n            w -= 360 * right;\n        }\n        if (w < -270) {\n            const left = Math.ceil(-e / 360);\n            e += 360 * left;\n            w += 360 * left;\n        }\n    }\n    s = s < -90 ? -90 : s;\n    n = n > 90 ? 90 : n;\n    return { minLon: w, minLat: s, maxLon: e, maxLat: n };\n}\n\nfunction languageConverter(value, mapping) {\n\n    if (isNil(value) || value === '') {\n        return '';\n    }\n\n    if (mapping[value]) {\n        return value;\n    }\n\n    value = value.toLowerCase();\n\n    for (const language in mapping) {\n        if (Object.prototype.hasOwnProperty.call(mapping, language) && language !== 'defaultValue' &&\n            Object.prototype.hasOwnProperty.call(mapping[language].synonyms, value)\n        ) {\n            return language;\n        }\n    }\n    console.warn('Value provided is invalid (' + value +\n        '). Default value (' + mapping.defaultValue.value + ') will be used instead.');\n    return mapping.defaultValue.value;\n}\n\nfunction geopoliticalViewConverter(value) {\n    if (isNil(value) || value === '') {\n        return '';\n    }\n\n    if (geopoliticalViewMappings[value]) {\n        return value;\n    }\n    console.warn('Value provided is invalid (' + value +\n        '). Default value (' + geopoliticalViewMappings.defaultValue + ') will be used instead.');\n    return geopoliticalViewMappings.defaultValue;\n}\n\nfunction circleFromString(value) {\n    const match = value.match(circleRegex);\n    throwTypeErrorWhen(!match || !match[1] || !match[2] || !match[3],\n        'Unable to cast ' + value + ' [' + typeof value + '] to circle');\n\n    const lat = parseFloat(match[2]);\n    const lon = parseFloat(match[1]);\n    const radius = parseFloat(match[3]);\n    throwTypeErrorWhen(!isFinite(lat) || !isFinite(lon),\n        'Unable to cast ' + value + ' [' + typeof value + '] to circle');\n\n    return 'circle(' + lat + ',' + lon + ',' + radius + ')';\n}\n\nfunction castAndNormalizePoint(value) {\n    const point = castPoint(value);\n    return normalizeLatitude(point[0]) + ',' + normalizeLongitude(point[1]);\n}\n\nfunction convertPointOrCircle(value) {\n    if (isString(value) && value.indexOf('circle') > -1) {\n        return circleFromString(value);\n    }\n    if (Array.isArray(value) && value.length === 3) {\n        return 'circle(' + normalizeLatitude(value[1]) + ',' +\n            normalizeLongitude(value[0]) + ',' + value[2] + ')';\n    }\n    return castAndNormalizePoint(value);\n}\n\nfunction extractPointsFromPolygon(inputPoints) {\n    const points = [];\n    for (const point in inputPoints) {\n        if (Object.prototype.hasOwnProperty.call(inputPoints, point)) {\n            points.push(castAndNormalizePoint(inputPoints[point]));\n        }\n    }\n    return points;\n}\n\nfunction convertPointToLatitudeLongitude(point) {\n    if (!isString(point)) {\n        return point;\n    }\n\n    const splitPoint = point.split(',');\n\n    return {\n        latitude: splitPoint[0],\n        longitude: splitPoint[1]\n    };\n}\n\nfunction prepareSupportingPoints(supportingPoints) {\n    return supportingPoints.map(convertPointToLatitudeLongitude);\n}\n\nexport function convertBoundingBox(value) {\n    return normalizeBoundingBox(castBoundingBox(value));\n}\n\nexport function longitude(value) {\n    return normalizeLongitude(value);\n}\n\nexport function latitude(value) {\n    return normalizeLatitude(value);\n}\n\nexport function point(value) {\n    return castAndNormalizePoint(value);\n}\n\nexport function dateTime(value) {\n    if (value && value instanceof Date) {\n        return value.toISOString();\n    }\n\n    if (!value || !isString(value)) {\n        throw new TypeError('Unable to cast ' + value + ' [' + typeof value + '] to datetime value.');\n    }\n    if (value !== 'now') {\n        value = new Date(value).toISOString();\n    }\n    return value;\n}\n\nexport function geometryList(value) {\n    let figure;\n    throwTypeErrorWhen(!value || !Array.isArray(value),\n        'Unable to cast ' + value + ' [' + typeof value + '] to geometry list (array)');\n\n    for (const figureName in value) {\n        if (Object.prototype.hasOwnProperty.call(value, figureName)) {\n            figure = value[figureName];\n            if (figure.type === 'POLYGON') {\n                figure.vertices = extractPointsFromPolygon(figure.vertices);\n            } else if (figure.type === 'CIRCLE') {\n                figure.position = castAndNormalizePoint(figure.position);\n            }\n        }\n    }\n    return value;\n}\n\nexport function mapLanguage(value) {\n    return languageConverter(value, mapsLanguageMap);\n}\n\nexport function searchLanguage(value) {\n    return languageConverter(value, searchLanguageMap);\n}\n\nexport function routingGuidanceLanguage(value) {\n    return languageConverter(value, routingLanguageMap);\n}\n\nexport function incidentDetailsLanguage(value) {\n    return languageConverter(value, trafficLanguageMap);\n}\n\nexport function incidentDetailsV5Language(value) {\n    return languageConverter(value, incidentV5LanguageMap);\n}\n\nexport function geopoliticalView(value) {\n    return geopoliticalViewConverter(value);\n}\n\nexport function routingLocations(value) {\n    const response = [];\n    if (isString(value)) {\n        return value\n            .split(':')\n            .map((point) => point.split(',').reverse().join(','))\n            .join(':');\n    }\n    if (Array.isArray(value)) {\n        throwTypeErrorWhen(value.length < 2,\n            'Unable to cast ' + value + ' [' + typeof value + '] to routing locations string');\n\n        // Convert first element to point\n        response.push(castAndNormalizePoint(value[0]));\n\n        // Convert elements from 1 to length-2 to point or circle\n        for (let i = 1; i < value.length - 1; i += 1) {\n            response.push(convertPointOrCircle(value[i]));\n        }\n\n        // Convert last element (length-1) to point\n        response.push(castAndNormalizePoint(value[value.length - 1]));\n\n        // Join converted elements\n        return response.join(':');\n    }\n    throw new TypeError('Unable to cast ' + value + ' [' + typeof value + '] to routing locations string');\n}\n\nexport function roadUse(value) {\n    if (isString(value)) {\n        return '[\"' + value.replace(/[\"']|^\\s+|\\s+$/g, '').split(/[\\s,]+/).join('\",\"') + '\"]';\n    }\n    if (Array.isArray(value)) {\n        for (let i = 0; i < value.length; i += 1) {\n            value[i] = String(value[i]).replace(/[\"']|^\\s+|\\s+$/g, '');\n        }\n        return '[\"' + value.join('\",\"') + '\"]';\n    }\n    throw new TypeError('Unable to cast ' + value + ' [' + typeof value + '] to road use string');\n}\n\nexport function arrayOf(options) {\n    return (values) => {\n        values.forEach((value) => {\n            for (const key in value) {\n                if (Object.prototype.hasOwnProperty.call(value, key) &&\n                        Object.prototype.hasOwnProperty.call(options, key) &&\n                        Array.isArray(options[key].converters)) {\n                    options[key].converters.forEach((converter) => {\n                        if (isFunction(converter)) {\n                            value[key] = converter(value[key]);\n                        }\n                    });\n                }\n            }\n        });\n        return values;\n    };\n}\n\nexport function objectOf(options) {\n    return (value) => {\n        for (const key in value) {\n            if (Object.prototype.hasOwnProperty.call(value, key) &&\n                    Object.prototype.hasOwnProperty.call(options, key) &&\n                    isFunction(options[key].converter)) {\n\n                value[key] = options[key].converter(value[key]);\n            }\n        }\n        return value;\n    };\n}\n\nexport function arrayOfStrings(value) {\n    if (!value) {\n        return [];\n    }\n    if (isString(value)) {\n        value = value.trim().replace(/\\s*[,;]\\s*/g, ',');\n        return value.split(/[,;]+/);\n    }\n    if (Array.isArray(value)) {\n        return value;\n    }\n    throw new TypeError('Unable to cast ' + value + ' [' + typeof value + '] to array of strings');\n}\n\nexport function route(values) {\n    return {\n        points: values.map(castPoint).map(([lat, lon]) => ({ lat, lon }))\n    };\n}\n\nexport function integer(value) {\n    return Math.round(Number(value));\n}\n\nexport function supportingPoints(value) {\n    const arrayOfPoints = [];\n    if (isString(value)) {\n        value = value.split(':');\n    }\n    if (Array.isArray(value)) {\n\n        // Convert elements to points\n        for (let i = 0; i < value.length; i++) {\n            arrayOfPoints.push(castAndNormalizePoint(value[i]));\n        }\n    } else {\n        arrayOfPoints.push(castAndNormalizePoint(value));\n    }\n    return prepareSupportingPoints(arrayOfPoints);\n}\n\nexport function constantSpeedConsumption(value) {\n    if (isString(value)) {\n        return value;\n    }\n\n    if (!Array.isArray(value)) {\n        throw new TypeError('An array is required');\n    }\n    return value.join(':');\n}\n\nexport function avoidAreas(value) {\n    if (!Array.isArray(value)) {\n        throw new TypeError('An array is required');\n    }\n    return {\n        rectangles: value.map((area) => {\n            return {\n                southWestCorner: convertPointToLatitudeLongitude(castAndNormalizePoint(area.southWestCorner)),\n                northEastCorner: convertPointToLatitudeLongitude(castAndNormalizePoint(area.northEastCorner))\n            };\n        })\n    };\n}\n\nexport function commaSeparated(value) {\n    if (Array.isArray(value)) {\n        return value.join();\n    } else {\n        throw new TypeError('An array is required');\n    }\n}\n\nexport function array(value) {\n    return castArray(value);\n}\n\nexport function removeWhitespaces(value) {\n    if (typeof value === 'string') {\n        return value.replace(/\\s/g, '');\n    } else {\n        throw new TypeError('A string is required');\n    }\n}\n\n","export const SEARCH = 'search';\nexport const POI_SEARCH = 'poiSearch';\nexport const CATEGORY_SEARCH = 'categorySearch';\nexport const GEOMETRY_SEARCH = 'geometrySearch';\nexport const NEARBY_SEARCH = 'nearbySearch';\nexport const SEARCH_ALONG_ROUTE = 'searchAlongRoute';\n\n","/* eslint-disable max-len */\n/**\n * Makes a search request using the TomTom\n * [Search API - Along Route Search](ALONG_ROUTE_SEARCH_URL).\n *\n * The Search Along Route endpoint allows you to perform a fuzzy search for\n * POIs along a specified route. This search is constrained by specifying the\n * Detour Time limiting measure.\n *\n * To send the route points, this service will use a POST request with the  {{#crossLink \"Services.services.alongRouteSearch/route:parameter\"}}{{/crossLink}} encoded as a JSON payload.\n * The minimum number of route points is 2.\n *\n * Parameters need to be passed to the constructor.\n *\n * ### Response\n * The response is extended with `getTrackingId()` method, which returns the `Tracking-ID`\n * associated with the request.\n *\n * Additionally, the response extends API response by providing `toGeoJson()` method, which converts along route search data into\n * FeatureCollection with <a target=\"_blank\" rel=noopener href=\"https://tools.ietf.org/html/rfc7946#section-3.1.2\">Point</a> geometry.\n *\n * Each point feature represents `poi` from the original response. Properties of `poi` are mapped into feature properties\n *\n * Please refer to {{#crossLinkModule \"Services\"}}Difference between\n * API responses and this library's responses{{/crossLinkModule}} section.\n *\n * @example\n *```js\n * tt.services.alongRouteSearch({\n *     key: <Your API key>,\n *     limit: 20,\n *     maxDetourTime: 120,\n *     query: 'gas station',\n *     route: [\n *         {\n *             'lat': 37.7524152343544,\n *             'lon':-122.43576049804686\n *         },\n *         {\n *             'lat': 37.70660472542312,\n *             'lon':-122.43301391601562\n *         },\n *         [-122.36434936523438, 37.712059855877314], // Another valid format\n *     ]\n *   }).then(function(response) {\n *     console.log('SUMMARY:');\n *     console.table(response.summary);\n *     console.log('RESULTS:');\n *     console.table(response.results);\n *   });\n * ```\n *\n * For a list of all available formats for routes, read the documentation for the\n * {{#crossLink \"Services.services.alongRouteSearch/route:parameter\"}}{{/crossLink}} option.\n *\n * @class alongRouteSearch\n * @namespace Services.services\n * @module Services\n * @uses KeyMixin\n * @uses QueryMixin\n * @uses BatchMixin\n * @uses BrandSetMixin\n * @uses OpeningHoursMixin\n * @uses CategorySetMixin\n * @uses ConnectorSetMixin\n * @uses TimeZoneMixin\n * @uses MapcodesMixin\n * @uses FuelSetMixin\n * @uses TrackingIdMixin\n * @uses MaxPowerKwMixin\n * @uses MinPowerKwMixin\n * @uses ViewMixin\n * @uses AbortSignalMixin\n * @constructor\n *\n * @param {Object} [options]\n * @param {Object} [additionalOptions] Additional options to be passed to the service.\n */\n/* eslint-enable max-len */\n\nimport {SERVICE_TYPES} from 'Core/serviceTypes';\nimport {\n    bool as validateBool, string as validateString, key as validateKey, trackingId as validateTrackingId,\n    oneOfValue as validateOneOfValue, number as validateNumber, integerInInterval as validateIntegerInInterval,\n    route as validateRoute, connectorSet as validateConnectorSet\n} from '../validators';\nimport {route as convertRoute} from '../converters';\nimport { SEARCH_ALONG_ROUTE } from '../../common/searchTypes';\nimport parameterApplications from '../../common/parameterApplications';\nimport { v4 as uuid } from 'uuid';\nimport {modelResponse} from '../../model/modelResponse';\nimport {\n    searchEndpoint,\n    batchSearchQueryEndpoint,\n    batchSyncSearchEndpoint,\n    batchSearchEndpoint\n} from 'endpoints';\nimport {searchModel} from '../../model/search/search';\nimport {\n    singleRequestServiceFactory, batchRequestServiceFactory, serviceFactory\n} from '../../core';\n\nconst searchType = SEARCH_ALONG_ROUTE;\n\nconst fields = {\n    key: {\n        validators: [validateKey]\n    },\n\n    trackingId: {\n        validators: [validateTrackingId],\n        application: parameterApplications.HEADER,\n        defaultValue: uuid\n    },\n\n    /**\n     * The maximum allowed value is 3600.\n     *\n     * @attribute maxDetourTime\n     * @param {Number} [options.maxDetourTime] New maximum detour time in seconds.\n     */\n    maxDetourTime: {\n        validators: [validateIntegerInInterval(1, 3600)],\n        required: true\n    },\n\n    /**\n     * @attribute spreadingMode\n     * @param {String} [options.spreadingMode] Enables the spreading of returned results evenly along the route.\n     */\n    spreadingMode: {\n        validators: [validateOneOfValue(['auto'], 'spreading mode')]\n    },\n\n    /**\n     * The following formats are supported:\n     *\n     * - **String[]** (longitude/latitude pairs)\n     *   - `[\"4.8,52.3\", \"4.8,52.3\"]`\n     * - **Array[]** (longitude/latitude pairs)\n     *   - `[ [4.8,52.3], [4.8,52.3] ]`\n     * - **Object[]**\n     *   - `{lon: 4.8, lat: 52.3}`\n     *   - `{lng: 5.8, lat: 53.3}`\n     *   - `{x: 53.3, y: 5.8}`\n     *   - `{longitude: 5.8, latitude: 53.3}`\n     *   - `{lng: Function, lat: Function}` The functions should return a numeric value.\n     *\n     * @example\n     *```js\n     * function callbackFn(response) {\n     *   console.log(response);\n     * }\n     *\n     * tomtom.alongRouteSearch({\n     *   route:[\n     *     {\n     *         lat: 37.7524152343544,\n     *         lon:-122.43576049804686\n     *     },\n     *     {\n     *         lat: 37.70660472542312,\n     *         lon:-122.43301391601562\n     *     }\n     *   ]\n     * })\n     *\n     * .then(callbackFn);\n     *```\n     *\n     * @attribute route\n     * @param {Array} [options.route] Route representation.\n     */\n    route: {\n        required: true,\n        converters: [convertRoute],\n        validators: [validateRoute],\n        application: parameterApplications.POST\n    },\n\n    query: {\n        required: true,\n        validators: [validateString],\n        application: parameterApplications.PATH\n    },\n\n    // A custom \"limit\" docblock is used because the max limit value differs from the one used on the\n    // other services (100).\n    /**\n     * @attribute limit\n     * @param {Number} [options.limit=10] The maximum number of elements in the response. The maximum number is 20.\n     */\n    limit: {\n        validators: [validateIntegerInInterval(1, 20)]\n    },\n\n    type: {\n        validators: [validateString],\n        defaultValue: searchType,\n        application: parameterApplications.PATH\n    },\n\n    brandSet: {\n        validators: [validateString]\n    },\n\n    categorySet: {\n        validators: [validateString]\n    },\n\n    connectorSet: {\n        validators: [validateConnectorSet]\n    },\n\n    minPowerKW: {\n        validators: [validateNumber]\n    },\n\n    maxPowerKW: {\n        validators: [validateNumber]\n    },\n\n    openingHours: {\n        validators: [validateOneOfValue(['nextSevenDays'], 'openingHours parameter')]\n    },\n\n    timeZone: {\n        validators: [validateOneOfValue(['iana'], 'timeZone parameter')]\n    },\n\n    /**\n     * @attribute sortBy\n     * @param {String} [options.sortBy='detourTime']  Parameter which provides possibility to sort returned results.\n     * Values: `detourTime`, `detourDistance`, `detourOffset`\n     *\n     * * Detour distance will be calculated as a difference between the original distance and the distance of a new\n     * route with Point Of Interest location.\n     * * `detourDistance` field will be present in every response regardless of sorting parameter.\n     * * If detour offset is set to false `detourOffset=false` and sorting parameter is set to detourOffset\n     * `sortBy=detourOffset` then detour offset will be calculated and results will be sorted as expected, but\n     * detourOffset value will not be present in the response.\n     */\n    sortBy: {\n        validators: [validateOneOfValue(['detourTime', 'detourOffset', 'detourDistance'], 'sortBy')]\n    },\n\n    /**\n     * @attribute detourOffset\n     * @param {Boolean} [options.detourOffset=false] Parameter which turns on calculation of the distance between the\n     * start of the route and the starting point of the detour to a POI.\n     *\n     * * Detour offset is also calculated when `sortBy` parameter is set to `detourOffset`.\n     * * Value is provided in a response only when `detourOffset` is set to `true`.\n     */\n    detourOffset: {\n        validators: [validateBool]\n    },\n\n    view: {\n        validators: [validateString]\n    }\n};\n\nexport function alongRouteSearch(options, additionalOptions) {\n    const singleRequest = singleRequestServiceFactory(searchEndpoint);\n    const batchRequest = batchRequestServiceFactory(100, {\n        single: batchSearchQueryEndpoint,\n        batchSync: batchSyncSearchEndpoint,\n        batch: batchSearchEndpoint\n    });\n\n    const handleServiceCall = (data, abortSignal) => {\n        return singleRequest(fields, data, abortSignal)\n            .then(response => modelResponse(response, searchModel));\n    };\n    const handleBatchServiceCall = (data, abortSignal) => {\n        return batchRequest(fields, data, abortSignal)\n            .then(response => modelResponse(response, searchModel));\n    };\n\n    return serviceFactory(\n        fields,\n        SERVICE_TYPES.SEARCH,\n        'alongRouteSearch',\n        handleServiceCall,\n        handleBatchServiceCall\n    )(options, additionalOptions);\n}\n","import isString from 'lodash/isString';\nimport isEmpty from 'lodash/isEmpty';\nimport {isValidValue} from './utils';\n\nconst engineType = {\n    combustion: 'combustion',\n    electric: 'electric',\n    any: 'any'\n};\n\nfunction validateIfPointsGreaterOrEqual(speedsAndConsumptions) {\n    const sortedKeys = Object.keys(speedsAndConsumptions).sort(function(x, y) {\n        return parseFloat(x) > parseFloat(y);\n    });\n    const keysLength = sortedKeys.length;\n\n    if (speedsAndConsumptions[sortedKeys[keysLength - 2]] > speedsAndConsumptions[sortedKeys[keysLength - 1]]) {\n        throw new Error('Consumption for two highest speeds should be increasing');\n    }\n}\n\nfunction validateFloat(val) {\n    if (isNaN(parseFloat(val)) || !isFinite(val)) {\n        throw new Error('A value parsable to float is expected, but ' + val + ' [' + typeof val + '] given');\n    }\n}\n\n/**\n * @param {String[]} arr\n */\nfunction consumptionPairsValidator(arr) {\n    const speedsAndConsumptions = {};\n    arr.forEach(function(element) {\n        const pair = element.split(',');\n        if (pair.length !== 2) {\n            throw new Error('Invalid number of parameters in the pair around ' + element);\n        }\n        if (pair[0].trim().length === 0) {\n            throw new Error('Speed value must not be empty.');\n        }\n        if (pair[1].trim().length === 0) {\n            throw new Error('Consumption value must not be empty.');\n        }\n        validateFloat(pair[0]);\n        validateFloat(pair[1]);\n        if (Object.prototype.hasOwnProperty.call(speedsAndConsumptions, parseFloat(pair[0]))) {\n            throw new Error('Duplicate speed: ' + pair[0]);\n        } else {\n            speedsAndConsumptions[parseFloat(pair[0])] = parseFloat(pair[1]);\n        }\n    });\n    if (Object.keys(speedsAndConsumptions).length > 1) {\n        validateIfPointsGreaterOrEqual(speedsAndConsumptions);\n    }\n}\n\nfunction checkIfCorrectEngineType(obj, type) {\n    if (obj.vehicleEngineType && obj.vehicleEngineType !== type && type !== engineType.any) {\n        throw new Error('Expecting vehicleEngineType set to ' + type);\n    }\n}\n\nfunction efficiencyParameterRequired(obj, paramName) {\n    if (!(isValidValue(obj.accelerationEfficiency) &&\n        isValidValue(obj.decelerationEfficiency) &&\n        isValidValue(obj.uphillEfficiency) &&\n        isValidValue(obj.downhillEfficiency))) {\n        throw new Error('Efficiency parameters are required when using ' + paramName);\n    }\n}\n\nfunction hasEfficiencyParameterSet(obj) {\n    return obj.accelerationEfficiency ||\n        obj.decelerationEfficiency ||\n        obj.uphillEfficiency ||\n        obj.downhillEfficiency;\n}\n\nfunction validateDependantParameters(obj, paramName1, paramName2) {\n    if (!(obj[paramName1] && obj[paramName2])) {\n        throw new Error('Missing dependant parameter. Expecting both defined: ' + paramName1 + ', ' + paramName2);\n    }\n}\n\nfunction validateEfficiencyParameters(obj, paramName1, paramName2) {\n    if (obj[paramName1] * obj[paramName2] > 1) {\n        throw new Error('Product of ' + paramName1 + ' and ' + paramName2 + ' cannot exceed 1');\n    }\n}\n\n/**\n * @ignore\n * Consumption Model cannot be used with travelMode values bicycle and pedestrian.\n * @param {Object} obj\n */\nfunction validateTravelMode(obj) {\n    if (obj.travelMode === 'bicycle' || obj.travelMode === 'pedestrian') {\n        throw new Error('Consumption model parameters cannot be set if travelMode is set to bicycle or pedestrian');\n    }\n}\n\n/**\n * @ignore\n * All parameters require constantSpeedConsumption* to be specified by the user. It is an\n * error to specify any other consumption model parameter (with the exception of vehicleWeight)\n * if constantSpeedConsumption* is not specified.\n * @param {Object} obj\n */\nfunction hasConstantSpeedConsumption(obj) {\n    if (!obj.constantSpeedConsumptionInLitersPerHundredkm && !obj.constantSpeedConsumptionInkWhPerHundredkm) {\n        throw new Error('Consumption model cannot be used without setting constant speed consumption parameter');\n    }\n}\n\n/**\n * @ignore\n * The list must contain between 1 and 25 points (inclusive), and may not contain\n * duplicate points for the same speed. If it only contains a single point, then the\n * consumption rate of that point is used without further processing.\n * Consumption specified for the highest speed must be greater than or equal to\n * that of the penultimate highest speed. This ensures that extrapolation does not\n * lead to negative consumption rates. Similarly, consumption values specified for the\n * two lowest speeds in the list cannot lead to a negative consumption rate for any lower speed.\n * The minimum and maximum values described here refer to the valid range for the consumption\n * values (expressed in l/100km).\n * @param {Number} engineType\n * @param {Object} obj\n * @return {Function} function\n */\nexport function constantSpeedConsumption(engineType) {\n    return (value, obj) => {\n        if (value === undefined || value === null) {\n            return;\n        }\n        validateTravelMode(obj);\n        checkIfCorrectEngineType(obj, engineType);\n        if (!isString(value)) {\n            throw new TypeError('Expecting a String like \"15.2,12.2:8.0,9.0\"');\n        }\n        const speedPairs = value.split(':');\n        if (speedPairs.length < 1 || speedPairs.length > 25) {\n            throw new Error('Incorrect amount of speed-consumption pairs provided. Expecting 1-25, but got ' +\n                value.length);\n        }\n        consumptionPairsValidator(speedPairs);\n    };\n}\n\nexport function vehicleWeight(value, obj) {\n    if (hasEfficiencyParameterSet(obj) && value === undefined) {\n        throw new Error('vehicleWeight parameter must be set if any efficiency parameters is present');\n    }\n}\n\nexport function floatAndEngineType(engineType, paramName) {\n    return function(value, obj) {\n        if (!value) {\n            return;\n        }\n        validateTravelMode(obj);\n        hasConstantSpeedConsumption(obj);\n        checkIfCorrectEngineType(obj, engineType);\n        validateFloat(value);\n        if (value < 0) {\n            throw new Error(paramName + ': Expecting positive value');\n        }\n    };\n}\n\nexport function fuelEnergyDensityInMJoulesPerLiter(value, obj) {\n    if (!value) {\n        return;\n    }\n    validateTravelMode(obj);\n    validateFloat(value);\n    hasConstantSpeedConsumption(obj);\n    checkIfCorrectEngineType(obj, 'combustion');\n    efficiencyParameterRequired(obj, 'fuelEnergyDensityInMJoulesPerLiter');\n}\n\n/**\n * @ignore\n * accelerationEfficiency and decelerationEfficiency must always be specified as a pair (i.e., both or none).\n * uphillEfficiency and downhillEfficiency must always be specified as a pair (i.e., both or none).\n * If accelerationEfficiency and decelerationEfficiency are specified, the\n * product of their values must not be greater than 1 (to prevent perpetual motion).\n * If uphillEfficiency and downhillEfficiency are specified, the product of their\n * values must not be greater than 1 (to prevent perpetual motion).\n * @param {Number} paramName1\n * @param {Number} paramName2\n * @return {undefined} undefined\n */\nexport function efficiencyParameter(paramName1, paramName2) {\n    return function(value, obj) {\n        if (!value) {\n            return;\n        }\n        validateTravelMode(obj);\n        hasConstantSpeedConsumption(obj);\n        checkIfCorrectEngineType(obj, engineType.any);\n        validateDependantParameters(obj, paramName1, paramName2);\n        /**\n         * @ignore\n         * If *Efficiency parameters are specified by the user, then vehicleWeight must also be specified.\n         */\n        validateDependantParameters(obj, paramName1, 'vehicleWeight');\n        /**\n         * @ignore\n         * When vehicleEngineType is combustion, fuelEnergyDensityInMJoulesPerLiter must be specified as well.\n         */\n        if (obj.vehicleEngineType === engineType.combustion) {\n            validateDependantParameters(obj, paramName1, 'fuelEnergyDensityInMJoulesPerLiter');\n        }\n        validateEfficiencyParameters(obj, paramName1, paramName2);\n        validateFloat(value);\n    };\n}\n\nexport function chargeParameter(paramName1, paramName2) {\n    return function(value, obj) {\n        if (!value) {\n            return;\n        }\n        validateTravelMode(obj);\n        hasConstantSpeedConsumption(obj);\n        checkIfCorrectEngineType(obj, engineType.electric);\n        validateDependantParameters(obj, paramName1, paramName2);\n        validateFloat(value);\n    };\n}\n\nexport function budgetInRange(_, data) {\n    let maxBudget;\n    let currentBudgetProvided;\n    const electricEngine = data.vehicleEngineType === 'electric';\n    if (electricEngine) {\n        maxBudget = data.currentChargeInkWh;\n        currentBudgetProvided = data.energyBudgetInkWh;\n        if (currentBudgetProvided > maxBudget) {\n            throw new Error('Energy budget may not be greater than current energy.');\n        }\n    } else {\n        maxBudget = data.currentFuelInLiters;\n        currentBudgetProvided = data.fuelBudgetInLiters;\n        if (currentBudgetProvided > maxBudget) {\n            throw new Error('Fuel budget may not be greater than current fuel.');\n        }\n    }\n    if (currentBudgetProvided < 0) {\n        throw new Error('Budget may not be negative.');\n    }\n}\n\nexport function requiredBudget(_, data) {\n    const liters = 'fuelBudgetInLiters' in data;\n    const watts = 'energyBudgetInkWh' in data;\n    const seconds = 'timeBudgetInSec' in data;\n    const meters = 'distanceBudgetInMeters' in data;\n    const numberOfSetParams = [liters, watts, seconds, meters].filter(budget => budget).length;\n    if (numberOfSetParams === 0 || numberOfSetParams > 1) {\n        throw new Error('Exactly one of fuelBudgetInLiters, energyBudgetInkWh, ' +\n            'timeBudgetInSec and distanceBudgetInMeters must be set.');\n    }\n}\n\nexport function requiredWithSpecificEngineType(value, data, key) {\n    const consumptionInLiters = 'constantSpeedConsumptionInLitersPerHundredkm' in data;\n    const consumptionInWatts = 'constantSpeedConsumptionInkWhPerHundredkm' in data;\n    const electricEngine = data.vehicleEngineType === 'electric';\n\n    if (key === 'energyBudgetInkWh' && value) {\n        if (!electricEngine) {\n            throw new Error('Engine type should be \"electric\" when energyBudgetInkWh is set');\n        }\n        if (!consumptionInWatts) {\n            throw new Error('Missing constant speed consumption for electric engine.');\n        }\n    } else if (key === 'fuelBudgetInLiters' && value) {\n        if (electricEngine) {\n            throw new Error('Engine type should be \"combustion\" or undefined when fuelBudgetInLiters is set');\n        }\n        if (!consumptionInLiters) {\n            throw new Error('Missing constant speed consumption for combustion engine.');\n        }\n    }\n}\n\nexport function notCommon(_, data) {\n    const forbiddenAvoid = 'alreadyUsedRoads';\n    const forbiddenModes = ['bicycle', 'pedestrian'];\n\n    if ('avoid' in data && data.avoid.indexOf(forbiddenAvoid) > -1) {\n        throw new Error(forbiddenAvoid + ' is not allowed value for avoid parameter ' +\n            'in Calculate Reachable Route request.');\n    }\n\n    if ('travelMode' in data && forbiddenModes.indexOf(data.travelMode) > -1) {\n        throw new Error(data.travelMode + ' is not allowed value for travelMode parameter ' +\n            'in Calculate Reachable Route request.');\n    }\n\n    if ('arriveAt' in data) {\n        throw new Error('arriveAt parameter is not allowed in Calculate Reachable Route request.');\n    }\n}\n\nexport function firstParamCannotBeUsedWithSecond(paramNameUsed, paramNameToAvoid) {\n    return function(value, obj) {\n        if (!value) {\n            return;\n        }\n        if (Object.prototype.hasOwnProperty.call(obj, paramNameToAvoid) &&\n            isValidValue(obj[paramNameToAvoid])) {\n            throw new Error(paramNameUsed + ' parameter cannot be used in conjunction with ' +\n                paramNameToAvoid);\n        }\n    };\n}\n\nexport function requiresDependantParameter(parameterName, dependantParameter) {\n    return function(value, obj) {\n        if (!value) {\n            return;\n        }\n        if (!Object.prototype.hasOwnProperty.call(obj, dependantParameter)) {\n            throw new Error(dependantParameter + ' must be specified when using with ' + parameterName);\n        }\n    };\n}\n\nexport function notRequiredWithCategoryNorBrandSet(_, data) {\n    const isQueryAbsent = isEmpty(data.query);\n    const isBrandSetAbsent = isEmpty(data.brandSet);\n    const isCategorySetAbsent = isEmpty(data.categorySet);\n    if (isQueryAbsent && isBrandSetAbsent && isCategorySetAbsent) {\n        throw new Error('Empty query parameter is only allowed when used with brandSet or categorySet filters');\n    }\n}\n\nexport function consumptionRecuperationAltitudeParameter(_, data) {\n    const recuperationInkWhPerkmAltitudeLoss = data.recuperationInkWhPerkmAltitudeLoss;\n    const consumptionInkWhPerkmAltitudeGain = data.consumptionInkWhPerkmAltitudeGain;\n\n    validateFloat(recuperationInkWhPerkmAltitudeLoss);\n    validateFloat(consumptionInkWhPerkmAltitudeGain);\n\n    if (consumptionInkWhPerkmAltitudeGain < recuperationInkWhPerkmAltitudeLoss) {\n        throw new Error('consumptionInkWhPerkmAltitudeGain must be greater than ' +\n        'recuperationInkWhPerkmAltitudeLoss');\n    }\n\n    if (consumptionInkWhPerkmAltitudeGain > 500) {\n        throw new Error('recuperationInkWhPerkmAltitudeLoss and less than 500.0');\n    }\n\n    if (recuperationInkWhPerkmAltitudeLoss < 0) {\n        throw new Error('recuperationInkWhPerkmAltitudeLoss must be greater than 0.0');\n    }\n}\n","import {\n    validateBoundingBox,\n    bool as validateBool, string as validateString, trackingId as validateTrackingId,\n    oneOfValue as validateOneOfValue, naturalInteger as validateNaturalInteger,\n    languageCode as validateLanguageCode, point as validatePoint, countrySet as validateCountrySet,\n    number as validateNumber, mapcodes as validateMapcodes, limit as validateLimit,\n    connectorSet as validateConnectorSet, fuelSet as validateFuelSet, offset as validateOffset\n} from '../../services/validators';\nimport {\n    convertBoundingBox, searchLanguage as convertLanguage, point as convertPoint\n} from '../../services/converters';\n\nimport { SEARCH } from '../../common/searchTypes';\nimport parameterApplications from '../../common/parameterApplications';\nimport {notRequiredWithCategoryNorBrandSet} from '../postValidators';\nimport { v4 as uuid } from 'uuid';\n\nexport default {\n    create: () => {\n        return {\n            __all: {\n                validators: [notRequiredWithCategoryNorBrandSet]\n            },\n            key: {\n                validators: [validateString]\n            },\n            trackingId: {\n                validators: [validateTrackingId],\n                application: parameterApplications.HEADER,\n                defaultValue: uuid\n            },\n            query: {\n                validators: [\n                    validateString\n                ],\n                application: parameterApplications.PATH,\n                defaultValue: ''\n            },\n            typeahead: {\n                validators: [validateBool]\n            },\n            limit: {\n                validators: [validateLimit]\n            },\n            offset: {\n                validators: [validateOffset],\n                name: 'ofs'\n            },\n            language: {\n                validators: [validateLanguageCode],\n                converters: [convertLanguage]\n            },\n            countrySet: {\n                validators: [validateCountrySet]\n            },\n            radius: {\n                validators: [validateNaturalInteger]\n            },\n            center: {\n                converters: [convertPoint], validators: [validatePoint],\n                cast: (center, requestOptions) => {\n                    const coordinates = center.split(',');\n                    requestOptions.lat = coordinates[0];\n                    requestOptions.lon = coordinates[1];\n                }\n            },\n            type: {\n                validators: [validateString],\n                defaultValue: SEARCH,\n                application: parameterApplications.PATH\n            },\n            bestResult: {\n                validators: [validateBool],\n                cast: (bestResults, requestOptions) => {\n                    if (!bestResults) {\n                        return;\n                    }\n                    requestOptions.limit = 1;\n                    requestOptions.ofs = 0;\n                }\n            },\n            protocol: {\n                validators: [validateOneOfValue(['http', 'https'], 'protocol')]\n            },\n            extendedPostalCodesFor: {\n                validators: [validateString]\n            },\n            view: {\n                validators: [validateOneOfValue(['IL', 'MA', 'IN', 'PK', 'Unified', 'RU', 'TR', 'AR', 'CN'], 'view')]\n            },\n            brandSet: {\n                validators: [validateString]\n            },\n            categorySet: {\n                validators: [validateString]\n            },\n            connectorSet: {\n                validators: [validateConnectorSet]\n            },\n            minPowerKW: {\n                validators: [validateNumber]\n            },\n            maxPowerKW: {\n                validators: [validateNumber]\n            },\n            openingHours: {\n                validators: [validateOneOfValue(['nextSevenDays'], 'openingHours parameter')]\n            },\n            timeZone: {\n                validators: [validateOneOfValue(['iana'], 'timeZone parameter')]\n            },\n            mapcodes: {\n                validators: [validateMapcodes]\n            },\n            fuelSet: {\n                validators: [validateFuelSet]\n            },\n            relatedPois: {\n                validators: [validateOneOfValue(['off', 'child', 'parent', 'all'], 'relatedPois')]\n            }\n        };\n    }\n};\n\nexport const boundingBox = () => ({\n    validators: [validateBoundingBox],\n    converters: [convertBoundingBox],\n    cast: (boundingBox, requestOptions) => {\n        requestOptions.topLeft = `${boundingBox.maxLat},${boundingBox.minLon}`;\n        requestOptions.btmRight = `${boundingBox.minLat},${boundingBox.maxLon}`;\n    }\n});\n\n","/**\n * Base class for all the Search services.\n *\n * @private\n * @class Search\n * @module Services\n * @uses ProtocolMixin\n * @uses KeyMixin\n * @uses LimitMixin\n * @uses LanguageMixin\n * @uses BatchMixin\n * @uses TimeZoneMixin\n * @uses TrackingIdMixin\n * @uses RelatedPoisMixin\n *\n * @constructor\n * @param {Object} [options] Options to be passed to the search call,\n *     or an array of such options objects to perform a batch request.\n */\n/* jshint nomen:false */\nimport {SERVICE_TYPES} from 'Core/serviceTypes';\nimport {clone, addFields} from '../utils';\nimport {searchModel} from '../../model/search/search';\nimport {batchModel} from '../../model/search/batchModel';\nimport searchParams from './searchParameters';\nimport {modelResponse} from '../../model/modelResponse';\nimport {\n    searchEndpoint,\n    batchSearchQueryEndpoint,\n    batchSyncSearchEndpoint,\n    batchSearchEndpoint\n} from 'endpoints';\nimport {\n    serviceFactory,\n    singleRequestServiceFactory,\n    batchRequestServiceFactory\n} from '../../core';\n\nexport class Search {\n    constructor(options, additionalOptions) {\n        this.options = options;\n        this.additionalOptions = additionalOptions;\n        this.defaultFields = clone(searchParams.create());\n        this.fields = {};\n    }\n\n    _getRestService() {\n        return {\n            search: singleRequestServiceFactory(searchEndpoint),\n            batch: batchRequestServiceFactory(100, {\n                single: batchSearchQueryEndpoint,\n                batchSync: batchSyncSearchEndpoint,\n                batch: batchSearchEndpoint\n            })\n        };\n    }\n\n    handleBatchServiceCall(data, abortSignal) {\n        return this._getRestService().batch(this.fields, data, abortSignal)\n            .then(response => modelResponse(response, batchModel));\n    }\n\n    handleServiceCall(options, abortSignal) {\n        return this._getRestService().search(this.fields, options, abortSignal)\n            .then(({ data, trackingId }) => {\n                return modelResponse({\n                    data: options.bestResult ? data.results[0] : data,\n                    trackingId\n                }, searchModel);\n            });\n    }\n\n    construct(serviceName) {\n        this.fields = addFields(this.fields, this.defaultFields);\n        const service = serviceFactory(\n            this.fields,\n            SERVICE_TYPES.SEARCH,\n            serviceName || 'search',\n            this.handleServiceCall.bind(this),\n            this.handleBatchServiceCall.bind(this)\n        );\n\n        return service(this.options, this.additionalOptions);\n    }\n}\n","/* eslint-disable max-len */\n/**\n * Makes a search request using the TomTom\n * [Search API - Category Search](CATEGORY_SEARCH_URL).\n *\n * Parameters need to be passed to the constructor.\n *\n * The list of all supported category codes are available\n * [here](SEARCH_API_SUPPORTED_CATEGORY_CODES_URL).\n *\n * ### Response\n * The response is extended with `getTrackingId()` method, which returns the `Tracking-ID`\n * associated with the request.\n *\n * Additionally, the response extends API response by providing `toGeoJson()` method, which converts category search data into\n * FeatureCollection with <a target=\"_blank\" rel=noopener href=\"https://tools.ietf.org/html/rfc7946#section-3.1.2\">Point</a> geometry.\n *\n * Each point feature represents `poi` from the original response. Properties of `poi` are mapped into feature properties\n *\n * Please refer to {{#crossLinkModule \"Services\"}}Difference between\n * API responses and this library's responses{{/crossLinkModule}} section.\n *\n * @example\n * ```js\n * function callbackFn(result) {\n *   console.log(result);\n * };\n *\n * tt.services.categorySearch({\n *    key: <Your API key>,\n *    query: 'restaurant'\n * }).then(callbackFn);\n * ```\n * @class categorySearch\n * @namespace Services.services\n * @extends Search\n * @uses ExtendedPostalCodesForMixin\n * @uses CenterMixin\n * @uses RadiusMixin\n * @uses BoundingBoxMixin\n * @uses CountrySetMixin\n * @uses OffsetMixin\n * @uses BestResultMixin\n * @uses QueryMixin\n * @uses TypeaheadMixin\n * @uses ViewMixin\n * @uses BrandSetMixin\n * @uses OpeningHoursMixin\n * @uses CategorySetMixin\n * @uses ConnectorSetMixin\n * @uses MapcodesMixin\n * @uses FuelSetMixin\n * @uses MinPowerKwMixin\n * @uses MaxPowerKwMixin\n * @uses AbortSignalMixin\n * @constructor\n * @module Services\n *\n * @param {Object} [options] Options to be passed to the search call,\n *     or an array of such options objects to perform a batch request.\n * @param {Object} [additionalOptions] Additional options to be passed to the service.\n *\n */\nimport { Search } from './search';\nimport { boundingBox } from './searchParameters';\nimport { CATEGORY_SEARCH } from '../../common/searchTypes';\n\nclass CategorySearch extends Search {\n    constructor(options, additionalOptions) {\n        super(options, additionalOptions);\n\n        this.fields.type = {\n            defaultValue: CATEGORY_SEARCH,\n            visible: false\n        };\n\n        this.fields.boundingBox = boundingBox();\n    }\n}\n\nexport function categorySearch(options, additionalOptions) {\n    return (new CategorySearch(options, additionalOptions)).construct('categorySearch');\n}\n","/**\n * Get the charging connector data consisting of type and numbers of the existing charging stations,\n * based on EV station ID retrieved from a FuzzySearch request called with connectorSet parameter.\n *\n * Parameters need to be passed to the constructor.\n *\n * ### Response\n * The response is extended with `getTrackingId()` method, which returns the `Tracking-ID`\n * associated with the request.\n *\n * Please refer to {{#crossLinkModule \"Services\"}}Difference between\n * API responses and this library's responses{{/crossLinkModule}} section.\n *\n * @example\n * ```js\n *\n * function callbackFn(results) {\n *   console.log(results);\n * }\n *\n * tt.services.fuzzySearch({\n *      key: <Your API key>,\n *      query: 'station',\n *      connectorSet: 'Tesla'\n * }).then(function(response) {\n *      var chargingStationID = response.results[0].dataSources.chargingAvailability.id;\n *      tt.services.evChargingStationsAvailability({\n *          key: <Your API key>,\n *          chargingAvailability: chargingStationID\n *      }).then(callbackFn)\n *   });\n * ```\n *\n * @class evChargingStationsAvailability\n * @namespace Services.services\n * @uses KeyMixin\n * @uses BatchMixin\n * @uses ConnectorSetMixin\n * @uses MinPowerKwMixin\n * @uses MaxPowerKwMixin\n * @uses chargingAvailabilityMixin\n * @uses TrackingIdMixin\n * @uses AbortSignalMixin\n *\n * @constructor\n * @module Services\n *\n * @param {Object} [options]\n * @param {Object} [additionalOptions] Additional options to be passed to the service.\n */\n\nimport { SERVICE_TYPES } from 'Core/serviceTypes';\nimport {\n    string as validateString, key as validateKey, trackingId as validateTrackingId,\n    number as validateNumber, connectorSet as validateConnectorSet\n} from '../validators';\nimport { batchModel } from '../../model/search/batchModel';\nimport parameterApplications from '../../common/parameterApplications';\nimport { modelResponse } from '../../model/modelResponse';\nimport { v4 as uuid } from 'uuid';\nimport {\n    chargingAvailabilityEndpoint,\n    batchChargingAvailabilityQueryEndpoint,\n    batchSyncSearchEndpoint,\n    batchSearchEndpoint\n} from 'endpoints';\nimport {\n    singleRequestServiceFactory,\n    batchRequestServiceFactory,\n    serviceFactory\n} from '../../core';\n\nconst fields = {\n    key: {\n        validators: [validateKey]\n    },\n\n    chargingAvailability: {\n        validators: [validateString],\n        required: true\n    },\n\n    trackingId: {\n        validators: [validateTrackingId],\n        application: parameterApplications.HEADER,\n        defaultValue: uuid\n    },\n    connectorSet: {\n        validators: [validateConnectorSet]\n    },\n\n    minPowerKW: {\n        validators: [validateNumber]\n    },\n\n    maxPowerKW: {\n        validators: [validateNumber]\n    }\n};\n\nexport function evChargingStationsAvailability(options, additionalOptions) {\n    const singleRequest = singleRequestServiceFactory(chargingAvailabilityEndpoint);\n    const batchRequest = batchRequestServiceFactory(100, {\n        single: batchChargingAvailabilityQueryEndpoint,\n        batchSync: batchSyncSearchEndpoint,\n        batch: batchSearchEndpoint\n    });\n\n    function handleServiceCall(data, abortSignal) {\n        return singleRequest(fields, data, abortSignal).then(modelResponse);\n    }\n    function handleBatchServiceCall(data, abortSignal) {\n        return batchRequest(fields, data, abortSignal).then(response => modelResponse(response, batchModel));\n    }\n\n    return serviceFactory(\n        fields,\n        SERVICE_TYPES.EXTENDED_SEARCH,\n        'chargingAvailability',\n        handleServiceCall,\n        handleBatchServiceCall\n    )(options, additionalOptions);\n}\n","/* eslint-disable max-len */\n/**\n * Makes a search request using the TomTom\n * [Search API - Fuzzy Search](FUZZY_SEARCH_URL).\n *\n * Parameters need to be be passed to the constructor.\n *\n *\n * The list of all supported category codes are available\n * [here](SEARCH_API_SUPPORTED_CATEGORY_CODES_URL).\n *\n * ### Response\n * The response is extended with `getTrackingId()` method, which returns the `Tracking-ID`\n * associated with the request.\n *\n * Additionally, the response extends API response by providing `toGeoJson()` method, which converts fuzzy search data into\n * FeatureCollection with <a target=\"_blank\" rel=noopener href=\"https://tools.ietf.org/html/rfc7946#section-3.1.2\">Point</a> geometry.\n *\n * Each point feature represents single result from the original response. Properties of the result are mapped into feature properties\n *\n * Please refer to {{#crossLinkModule \"Services\"}}Difference between\n * API responses and this library's responses{{/crossLinkModule}} section.\n *\n * @example\n * ```js\n * function callbackFn(result) {\n *   console.log(result);\n * };\n *\n * tt.services.fuzzySearch({\n *   key: <Your API key>,\n *   query: 'Amsterdam'\n * }).then(callbackFn);\n * ```\n *\n * @class fuzzySearch\n * @namespace Services.services\n * @extends Search\n * @uses ExtendedPostalCodesForMixin\n * @uses CenterMixin\n * @uses RadiusMixin\n * @uses BoundingBoxMixin\n * @uses CountrySetMixin\n * @uses OffsetMixin\n * @uses BestResultMixin\n * @uses QueryMixin\n * @uses TypeaheadMixin\n * @uses MaxFuzzyLevel\n * @uses MinFuzzyLevel\n * @uses IdxSetMixin\n * @uses EntityTypeSetMixin\n * @uses CategorySetMixin\n * @uses ViewMixin\n * @uses BrandSetMixin\n * @uses ConnectorSetMixin\n * @uses OpeningHoursMixin\n * @uses MapcodesMixin\n * @uses FuelSetMixin\n * @uses MinPowerKwMixin\n * @uses MaxPowerKwMixin\n * @uses AbortSignalMixin\n * @constructor\n * @module Services\n *\n * @param {Object} [options] Options to be passed to the search call,\n *     or an array of such options objects to perform a batch request.\n * @param {Object} [additionalOptions] Additional options to be passed to the service.\n */\n\nimport {\n    string as validateString, clientTime as validateClientTime, entityType as validateEntityType,\n    fuzzinessLevel as validateFuzzinessLevel\n} from '../validators';\nimport {commaSeparated as convertCommaSeparated, array as convertArray} from '../converters';\nimport { Search } from './search';\nimport { boundingBox } from './searchParameters';\n\nclass FuzzySearch extends Search {\n    constructor(options, additionalOptions) {\n        super(options, additionalOptions);\n\n        this.fields.minFuzzyLevel = {\n            validators: [validateFuzzinessLevel],\n            defaultValue: 1\n        };\n\n        this.fields.maxFuzzyLevel = {\n            validators: [validateFuzzinessLevel],\n            defaultValue: 2\n        };\n\n        this.fields.idxSet = {\n            validators: [validateString]\n        };\n\n        this.fields.entityTypeSet = {\n            converters: [convertArray, convertCommaSeparated],\n            validators: [validateEntityType]\n        };\n\n        this.fields.sessionId = {\n            validators: [validateString]\n        };\n\n        this.fields.clientTime = {\n            validators: [validateClientTime]\n        };\n\n        this.fields.boundingBox = boundingBox();\n    }\n}\n\nexport function fuzzySearch(options, additionalOptions) {\n    return (new FuzzySearch(options, additionalOptions)).construct('fuzzySearch');\n}\n","/* eslint-disable max-len */\n/**\n * Makes a search request using the TomTom\n * [Search API - Geometry Search](GEOMETRY_SEARCH_URL).\n *\n * Parameters need to be passed to the constructor.\n *\n * ### Response\n * The response is extended with `getTrackingId()` method, which returns the `Tracking-ID`\n * associated with the request.\n *\n * Additionally, the response extends API response by providing `toGeoJson()` method, which converts geometry search data into\n * FeatureCollection with <a target=\"_blank\" rel=noopener href=\"https://tools.ietf.org/html/rfc7946#section-3.1.2\">Point</a> geometry.\n *\n * Each point feature represents `poi` from the original response. Properties of `poi` are mapped into feature properties\n *\n * Please refer to {{#crossLinkModule \"Services\"}}Difference between\n * API responses and this library's responses{{/crossLinkModule}} section.\n *\n * @example\n * ```js\n * const geometryList = [\n *   {\n *     type: 'POLYGON',\n *     vertices: [\n *       '37.7524152343544,-122.43576049804686',\n *       '37.70660472542312,-122.43301391601562',\n *       '37.712059855877314,-122.36434936523438',\n *       '37.75350561243041,-122.37396240234374'\n *     ]\n *   },\n *   {\n *     type: 'CIRCLE',\n *     position: '37.71205,-121.36434',\n *     radius: 6000\n *   },\n *   {\n *     type: 'CIRCLE',\n *     position: '37.31205,-121.36434',\n *     radius: 1000\n *   }\n * ];\n *\n * function callbackFn(results) {\n *   console.log(results);\n * }\n *\n * tt.services.geometrySearch({\n *   key: <Your API key>,\n *   geometryList: geometryList\n * }).then(callbackFn);\n * ```\n *\n * @class geometrySearch\n * @extends Search\n * @namespace Services.services\n * @uses QueryMixin\n * @uses IdxSetMixin\n * @uses ExtendedPostalCodesForMixin\n * @uses GeometryList\n * @uses ViewMixin\n * @uses OpeningHoursMixin\n * @uses MapcodesMixin\n * @uses ConnectorSetMixin\n * @uses BrandSetMixin\n * @uses CategorySetMixin\n * @uses MinPowerKwMixin\n * @uses MaxPowerKwMixin\n * @uses AbortSignalMixin\n * @constructor\n * @module Services\n *\n * @param {Object} [options] Options to be passed to the search call,\n *     or an array of such options objects to perform a batch request.\n * @param {Object} [additionalOptions] Additional options to be passed to the service.\n * @param {String|String[]} [options.entityTypeSet]\n * An array or comma-separated list of entity types which can be used to restrict the result\n * to a specific entity type. __Parameter should be used with the idxSet parameter\n * set to the Geography value.__\n * <br><br>\n * Available values:\n *  - `Country`\n *  - `CountrySubdivision`\n *  - `CountrySecondarySubdivision`\n *  - `CountryTertiarySubdivision`\n *  - `Municipality`\n *  - `MunicipalitySubdivision`\n *  - `Neighbourhood`\n *  - `PostalCodeArea`\n */\n/* eslint-enable */\n\nimport {\n    string as validateString, key as validateKey, oneOfValue as validateOneOfValue,\n    languageCode as validateLanguageCode, entityType as validateEntityType, limit as validateLimit,\n    geometryList as validateGeometryList\n} from '../validators';\nimport {\n    geometryList as convertGeometryList, array as convertArray, commaSeparated as convertCommaSeparated\n} from '../converters';\nimport { Search } from './search';\nimport { boundingBox } from './searchParameters';\nimport parameterApplications from '../../common/parameterApplications';\nimport { GEOMETRY_SEARCH } from '../../common/searchTypes';\n\nclass GeometrySearch extends Search {\n    constructor(options, additionalOptions) {\n        super(options, additionalOptions);\n\n        this.fields.type = {\n            defaultValue: GEOMETRY_SEARCH,\n            visible: false,\n            application: parameterApplications.PATH\n        };\n\n        this.fields.key = {\n            validators: [validateKey]\n        };\n\n        this.fields.limit = {\n            validators: [validateLimit]\n        };\n\n        this.fields.language = {\n            validators: [validateLanguageCode]\n        };\n\n        this.fields.geometryList = {\n            validators: [validateGeometryList],\n            converters: [convertGeometryList],\n            application: parameterApplications.POST\n        };\n\n        this.fields.idxSet = {\n            validators: [validateString]\n        };\n\n        this.fields.protocol = {\n            validators: [validateOneOfValue(['http', 'https'], 'protocol')]\n        };\n\n        this.fields.extendedPostalCodesFor = {\n            validators: [validateString]\n        };\n\n        this.fields.entityTypeSet = {\n            converters: [convertArray, convertCommaSeparated],\n            validators: [validateEntityType]\n        };\n\n        this.fields.boundingBox = boundingBox();\n    }\n}\n\nexport function geometrySearch(options, additionalOptions) {\n    return (new GeometrySearch(options, additionalOptions)).construct('geometrySearch');\n}\n","/* eslint-disable max-len */\nimport {numberInInterval as validateNumberInInterval} from '../../services/validators';\n\n/**\n * Makes a search request using the TomTom\n * [Search API - Nearby Search](NEARBY_SEARCH_URL).\n *\n * Parameters need to be be passed to the constructor.\n *\n * ### Response\n * The response is extended with `getTrackingId()` method, which returns the `Tracking-ID`\n * associated with the request.\n *\n * Additionally, the response extends API response by providing `toGeoJson()` method, which converts nearby search data into\n * FeatureCollection with <a target=\"_blank\" rel=noopener href=\"https://tools.ietf.org/html/rfc7946#section-3.1.2\">Point</a> geometry.\n *\n * Each point feature represents `poi` from the original response. Properties of `poi` are mapped into feature properties\n *\n * Please refer to {{#crossLinkModule \"Services\"}}Difference between\n * API responses and this library's responses{{/crossLinkModule}} section.\n *\n * @example\n * ```js\n * function callbackFn(result) {\n *   console.log(result);\n * };\n *\n * tt.services.nearbySearch({\n *   key: <Your API key>,\n *   center: [0,0],\n *   radius: 1000\n * }).then(callbackFn);\n * ```\n *\n * @class nearbySearch\n * @namespace Services.services\n * @extends Search\n * @uses ExtendedPostalCodesForMixin\n * @uses CenterMixin\n * @uses CountrySetMixin\n * @uses OffsetMixin\n * @uses BestResultMixin\n * @uses ViewMixin\n * @uses BrandSetMixin\n * @uses OpeningHoursMixin\n * @uses CategorySetMixin\n * @uses ConnectorSetMixin\n * @uses MapcodesMixin\n * @uses FuelSetMixin\n * @uses MinPowerKwMixin\n * @uses MaxPowerKwMixin\n * @uses AbortSignalMixin\n * @constructor\n * @module Services\n *\n * @param {Object} [options] Options to be passed to the search call,\n *     or an array of such options objects to perform a batch request.\n * @param {Object} [additionalOptions] Additional options to be passed to the service.\n */\n\n/**\n * This option specifies the search radius in meters using the coordinates given to the `center`\n * option as origin.\n *\n * @attribute radius\n * @param {Number} [options.radius=10000] A positive integer value in meters.\n */\nimport { Search } from './search';\nimport { NEARBY_SEARCH } from '../../common/searchTypes';\nimport {\n    nearbySearchEndpoint,\n    batchNearbySearchQueryEndpoint,\n    batchSyncSearchEndpoint,\n    batchSearchEndpoint\n} from 'endpoints';\nimport {\n    singleRequestServiceFactory, batchRequestServiceFactory\n} from '../../core';\n\nclass NearbySearch extends Search {\n    constructor(options, additionalOptions) {\n        super(options, additionalOptions);\n\n        this.fields.__all = {\n            validators: []\n        };\n\n        this.fields.type = {\n            defaultValue: NEARBY_SEARCH,\n            visible: false\n        };\n        this.fields.query = {\n            visible: false\n        };\n        this.fields.center = {\n            required: true\n        };\n        this.fields.radius = {\n            required: false,\n            validators: [validateNumberInInterval(1, 50000)]\n        };\n        this.fields.typeahead = {\n            visible: false\n        };\n    }\n\n    _getRestService() {\n        return {\n            search: singleRequestServiceFactory(nearbySearchEndpoint),\n            batch: batchRequestServiceFactory(100, {\n                single: batchNearbySearchQueryEndpoint,\n                batchSync: batchSyncSearchEndpoint,\n                batch: batchSearchEndpoint\n            })\n        };\n    }\n}\n\nexport function nearbySearch(options, additionalOptions) {\n    return (new NearbySearch(options, additionalOptions)).construct('nearbySearch');\n}\n","/* eslint-disable object-curly-spacing */\n/* eslint-disable max-len */\n/* eslint-disable no-undef */\n/**\n * Makes a placeById request using [Place by Id API](PLACE_BY_ID_URL).\n *\n * The Place by Id service endpoint provides detailed information about the Place found by its identifier (entityId).\n * Currently, Place by Id only supports POI (Points of Interest) ids.\n *\n * Parameters need to be passed to the constructor.\n *\n * ### Response\n * The response is extended with `getTrackingId()` method, which returns the `Tracking-ID`\n * associated with the request.\n *\n * Additionally, the response extends API response by providing `toGeoJson()` method, which converts place by id data into\n * FeatureCollection with <a target=\"_blank\" rel=noopener href=\"https://tools.ietf.org/html/rfc7946#section-3.1.2\">Point</a> geometry.\n *\n * Each point feature represents `poi` from the original response. Properties of `poi` are mapped into feature properties\n *\n * Please refer to {{#crossLinkModule \"Services\"}}Difference between\n * API responses and this library's responses{{/crossLinkModule}} section.\n *\n * @example\n * ```js\n * tt.services.fuzzySearch({\n *      key: <Your API key>,\n *      query: \"pizza\"\n * }).then(function(response) {\n *      tt.services.placeById({\n *          entityId: response.results[0].id,\n *          key: <Your API key>\n *      }).then(function(placeByIdResult) {\n *          console.log(placeByIdResult);\n *      });\n *   });\n * ```\n *\n * @class placeById\n * @module Services\n * @namespace Services.services\n * @uses KeyMixin\n * @uses TrackingIdMixin\n * @uses LanguageMixin\n * @uses AbortSignalMixin\n * @uses RelatedPoisMixin\n * @uses MapcodesMixin\n * @uses TimeZoneMixin\n * @uses OpeningHoursMixin\n * @uses ViewMixin\n * @constructor\n *\n * @param {Object} [options]\n * @param {Object} [additionalOptions] Additional options to be passed to the service.\n */\n\nimport {SERVICE_TYPES} from 'Core/serviceTypes';\nimport {\n    string as validateString,\n    trackingId as validateTrackingId,\n    languageCode as validateLanguageCode,\n    oneOfValue as validateOneOfValue,\n    mapcodes as validateMapcodes\n} from '../validators';\n\nimport {searchLanguage as convertLanguage} from '../converters';\nimport { searchModel } from '../../model/search/search';\nimport parameterApplications from '../../common/parameterApplications';\nimport { modelResponse } from '../../model/modelResponse';\nimport { v4 as uuid } from 'uuid';\nimport { placeByIdEndpoint } from 'endpoints';\nimport { singleRequestServiceFactory, serviceFactory } from '../../core';\n\nconst fields = {\n    key: {\n        validators: [validateString]\n    },\n    trackingId: {\n        validators: [validateTrackingId],\n        application: parameterApplications.HEADER,\n        defaultValue: uuid\n    },\n    /**\n     * @attribute entityId\n     * @param {String} [options.entityId] The identifier of a specific POI,\n     * e.g. `g6Fjo05MRKJpZK81MjgwMDkwMDQyNDY3OTKhdqdVbmlmaWVk`.\n     */\n    entityId: {\n        validators: [validateString],\n        required: true\n    },\n    language: {\n        validators: [validateLanguageCode],\n        converters: [convertLanguage]\n    },\n    relatedPois: {\n        validators: [validateOneOfValue(['off', 'child', 'parent', 'all'], 'relatedPois')]\n    },\n    mapcodes: {\n        validators: [validateMapcodes]\n    },\n    timeZone: {\n        validators: [validateOneOfValue(['iana'], 'timeZone parameter')]\n    },\n    openingHours: {\n        validators: [validateOneOfValue(['nextSevenDays'], 'openingHours parameter')]\n    },\n    view: {\n        validators: [validateOneOfValue(\n            ['AR', 'IL', 'MA', 'IN', 'PK', 'Unified', 'RU', 'TR', 'CN'],\n            'view')]\n    }\n};\n\nexport function placeById(options, additionalOptions) {\n    const singleRequest = singleRequestServiceFactory(placeByIdEndpoint);\n\n    const handleServiceCall = (data, abortSignal) => {\n        return singleRequest(fields, data, abortSignal)\n            .then(response => modelResponse(response, searchModel));\n    };\n\n    return serviceFactory(\n        fields,\n        SERVICE_TYPES.SEARCH,\n        'placeById',\n        handleServiceCall\n    )(options, additionalOptions);\n}\n","import {SERVICE_TYPES} from 'Core/serviceTypes';\nimport parameterApplications from '../../common/parameterApplications';\nimport { v4 as uuid } from 'uuid';\nimport {\n    string as validateString, trackingId as validateTrackingId, languageCode as validateLanguageCode\n} from '../validators';\nimport { poiCategoriesEndpoint } from 'endpoints';\n\nimport { modelResponse } from '../../model/modelResponse';\nimport {\n    singleRequestServiceFactory,\n    serviceFactory\n} from '../../core';\n\n/**\n * The POI Categories service provides a full list of POI (Points of Interest) categories and subcategories together\n * with their translations and synonyms.\n * [Search API - POI Categories](POI_CATEGORIES_URL).\n *\n * Parameters need to be be passed to the constructor.\n *\n * ### Response\n * The response is extended with `getTrackingId()` method, which returns the `Tracking-ID`\n * associated with the request.\n *\n * Please refer to {{#crossLinkModule \"Services\"}}Difference between\n * API responses and this library's responses{{/crossLinkModule}} section.\n *\n * @example\n * ```js\n * function callbackFn(result) {\n *   console.log(result);\n * };\n *\n * tt.services.poiCategories({\n *   key: <Your API key>,\n *   language: 'pl-PL'\n * }).then(callbackFn);\n * ```\n *\n * @class poiCategories\n * @namespace Services.services\n * @module Services\n * @uses KeyMixin\n * @uses LanguageMixin\n * @uses TrackingIdMixin\n * @uses AbortSignalMixin\n * @constructor\n *\n * @param {Object} [options] Options to be passed to the call.\n * @param {Object} [additionalOptions] Additional options to be passed to the service.\n */\n\nconst fields = {\n    key: {\n        validators: [validateString]\n    },\n    trackingId: {\n        validators: [validateTrackingId],\n        application: parameterApplications.HEADER,\n        defaultValue: uuid\n    },\n    language: {\n        validators: [validateLanguageCode]\n    }\n};\n\nexport function poiCategories(options, additionalOptions) {\n    const handleServiceCall = (data, abortSignal) => {\n        const singleRequest = singleRequestServiceFactory(poiCategoriesEndpoint);\n        return singleRequest(fields, data, abortSignal).then(modelResponse);\n    };\n    return serviceFactory(\n        fields,\n        SERVICE_TYPES.SEARCH,\n        'poiCategories',\n        handleServiceCall\n    )(options, additionalOptions);\n}\n","import { SERVICE_TYPES } from 'Core/serviceTypes';\nimport parameterApplications from '../../common/parameterApplications';\nimport { modelResponse } from '../../model/modelResponse';\nimport { v4 as uuid } from 'uuid';\nimport {\n    string as validateString, trackingId as validateTrackingId\n} from '../validators';\nimport { poiDetailsEndpoint } from 'endpoints';\nimport { singleRequestServiceFactory, serviceFactory } from '../../core';\n\n/**\n * Makes a poi details request using the TomTom [POI Details API](POI_DETAILS_URL).\n *\n * This service provides additional information about POIs including:\n * * rating\n * * price range\n * * photo IDs\n * * user reviews\n *\n * This service has **specific terms and conditions of usage**. For more information about this service please\n * refer to the [POI Details API documentation](POI_DETAILS_URL).\n *\n * ### Response\n * The response is extended with `getTrackingId()` method, which returns the `Tracking-ID`\n * associated with the request.\n *\n * Please refer to {{#crossLinkModule \"Services\"}}Difference between\n * API responses and this library's responses{{/crossLinkModule}} section.\n *\n * @class poiDetails\n * @module Services\n * @namespace Services.services\n * @uses KeyMixin\n * @uses TrackingIdMixin\n * @uses AbortSignalMixin\n * @constructor\n *\n * @param {Object} [options] Options to be passed to the call.\n * @param {Object} [additionalOptions] Additional options to be passed to the service.\n */\nconst fields = {\n    key: {\n        validators: [validateString],\n        required: true\n    },\n    trackingId: {\n        validators: [validateTrackingId],\n        application: parameterApplications.HEADER,\n        defaultValue: uuid\n    },\n    /**\n     * @attribute id\n     * @param {String} [options.id] POI details id which is previously retrieved from a Search request.\n     */\n    id: {\n        validators: [validateString],\n        required: true\n    }\n};\n\nexport function poiDetails(options, additionalOptions) {\n    const singleRequest = singleRequestServiceFactory(poiDetailsEndpoint);\n\n    function handleServiceCall(data, abortSignal) {\n        return singleRequest(fields, data, abortSignal).then(modelResponse);\n    }\n\n    return serviceFactory(\n        fields,\n        SERVICE_TYPES.SEARCH,\n        'poiDetails',\n        handleServiceCall\n    )(options, additionalOptions);\n}\n","import { SERVICE_TYPES } from 'Core/serviceTypes';\nimport {\n    string as validateString, integer as validateInteger\n} from '../validators';\nimport {integer as convertInteger} from '../converters';\nimport urlBuilder from '../../requester/urlBuilder';\nimport { poiPhotosEndpoint } from 'endpoints';\nimport { serviceFactory } from '../../core';\n\n/**\n* Points of Interest (POI) Photos service provides photos of the POI.\n* Use this service to generate the URL to retrieve the image.\n*\n* This service has **specific terms and conditions of usage**. For more information about this service please\n* refer to the [POI Photos API documentation](POI_PHOTOS_URL).\n*\n*\n* @class poiPhotos\n* @module Services\n* @namespace Services.services\n* @uses KeyMixin\n* @constructor\n*\n* @param {Object} [options] Options to be passed to the call.\n*/\nconst fields = {\n    key: {\n        validators: [validateString],\n        required: true\n    },\n    /**\n     * @attribute id\n     * @param {Number} [options.id] Photo id which is previously retrieved from the\n     * {{#crossLink \"Services.services.poiDetails\"}}POI Details service{{/crossLink}}.\n     */\n    id: {\n        validators: [validateString],\n        required: true\n    },\n\n    /**\n     * The maximum height of the image, which will be returned by the service.\n     * If only height is provided, the image will be scaled according to that dimension.\n     * If none of dimensions is provided, the service will return the original size image.\n     * If width is also provided, service will fit, center and crop the image to fill both desired dimensions.\n     * If height provided is bigger than the original image's height, the service will return the image\n     * with original height.\n     *\n     * @attribute height\n     * @param {Number} [options.height] The maximum height of the image.\n     */\n    height: {\n        validators: [validateInteger],\n        converters: [convertInteger]\n    },\n\n    /**\n     * The maximum width of the image, which will be returned by the service.\n     * If only width is provided, the image will be scaled according to that dimension.\n     * If none of dimensions is provided, the service will return the original size image.\n     * If height is also provided, service will fit, center and crop the image to fill both desired dimensions.\n     * If width provided is bigger than the original image's width, the service will return the image\n     * with original width.\n     *\n     * @attribute width\n     * @param {Number} [options.width] The maximum width of the image.\n     */\n    width: {\n        validators: [validateInteger],\n        converters: [convertInteger]\n    }\n};\n\nexport function poiPhotos(options, additionalOptions) {\n    function handleServiceCall(data) {\n        return 'https://' + urlBuilder(poiPhotosEndpoint, {}, data);\n    }\n    return serviceFactory(\n        fields,\n        SERVICE_TYPES.SEARCH,\n        'poiPhotos',\n        handleServiceCall\n    )(options, additionalOptions);\n}\n","/* eslint-disable max-len */\n/**\n * Makes a search request using the TomTom\n * [Search API - Points of Interest Search](POINTS_INTEREST_SEARCH_URL).\n *\n * Parameters need to be be passed to the constructor.\n *\n * ### Response\n * The response is extended with `getTrackingId()` method, which returns the `Tracking-ID`\n * associated with the request.\n *\n * Additionally, the response extends API response by providing `toGeoJson()` method, which converts points of interests search data into\n * FeatureCollection with <a target=\"_blank\" rel=noopener href=\"https://tools.ietf.org/html/rfc7946#section-3.1.2\">Point</a> geometry.\n *\n * Each point feature represents `poi` from the original response. Properties of `poi` are mapped into feature properties\n *\n * Please refer to {{#crossLinkModule \"Services\"}}Difference between\n * API responses and this library's responses{{/crossLinkModule}} section.\n *\n * @example\n * ```js\n * function callbackFn(result) {\n *    console.log(result);\n * };\n *\n * tt.services.poiSearch(({\n *   key: <Your API key>,\n *   query: 'pizza'\n * }).then(callbackFn);\n * ```\n *\n * @class poiSearch\n * @namespace Services.services\n * @extends Search\n * @uses ExtendedPostalCodesForMixin\n * @uses CenterMixin\n * @uses BoundingBoxMixin\n * @uses CountrySetMixin\n * @uses OffsetMixin\n * @uses BestResultMixin\n * @uses QueryMixin\n * @uses TypeaheadMixin\n * @uses CategorySetMixin\n * @uses ViewMixin\n * @uses BrandSetMixin\n * @uses ConnectorSetMixin\n * @uses OpeningHoursMixin\n * @uses MapcodesMixin\n * @uses FuelSetMixin\n * @uses MinPowerKwMixin\n * @uses MaxPowerKwMixin\n * @uses AbortSignalMixin\n * @constructor\n * @module Services\n *\n * @param {Object} [options] Options to be passed to the search call,\n *     or an array of such options objects to perform a batch request.\n * @param {Object} [additionalOptions] Additional options to be passed to the service.\n */\n\n/**\n * This option specifies the search radius in meters using the coordinates given to the `center`\n * option as origin.\n *\n * @attribute radius\n * @param {Number} [options.radius=0] A positive integer value in meters.\n */\n\n/* eslint-enable */\nimport { Search } from './search';\nimport { boundingBox } from './searchParameters';\nimport { POI_SEARCH } from '../../common/searchTypes';\nclass PoiSearch extends Search {\n    constructor(options, additionalOptions) {\n        super(options, additionalOptions);\n\n        this.fields.type = {\n            defaultValue: POI_SEARCH,\n            visible: false\n        };\n\n        this.fields.boundingBox = boundingBox();\n    }\n}\n\nexport function poiSearch(options, additionalOptions) {\n    return (new PoiSearch(options, additionalOptions)).construct('poiSearch');\n}\n","import {SERVICE_TYPES} from 'Core/serviceTypes';\nimport {\n    string as validateString, trackingId as validateTrackingId, naturalInteger as validateNaturalInteger,\n    point as validatePoint, countrySet as validateCountrySet, languageCode as validateLanguageCode,\n    clientTime as validateClientTime, limit as validateLimit\n} from '../validators';\nimport {searchLanguage as convertLanguage, point as convertPoint} from '../../services/converters';\nimport parameterApplications from '../../common/parameterApplications';\nimport {modelResponse} from '../../model/modelResponse';\nimport { v4 as uuid } from 'uuid';\nimport { autocompleteEndpoint } from 'endpoints';\nimport { singleRequestServiceFactory, serviceFactory } from '../../core';\n/**\n* The Autocomplete API enables you to make a more meaningful Search API call\n* by recognizing entities inside an input query and offering them as query terms.\n*\n* Makes a search request using the TomTom [Search API - Autocomplete](AUTOCOMPLETE_URL).\n*\n* ### Response\n* The response is extended with `getTrackingId()` method, which returns the `Tracking-ID`\n* associated with the request.\n*\n* Please refer to {{#crossLinkModule \"Services\"}}Difference between\n* API responses and this library's responses{{/crossLinkModule}} section.\n*\n* @class autocomplete\n* @module Services\n* @namespace Services.services\n* @uses KeyMixin\n* @uses QueryMixin\n* @uses LimitMixin\n* @uses CountrySetMixin\n* @uses RadiusMixin\n* @uses CenterMixin\n* @uses TrackingIdMixin\n* @uses AbortSignalMixin\n* @constructor\n*\n* @param {Object} [options]\n* @param {Object} [additionalOptions] Additional options to be passed to the service.\n*/\nconst fields = {\n    key: {\n        validators: [validateString]\n    },\n    trackingId: {\n        validators: [validateTrackingId],\n        application: parameterApplications.HEADER,\n        defaultValue: uuid\n    },\n    query: {\n        validators: [validateString],\n        required: true,\n        application: parameterApplications.PATH\n    },\n    /**\n     * The value should correspond to one of the supported IETF language codes.\n     * The list is available [here](SEARCH_API_SUPPORTED_LANGS_URL).\n     *\n     * The code is case insensitive.\n     *\n     * @attribute language\n     * @param {String} options.language Language code that decides in which language the search results\n     * should be returned.\n     */\n    language: {\n        validators: [validateLanguageCode],\n        converters: [convertLanguage],\n        required: true\n    },\n    limit: {\n        validators: [validateLimit]\n    },\n    countrySet: {\n        validators: [validateCountrySet]\n    },\n    radius: {\n        validators: [validateNaturalInteger]\n    },\n    /**\n     * A result is only included if at least one segment is of any of the indicated types.\n     *   Value: A comma-separated list that consists of the types of segments.\n     *   Usage examples:\n     *   * resultSet=category\n     *   * resultSet=brand\n     *   * resultSet=category,brand\n     * @attribute resultSet\n     * @param {String} [options.resultSet] Restricts the result space based on their segment types.\n     */\n    resultSet: {\n        validators: [validateString]\n    },\n    center: {\n        converters: [convertPoint],\n        validators: [validatePoint],\n        cast: (center, requestOptions) => {\n            const coordinates = center.split(',');\n            requestOptions.lat = coordinates[0];\n            requestOptions.lon = coordinates[1];\n        }\n    },\n    sessionId: {\n        validators: [validateString]\n    },\n    clientTime: {\n        validators: [validateClientTime]\n    }\n};\n\nexport function autocomplete(options, additionalOptions) {\n    const singleRequest = singleRequestServiceFactory(autocompleteEndpoint);\n\n    function handleServiceCall(data, abortSignal) {\n        return singleRequest(fields, data, abortSignal)\n            .then(response => modelResponse(response));\n    }\n\n    return serviceFactory(\n        fields,\n        SERVICE_TYPES.SEARCH,\n        'autocomplete',\n        handleServiceCall\n    )(options, additionalOptions);\n}\n","import {PointFacade} from '../pointFacade';\n\nconst pointFacade = new PointFacade({\n    isLatLon: true\n});\n\nconst convertPoints = elem => {\n    if (elem.position) {\n        elem.position = pointFacade.convert(elem.position);\n    }\n\n    if (elem.address && elem.address.boundingBox) {\n        elem.address.boundingBox.northEast = pointFacade.convert(elem.address.boundingBox.northEast);\n        elem.address.boundingBox.southWest = pointFacade.convert(elem.address.boundingBox.southWest);\n    }\n};\n\nexport function reverseGeocodeModel(json) {\n    // convert points\n    json.addresses.forEach(result => {\n        if (Array.isArray(result)) {\n            result.forEach(r => {\n                convertPoints(r);\n            });\n        }\n        convertPoints(result);\n    });\n    return json;\n}\n","import {reverseGeocodeModel} from './reverseGeocode';\n\nexport function batchModel(data) {\n    if (!(data.batchItems instanceof Array)) {\n        return null;\n    }\n\n    data.batchItems = data.batchItems.map((batchItem) => {\n        if (batchItem.response.error) {\n            return { error: batchItem.response.error};\n        } else {\n            return reverseGeocodeModel(batchItem.response);\n        }\n    });\n\n    return data;\n}\n","import {SERVICE_TYPES} from 'Core/serviceTypes';\nimport {reverseGeocodeModel} from '../../model/reverseGeocode/reverseGeocode';\nimport {batchModel} from '../../model/reverseGeocode/batchReverseGeocode';\nimport {addFields} from '../utils';\nimport {modelResponse} from '../../model/modelResponse';\nimport {\n    reverseGeocodeEndpoint,\n    batchReverseGeocodeQueryEndpoint,\n    batchSearchEndpoint,\n    batchSyncSearchEndpoint\n} from 'endpoints';\nimport {\n    singleRequestServiceFactory, batchRequestServiceFactory, serviceFactory\n} from '../../core';\n\nconst TYPES = {\n    reverseGeocode: 'reverseGeocode',\n    crossStreetLookup: 'reverseGeocode/crossStreet'\n};\n\nfunction ReverseGeocodeBase(options, additionalOptions) {\n    this.options = options;\n    this.additionalOptions = additionalOptions;\n    this.fields = {};\n}\n\nReverseGeocodeBase.prototype.TYPE = TYPES;\nReverseGeocodeBase.prototype.construct = function(serviceName) {\n    const mergedFields = addFields(this.fields, this.defaultFields);\n\n    const service = serviceFactory(\n        mergedFields,\n        SERVICE_TYPES.SEARCH,\n        serviceName || 'reverseGeocodeBase',\n        this.handleServiceCall.bind(this),\n        this.handleBatchServiceCall.bind(this)\n    );\n\n    return service(this.options, this.additionalOptions);\n\n};\nReverseGeocodeBase.prototype.handleServiceCall = function(data, abortSignal) {\n    const singleRequest = singleRequestServiceFactory(reverseGeocodeEndpoint);\n    return singleRequest(this.fields, data, abortSignal)\n        .then(response => modelResponse(response, reverseGeocodeModel));\n};\n\nReverseGeocodeBase.prototype.handleBatchServiceCall = function(data, abortSignal) {\n    const batchRequest = batchRequestServiceFactory(100, {\n        single: batchReverseGeocodeQueryEndpoint,\n        batch: batchSearchEndpoint,\n        batchSync: batchSyncSearchEndpoint\n    });\n    return batchRequest(this.fields, data, abortSignal)\n        .then(response => modelResponse(response, batchModel));\n};\n\nfunction reverseGeocodeConstructor(options) {\n    return (new ReverseGeocodeBase(options)).construct();\n}\n\nreverseGeocodeConstructor.prototype.constructor = ReverseGeocodeBase;\n\nexport {reverseGeocodeConstructor as reverseGeocodeBase};\n","export const reverseGeocodeType = 'reverseGeocode';\nexport const crossStreetLookupType = 'reverseGeocode/crossStreet';\n","import {\n    bool as validateBool, string as validateString, trackingId as validateTrackingId, oneOfValue as validateOneOfValue,\n    naturalInteger as validateNaturalInteger, languageCode as validateLanguageCode, point as validatePoint,\n    entityType as validateEntityType, number as validateNumber, roadUse as validateRoadUse,\n    mapcodes as validateMapcodes, dateTime as validateDateTime, limit as validateLimit\n} from '../validators';\nimport {\n    roadUse as convertRoadUse, array as convertArray, point as convertPoint,\n    commaSeparated as convertCommaSeparated\n} from '../converters';\nimport {reverseGeocodeType, crossStreetLookupType} from './types';\nimport parameterApplications from '../../common/parameterApplications';\nimport { v4 as uuid } from 'uuid';\n\nconst geocodeBaseFields = {\n    key: {\n        validators: [validateString]\n    },\n    trackingId: {\n        validators: [validateTrackingId],\n        application: parameterApplications.HEADER,\n        defaultValue: uuid\n    },\n    language: {\n        validators: [validateLanguageCode]\n    },\n    position: {\n        converters: [convertPoint],\n        validators: [validatePoint],\n        required: true,\n        application: parameterApplications.PATH\n    },\n    heading: {\n        validators: [validateNumber]\n    },\n    radius: {\n        validators: [validateNaturalInteger]\n    },\n    protocol: {\n        validators: [validateOneOfValue(['http', 'https'], 'protocol')]\n    },\n    view: {\n        validators: [validateOneOfValue(['AR', 'IL', 'MA', 'IN', 'PK', 'Unified', 'RU', 'TR', 'CN'], 'view')]\n    },\n    allowFreeformNewline: {\n        validators: [validateBool]\n    }\n};\n\nconst additionalGeocodeFields = {\n    type: {\n        defaultValue: reverseGeocodeType,\n        visible: false,\n        application: parameterApplications.PATH\n    },\n\n    entityType: {\n        converters: [convertArray, convertCommaSeparated],\n        validators: [validateEntityType]\n    },\n\n    returnSpeedLimit: {\n        validators: [validateBool]\n    },\n\n    number: {\n        validators: [validateString]\n    },\n\n    returnRoadUse: {\n        validators: [validateBool]\n    },\n\n    roadUse: {\n        converters: [convertRoadUse],\n        validators: [validateRoadUse]\n    },\n\n    streetNumber: {\n        validators: [validateString]\n    },\n\n    returnMatchType: {\n        validators: [validateBool]\n    },\n\n    mapcodes: {\n        validators: [validateMapcodes]\n    },\n\n    dateTime: {\n        validators: [validateDateTime]\n    }\n};\n\nconst crossStreetLookupFields = {\n    type: {\n        defaultValue: crossStreetLookupType,\n        visible: false,\n        application: parameterApplications.PATH\n    },\n\n    limit: {\n        validators: [validateLimit]\n    }\n};\n\nexport function reverseGeocodeParams(type) {\n    if (type === reverseGeocodeType) {\n        return Object.assign({}, geocodeBaseFields, additionalGeocodeFields);\n    } else if (type === crossStreetLookupType) {\n        return Object.assign({}, geocodeBaseFields, crossStreetLookupFields);\n    }\n    throw new Error('Unsupported geocode type: ' + type);\n}\n","/* eslint-disable max-len */\n/**\n * Reverse geocode service implementation.\n *\n * It converts geographical coordinates into a textual address representation using the TomTom\n * [Search API - Reverse Geocode](REVERSE_GEOCODE_URL).\n *\n * Parameters need to be passed to the constructor.\n *\n * ### Response\n *\n * The final response from the service is a JSON object with the following structure:\n *\n * ```js\n * {\n *   address: {\n *     buildingNumber: 19,\n *     streetNumber: 19,\n *     landmark: '',\n *     street: 'N 2nd St',\n *     streetName: 'N 2nd St',\n *     streetNameAndNumber: '',\n *     speedLimit: '',\n *     countryCode: 'U',\n *     countrySubdivision: 'CA',\n *     countrySecondarySubdivision: 'Santa Clara',\n *     countryTertiarySubdivision: '',\n *     municipality: 'San Jose',\n *     postalCode: '95113',\n *     municipalitySubdivision: 'San Francisco Bay Area',\n *     freeformAddress: '19 N 2nd St, San Jose, CA, 95113'\n *   },\n *    position: {\n *     lng: -121.8898',\n *     lat: '37.337083\n *   },\n *   roadUse: ['LocalStreet']\n * }\n * ```\n *\n * The response is also extended with `getTrackingId()` method, which returns the `Tracking-ID`\n * associated with the request.\n *\n * Please refer to {{#crossLinkModule \"Services\"}}Difference between\n * API responses and this library's responses{{/crossLinkModule}} section.\n *\n * @example\n * ```js\n * function callbackFn(response) {\n *   console.log(response);\n * }\n * tt.services.reverseGeocode({\n *   key: <Your API key>,\n *   position: '19.449: 51.759'\n * }).then(callbackFn);\n * ```\n *\n * @class reverseGeocode\n * @namespace Services.services\n * @module Services\n * @uses KeyMixin\n * @uses ProtocolMixin\n * @uses RadiusMixin\n * @uses PositionMixin\n * @uses HeadingMixin\n * @uses LanguageMixin\n * @uses ViewMixin\n * @uses ReturnMatchTypeMixin\n * @uses AllowFreeformNewlineMixin\n * @uses BatchMixin\n * @uses EntityTypeMixin\n * @uses MapcodesMixin\n * @uses TrackingIdMixin\n * @uses AbortSignalMixin\n *\n * @constructor\n * @param {Object} [options] Options to be passed to the reverseGeocode call,\n *     or an array of such options objects to perform a batch request.\n * @param {Object} [additionalOptions] Additional options to be passed to the service.\n */\n/* eslint-enable */\n\n/**\n * Allows, if possible, the receiving of speed limit information at the given location.\n *\n * @attribute returnSpeedLimit\n * @param {Boolean} [options.returnSpeedLimit] Enable or disable the feature.\n */\n\n/**\n * If a street number is sent in along with the request, the response may\n * include the side of the street (Left/Right), and also an offset position for that street number.\n *\n * @attribute number\n * @param {String} [options.number] Street number as a string.\n */\n\n/**\n * Requires including a road use array for reversegeocodes at street level.\n *\n * @attribute returnRoadUse\n * @param {Boolean} [options.returnRoadUse] Enable or disable the feature.\n */\n\n/**\n * Use this option if you want to restrict the result to one, or a group of the following road uses:\n * - `\"LimitedAccess\"`\n * - `\"Arterial\"`\n * - `\"Terminal\"`\n * - `\"Ramp\"`\n * - `\"Rotary\"`\n * - `\"LocalStreet\"`\n *\n * @attribute roadUse\n * @param {String[]|String} [options.roadUse] An array of strings, or just one string with comma-separated values.\n */\n\n/**\n * Represents the street's number for the structured address.\n *\n * @attribute streetNumber\n * @param {String} [options.streetNumber] The street's number.\n */\n\n/**\n * * It allows the service to decide whether the Daylight Saving Time time zone should be used or not.\n * * It must conform to RFC 3339.\n * @attribute dateTime\n * @param {String} [options.dateTime] The date and time used to return time zone information.\n */\n\nimport {reverseGeocodeBase} from './reverseGeocodeBase';\nimport {reverseGeocodeParams} from './reverseGeocodeParameters';\nimport {reverseGeocodeType} from './types';\n\nexport function reverseGeocode(options, additionalOptions) {\n    const ReverseGeocodeBasePrototype = reverseGeocodeBase.prototype.constructor;\n\n    function ReverseGeocode(options, additionalOptions) {\n        ReverseGeocodeBasePrototype.call(this, options, additionalOptions);\n        this.fields = reverseGeocodeParams(reverseGeocodeType);\n    }\n\n    ReverseGeocode.prototype = new ReverseGeocodeBasePrototype();\n    ReverseGeocode.prototype.constructor = ReverseGeocode;\n    return (new ReverseGeocode(options, additionalOptions)).construct('reverseGeocode');\n}\n","import { convertResponsePoints, toGeoJson } from '../modelUtils';\n\nexport function geocodeModel(data) {\n    if (!data) {\n        return data;\n    }\n    // converts location points\n    if (Array.isArray(data.results)) {\n        data.results.forEach(result => {\n            if (Array.isArray(result)) {\n                result.forEach(r => {\n                    convertResponsePoints(r);\n                });\n            } else {\n                convertResponsePoints(result);\n            }\n        });\n    }\n\n    convertResponsePoints(data);\n\n    return Object.assign(data, {\n        toGeoJson: () => toGeoJson(data)\n    });\n}\n","import {geocodeModel} from './geocode';\n\nexport function batchModel(data) {\n    if (!(data.batchItems instanceof Array)) {\n        return null;\n    }\n\n    data.batchItems = data.batchItems.map((batchItem) => {\n        if (batchItem.response.error) {\n            return { error: batchItem.response.error };\n        } else {\n            return geocodeModel(batchItem.response);\n        }\n    });\n    return data;\n}\n","/* eslint-disable max-len */\n/**\n * Allows requests to be made using the TomTom's\n * [Search API - Geocode](GEOCODE_SERVICE_URL).\n *\n * Parameters need to be passed to the constructor.\n *\n * ### Response\n * The response is extended with `getTrackingId()` method, which returns the `Tracking-ID`\n * associated with the request.\n *\n * Additionally, the response extends API response by providing `toGeoJson()` method, which converts geocode data into\n * FeatureCollection with <a target=\"_blank\" rel=noopener href=\"https://tools.ietf.org/html/rfc7946#section-3.1.2\">Point</a> geometry.\n *\n * Each point feature represents `poi` from the original response. Properties of `poi` are mapped into feature properties\n *\n * Please refer to {{#crossLinkModule \"Services\"}}Difference between\n * API responses and this library's responses{{/crossLinkModule}} section.\n *\n * @example\n * ```js\n * function callbackFn(result) {\n *   console.log(result);\n * };\n * tt.services.geocode({\n *   key: <Your API Key>,\n *   query: 'Amsterdam, The Netherlands'\n * }).then(callbackFn);\n * ```\n *\n * @class geocode\n * @namespace Services.services\n * @module Services\n * @uses BatchMixin\n * @uses KeyMixin\n * @uses QueryMixin\n * @uses TypeaheadMixin\n * @uses LimitMixin\n * @uses OffsetMixin\n * @uses LanguageMixin\n * @uses BoundingBoxMixin\n * @uses CenterMixin\n * @uses CountrySetMixin\n * @uses RadiusMixin\n * @uses BestResultMixin\n * @uses ProtocolMixin\n * @uses ViewMixin\n * @uses ExtendedPostalCodesForMixin\n * @uses TimeZoneMixin\n * @uses MapcodesMixin\n * @uses TrackingIdMixin\n * @uses EntityTypeSetMixin\n * @uses AbortSignalMixin\n * @constructor\n *\n * @param {Object} [options] Options to be passed to the geocode call,\n *     or an array of such option objects to perform a batch request.\n * @param {Object} [additionalOptions] Additional options to be passed to the service.\n *\n */\nimport {SERVICE_TYPES} from 'Core/serviceTypes';\nimport {geocodeModel} from 'model/geocode/geocode';\nimport {batchModel} from 'model/geocode/batchGeocode';\nimport geocodeParams from './geocodeParameters';\nimport { modelResponse } from '../../model/modelResponse';\n\nimport {\n    batchSearchQueryEndpoint,\n    batchSyncSearchEndpoint,\n    batchSearchEndpoint,\n    geocodeEndpoint\n} from 'endpoints';\nimport {\n    singleRequestServiceFactory, batchRequestServiceFactory, serviceFactory\n} from '../../core';\n\nconst fields = geocodeParams.create();\n\nexport function geocode(options, additionalOptions) {\n    const singleRequest = singleRequestServiceFactory(geocodeEndpoint);\n    const batchRequest = batchRequestServiceFactory(100, {\n        single: batchSearchQueryEndpoint,\n        batchSync: batchSyncSearchEndpoint,\n        batch: batchSearchEndpoint\n    });\n\n    function handleServiceCall(requestOptions, abortSignal) {\n        return singleRequest(fields, requestOptions, abortSignal)\n            .then(({ data, trackingId }) => {\n                return modelResponse({\n                    data: requestOptions.bestResult ? data.results[0] : data,\n                    trackingId\n                }, geocodeModel);\n            });\n    }\n    function handleBatchServiceCall(data, abortSignal) {\n        return batchRequest(fields, data, abortSignal).then(results => modelResponse(results, batchModel));\n    }\n    return serviceFactory(\n        fields, SERVICE_TYPES.SEARCH,\n        'geocode',\n        handleServiceCall,\n        handleBatchServiceCall\n    )(options, additionalOptions);\n}\n","import {\n    bool as validateBool, string as validateString, trackingId as validateTrackingId,\n    validateBoundingBox, oneOfValue as validateOneOfValue,\n    positiveInteger as validatePositiveInteger, naturalInteger as validateNaturalInteger,\n    languageCode as validateLanguageCode, point as validatePoint, countrySet as validateCountrySet,\n    entityType as validateEntityType\n} from 'services/validators';\n\nimport {\n    point as convertPoint, convertBoundingBox, array as convertArray,\n    commaSeparated as convertCommaSeparated\n} from 'services/converters';\nimport parameterApplications from 'common/parameterApplications';\nimport { v4 as uuid } from 'uuid';\n\nexport default {\n    create: () => {\n        return {\n            extendedPostalCodesFor: {\n                validators: [validateString]\n            },\n            type: {\n                defaultValue: 'geocode',\n                application: parameterApplications.PATH\n            },\n            key: {\n                validators: [validateString]\n            },\n            trackingId: {\n                validators: [validateTrackingId],\n                application: parameterApplications.HEADER,\n                defaultValue: uuid\n            },\n            query: {\n                validators: [validateString],\n                required: true,\n                application: parameterApplications.PATH\n            },\n            typeahead: {\n                validators: [validateBool]\n            },\n            limit: {\n                validators: [validatePositiveInteger]\n            },\n            view: {\n                validators: [validateOneOfValue(\n                    ['AR', 'IL', 'MA', 'IN', 'PK', 'Unified', 'RU', 'TR', 'CN'],\n                    'view')]\n            },\n            offset: {\n                validators: [validateNaturalInteger],\n                name: 'ofs'\n            },\n            language: {\n                validators: [validateLanguageCode]\n            },\n            boundingBox: {\n                validators: [validateBoundingBox], converters: [convertBoundingBox],\n                cast: (boundingBox, requestOptions) => {\n                    requestOptions.topLeft = `${boundingBox.maxLat},${boundingBox.minLon}`;\n                    requestOptions.btmRight = `${boundingBox.minLat},${boundingBox.maxLon}`;\n                }\n            },\n            center: {\n                converters: [convertPoint],\n                validators: [validatePoint],\n                cast: (center, requestOptions) => {\n                    const coordinates = center.split(',');\n                    requestOptions.lat = coordinates[0];\n                    requestOptions.lon = coordinates[1];\n                }\n            },\n            countrySet: {\n                validators: [validateCountrySet]\n            },\n            radius: {\n                validators: [validateNaturalInteger]\n            },\n            bestResult: {\n                validators: [validateBool],\n                cast: (bestResults, requestOptions) => {\n                    if (!bestResults) {\n                        return;\n                    }\n                    requestOptions.limit = 1;\n                    requestOptions.ofs = 0;\n                }\n            },\n            protocol: {\n                validators: [validateOneOfValue(['http', 'https'], 'protocol')]\n            },\n            timeZone: {\n                validators: [validateOneOfValue(['iana'], 'timeZone parameter')]\n            },\n            entityTypeSet: {\n                converters: [convertArray, convertCommaSeparated],\n                validators: [validateEntityType]\n            }\n        };\n    }\n};\n","/* eslint-disable max-len */\n/**\n * It converts geographical coordinates into a textual address representation using the TomTom\n * [Search API - CrossStreet lookup](CROSS_STREET_LOOKUP_URL).\n *\n * Parameters need to be passed to the constructor.\n *\n * ### Response\n * The final response from the service is a JSON object with the following structure:\n *\n * ```js\n * {\n *   address: {\n *     buildingNumber: 19,\n *     streetNumber: 19,\n *     street: 'N 2nd St',\n *     streetName: 'N 2nd St',\n *     crossStreet: 'E SANTA CLARA ST'\n *     streetNameAndNumber: '',\n *     speedLimit: '',\n *     countryCode: 'US\",\n *     countrySubdivision: \"'A',\n *     countrySecondarySubdivision: 'Santa Clara',\n *     countryTertiarySubdivision: '',\n *     municipality: 'San Jose',\n *     postalCode: '95113',\n *     municipalitySubdivision: \"San Francisco Bay Area',\n *     freeformAddress: 'E SANTA CLARA ST &amp; N 2nd St, San Jose, CA, 95113'\n *   },\n *   position: {\n *     lng: -121.8898',\n *     lat: '37.337083\n *   }\n * }\n * ```\n *\n * The response is also extended with `getTrackingId()` method, which returns the `Tracking-ID`\n * associated with the request.\n *\n * Please refer to {{#crossLinkModule \"Services\"}}Difference between\n * API responses and this library's responses{{/crossLinkModule}} section.\n *\n * @example\n * ```js\n * tt.services.crossStreetLookup({\n *   key: <Your API key>,\n *   position: '19.449,51.759'\n * }).then(function(response) {\n *   console.log(response);\n * });\n * ```\n *\n * @class crossStreetLookup\n * @namespace Services.services\n * @module Services\n * @constructor\n * @uses RadiusMixin\n * @uses ProtocolMixin\n * @uses KeyMixin\n * @uses LimitMixin\n * @uses LanguageMixin\n * @uses PositionMixin\n * @uses HeadingMixin\n * @uses ViewMixin\n * @uses AllowFreeformNewlineMixin\n * @uses BatchMixin\n * @uses TrackingIdMixin\n * @uses AbortSignalMixin\n *\n * @param {Object} [options]\n * @param {Object} [additionalOptions] Additional options to be passed to the service.\n */\n/* eslint-enable max-len */\nimport {reverseGeocodeBase} from './reverseGeocodeBase';\nimport {reverseGeocodeParams} from './reverseGeocodeParameters';\nimport {crossStreetLookupType} from './types';\n\nexport function crossStreetLookup(options, additionalOptions) {\n    const ReverseGeocodeBasePrototype = reverseGeocodeBase.prototype.constructor;\n\n    function CrossStreetLookup(options, additionalOptions) {\n        ReverseGeocodeBasePrototype.call(this, options, additionalOptions);\n\n        this.fields = reverseGeocodeParams(crossStreetLookupType);\n    }\n\n    CrossStreetLookup.prototype = new ReverseGeocodeBasePrototype();\n    CrossStreetLookup.prototype.constructor = CrossStreetLookup;\n    return (new CrossStreetLookup(options, additionalOptions)).construct('crossStreetLookup');\n}\n","/* eslint-disable object-curly-spacing */\n/* eslint-disable no-undef */\n/* eslint-disable max-len */\n/**\n * Makes a request using the TomTom\n * [Search API - Structured Geocode](STRUCTURED_GEOCODE_URL).\n *\n * Parameters can be passed to the constructor.\n *\n * ### Response\n * The response is extended with `getTrackingId()` method, which returns the `Tracking-ID`\n * associated with the request.\n *\n * Additionally, the response extends API response by providing `toGeoJson()` method, which converts structured geocode data into\n * FeatureCollection with <a target=\"_blank\" rel=noopener href=\"https://tools.ietf.org/html/rfc7946#section-3.1.2\">Point</a> geometry.\n *\n * Each point feature represents `poi` from the original response. Properties of `poi` are mapped into feature properties\n *\n * Please refer to {{#crossLinkModule \"Services\"}}Difference between\n * API responses and this library's responses{{/crossLinkModule}} section.\n *\n * @class structuredGeocode\n * @namespace Services.services\n * @module Services\n * @uses KeyMixin\n * @uses LimitMixin\n * @uses OffsetMixin\n * @uses LanguageMixin\n * @uses ProtocolMixin\n * @uses BestResultMixin\n * @uses BatchMixin\n * @uses ViewMixin\n * @uses TimeZoneMixin\n * @uses MapcodesMixin\n * @uses TrackingIdMixin\n * @uses ExtendedPostalCodesForMixin\n * @uses EntityTypeSetMixin\n * @uses AbortSignalMixin\n * @constructor\n *\n * @param {Object} [options] Options to be passed to the structured geocoding call,\n *     or an array of such options objects to perform batch request.\n * @param {Object} [additionalOptions] Additional options to be passed to the service.\n * @param {String} options.countryCode The two-letter code of the country being targeted.\n *\n * @example\n * ```javascript\n * function callbackFn(result) {\n *   console.log(result);\n * };\n * tt.services.structuredGeocode({\n *   key: <Your API key>,\n *   countryCode: 'GB'\n * });\n * ```\n */\n/* eslint-enable max-len */\n\nimport {SERVICE_TYPES} from 'Core/serviceTypes';\nimport {geocodeModel} from '../../model/geocode/geocode';\nimport {batchModel} from '../../model/geocode/batchGeocode';\nimport structureGeocodeParameters from './structureGeocodeParameters';\nimport {modelResponse} from '../../model/modelResponse';\nimport {\n    structuredGeocodeEndpoint,\n    batchSearchEndpoint,\n    batchStructuredGeocodeQueryEndpoint,\n    batchSyncSearchEndpoint\n} from 'endpoints';\nimport {\n    singleRequestServiceFactory, batchRequestServiceFactory, serviceFactory\n} from '../../core';\n\nconst fields = structureGeocodeParameters();\n\nfunction checkBestResult(data) {\n    const result = Boolean(data.bestResult);\n    delete data.bestResult;\n    return result;\n}\n\nfunction modifyRequestParams(data) {\n    const bestResult = checkBestResult(data);\n    if (bestResult) {\n        data.limit = 1;\n        data.offset = 0;\n    }\n}\n\nexport function structuredGeocode(options, additionalOptions) {\n    const batchRequest = batchRequestServiceFactory(100, {\n        single: batchStructuredGeocodeQueryEndpoint,\n        batch: batchSearchEndpoint,\n        batchSync: batchSyncSearchEndpoint\n    });\n    const singleRequest = singleRequestServiceFactory(structuredGeocodeEndpoint);\n\n    function handleBatchServiceCall(data, abortSignal) {\n        data.batchItems.forEach(modifyRequestParams);\n        return batchRequest(fields, data, abortSignal).then(response => modelResponse(response, batchModel));\n    }\n\n    function handleServiceCall(data, abortSignal) {\n        const bestResult = Boolean(data.bestResult);\n        modifyRequestParams(data);\n        return singleRequest(fields, data, abortSignal)\n            .then(({ data, trackingId }) => {\n                return modelResponse({\n                    data: bestResult ? data.results[0] : data,\n                    trackingId\n                }, geocodeModel);\n            });\n    }\n\n    return serviceFactory(\n        fields,\n        SERVICE_TYPES.SEARCH,\n        'structuredGeocode',\n        handleServiceCall,\n        handleBatchServiceCall\n    )(options, additionalOptions);\n}\n","import parameterApplications from 'common/parameterApplications';\nimport { v4 as uuid } from 'uuid';\nimport {\n    bool as validateBool, string as validateString, trackingId as validateTrackingId, oneOfValue as validateOneOfValue,\n    naturalInteger as validateNaturalInteger, languageCode as validateLanguageCode, entityType as validateEntityType,\n    limit as validateLimit, countryCode as validateCountryCode\n} from '../validators';\nimport {commaSeparated as convertCommaSeparated, array as convertArray} from '../converters';\n\nexport default () => {\n    return {\n        key: {\n            validators: [validateString]\n        },\n        trackingId: {\n            validators: [validateTrackingId],\n            application: parameterApplications.HEADER,\n            defaultValue: uuid\n        },\n        countryCode: {\n            validators: [validateCountryCode],\n            required: true\n        },\n        limit: {\n            validators: [validateLimit]\n        },\n        view: {\n            validators: [validateOneOfValue(\n                ['AR', 'IL', 'MA', 'IN', 'PK', 'Unified', 'RU', 'TR', 'CN'],\n                'view')]\n        },\n        offset: {\n            validator: [validateNaturalInteger],\n            name: 'ofs'\n        },\n        language: {\n            validators: [validateLanguageCode]\n        },\n\n        /**\n         * Represents the street's number for the structured address.\n         *\n         * @attribute streetNumber\n         * @param {String} [options.streetNumber] The street's number.\n         */\n        streetNumber: {\n            validators: [validateString]\n        },\n\n        /**\n         * Represents the street's name for the structured address.\n         *\n         * @attribute streetName\n         * @param {String} [options.streetName] The street's name.\n         */\n        streetName: {\n            validators: [validateString]\n        },\n\n        /**\n         * Represents the cross street's name for the structured address.\n         *\n         * @attribute crossStreet\n         * @param {String} [options.crossStreet] The cross street's name.\n         */\n        crossStreet: {\n            validators: [validateString]\n        },\n\n        /**\n         * Represents the municipality (city/town) for the structured address.\n         *\n         * @attribute municipality\n         * @param {String} [options.municipality] The municipality's name (city/town).\n         */\n        municipality: {\n            validators: [validateString]\n        },\n\n        /**\n         * Represents the municipality subdivision (sub/super city) for the structured address.\n         *\n         * @attribute municipalitySubdivision\n         * @param {String} [options.municipalitySubdivision] The municipality subdivision (sub/super city).\n         */\n        municipalitySubdivision: {\n            validators: [validateString]\n        },\n\n        /**\n         * Represents the area's name for the structured address.\n         *\n         * @attribute countryTertiarySubdivision\n         * @param {String} [options.countryTertiarySubdivision] The name of the area.\n         */\n        countryTertiarySubdivision: {\n            validators: [validateString]\n        },\n\n        /**\n         * Represents the county's name for the structured address.\n         *\n         * @attribute countrySecondarySubdivision\n         * @param {String} [options.countrySecondarySubdivision] The county's name.\n         */\n        countrySecondarySubdivision: {\n            validators: [validateString]\n        },\n\n        /**\n         * Represents the state or province's name for the structured address.\n         *\n         * @attribute countrySubdivision\n         * @param {String} [options.countrySubdivision] The state or province.\n         */\n        countrySubdivision: {\n            validators: [validateString]\n        },\n\n        /**\n         * Represents the zip code or postal code for the structured address.\n         *\n         * @attribute postalCode\n         * @param {String} [options.postalCode] The zip or postal code.\n         */\n        postalCode: {\n            validators: [validateString]\n        },\n\n        protocol: {\n            validators: [validateOneOfValue(['http', 'https'], 'protocol')]\n        },\n        bestResult: {\n            validators: [validateBool]\n        },\n        timeZone: {\n            validators: [validateOneOfValue(['iana'], 'timeZone parameter')]\n        },\n        extendedPostalCodesFor: {\n            validators: [validateString]\n        },\n        entityTypeSet: {\n            converters: [convertArray, convertCommaSeparated],\n            validators: [validateEntityType]\n        }\n    };\n};\n","import {\n    bool as validateBool, key as validateKey, trackingId as validateTrackingId, oneOfValue as validateOneOfValue,\n    naturalInteger as validateNaturalInteger, numberInInterval as validateNumberInInterval,\n    arrayOfValues as validateArrayOfValues, departAt as validateDepartAt, arriveAt as validateArriveAt,\n    countrySetAlpha3 as validateCountrySetAlpha3\n} from '../validators';\nimport {\n    arrayOfStrings as convertArrayOfStrings, dateTime as convertDateTime,\n    constantSpeedConsumption as convertConstantSpeedConsumption, avoidAreas as convertAvoidAreas\n} from '../converters';\nimport {\n    constantSpeedConsumption, vehicleWeight, floatAndEngineType, fuelEnergyDensityInMJoulesPerLiter,\n    efficiencyParameter, chargeParameter, firstParamCannotBeUsedWithSecond,\n    requiresDependantParameter, consumptionRecuperationAltitudeParameter\n} from '../postValidators';\n\nimport parameterApplications from 'common/parameterApplications';\nimport { v4 as uuid } from 'uuid';\n\n/**\n * @private\n * @class CommonRoutingParameters\n * @module Services\n * @uses KeyMixin\n */\n\nexport const fields = {\n    key: {\n        validators: [validateKey]\n    },\n    trackingId: {\n        validators: [validateTrackingId],\n        application: parameterApplications.HEADER,\n        defaultValue: uuid\n    },\n\n    /**\n     * The type of route requested. Notes on specific values:\n     * *    fastest returns the fastest route.\n     * *    shortest returns the shortest route by distance.\n     * *    eco routes balance economy and speed.\n     * *    thrilling routes include interesting or challenging roads and use as few motorways as possible.\n     * You can choose the level of turns included and also the degree of hilliness. See the hilliness and\n     * windingness parameters to see how to set this. There is a limit of 900km on routes planned with\n     * routeType=thrilling.\n     *\n     * The default value is fastest.\n     *\n     * @attribute routeType\n     * @param {String} [options.routeType='fastest'] The route type to be used during route calculation.\n     */\n    routeType: {\n        validators: [validateOneOfValue(['fastest', 'shortest', 'eco', 'thrilling'], 'route type')]\n    },\n\n    /**\n     * Possible values:\n     * - true (do consider all available traffic information during routing)\n     * - false (ignores current traffic data during routing) Note that although the current traffic data is\n     *   ignored during routing, the effect of historic traffic on effective road speeds is still incorporated.\n     *\n     * The default is true.\n     *\n     * @attribute traffic\n     * @param {Boolean} [options.traffic=true] A boolean flag determines if traffic data should be used to calculate the\n     *     route.\n     */\n    traffic: {\n        validators: [validateBool]\n    },\n\n    /**\n     * Specifies something that the route calculation should try to avoid when determining the route. Can be\n     * specified multiple times. Possible values:\n     * *    tollRoads: avoids toll roads.\n     * *    motorways: avoids motorways.\n     * *    ferries: avoids ferries.\n     * *    unpavedRoads: avoids unpaved roads.\n     * *    carpools: avoids routes that require use of a carpool (HOV/ High Occupancy Vehicle) lanes.\n     * *    alreadyUsedRoads: avoids using the same road multiple times.\n     *\n     * Most useful in conjunction with routeType=thrilling.\n     *\n     * @attribute avoid\n     * @param {Array|String} [options.avoid] Specifies something that the route calculation should try to avoid when\n     *     determining the route.\n     */\n    avoid: {\n        validators: [validateArrayOfValues(['tollRoads', 'motorways', 'ferries', 'unpavedRoads', 'carpools',\n            'alreadyUsedRoads'\n        ], 'avoid')],\n        converters: [convertArrayOfStrings]\n    },\n\n    /**\n     * The date and time of departure from the origin point.\n     * Departure times, apart from now, must be specified as a dateTime.\n     * When a time zone offset is not specified, it will be assumed to be that of the origin point.\n     * The departAt value must be in the future. The departAt parameter cannot be used in conjunction with\n     * arriveAt.\n     *\n     * @attribute departAt\n     * @param {String} [options.departAt] The properly formatted date with the time or 'now' value. Date\n     * cannot be in the past and has to follow ISO 8601 standard.\n     */\n    departAt: {\n        validators: [validateDepartAt],\n        converters: [convertDateTime]\n    },\n\n    /**\n     * The date and time of arrival at the destination point.\n     * It must be specified as a dateTime.\n     * When a time zone offset is not specified it will be assumed to be that of the destination point.\n     * The arriveAt value must be in the future. The arriveAt parameter cannot be used in conjunction with\n     * departAt.\n     *\n     * @attribute arriveAt\n     * @param {String} [options.arriveAt] The properly formatted date with a time value. Date cannot be in the past\n     * and has to follow ISO 8601 standard.\n     */\n    arriveAt: {\n        validators: [validateArriveAt],\n        converters: [convertDateTime]\n    },\n\n    /**\n     * The travel mode for the requested route.\n     *\n     * Possible values: _car, truck, taxi, bus, van, motorcycle, bicycle, pedestrian_\n     *\n     * Note that the requested travelMode may not be available for the entire route. Where\n     * the requested travelMode is not available for a particular section, the <travelMode> element of the\n     * response for that section will be 'other'.\n     *\n     * @attribute travelMode\n     * @param {String} [options.travelMode] The primary means of transportation to be used while routing.\n     */\n    travelMode: {\n        validators: [validateOneOfValue(['car', 'truck', 'taxi', 'bus', 'van', 'motorcycle', 'bicycle',\n            'pedestrian'\n        ], 'travel mode')]\n    },\n\n    /**\n     * Degree of hilliness for thrilling route. Possible values: low, normal, high.\n     * This parameter can only be used in conjunction with routeType thrilling.\n     *\n     * @attribute hilliness\n     * @param {String} [options.hilliness] The level of hilliness on a thrilling route.\n     */\n    hilliness: {\n        validators: [validateOneOfValue(['low', 'normal', 'high'], 'hilliness')]\n    },\n\n    /**\n     * Level of turns for thrilling route. Possible values: low, normal, high.\n     * This parameter can only be used in conjunction with routeType thrilling.\n     *\n     * @attribute windingness\n     * @param {String} [options.windingness] The level of windingness on a thrilling route.\n     */\n    windingness: {\n        validators: [validateOneOfValue(['low', 'normal', 'high'], 'windingness')]\n    },\n\n    /**\n     * Specifies which data should be reported for diagnosis purposes.\n     *\n     * Possible values: _effectiveSettings_\n     * Reports the effective parameters or data used when calling the API.\n     *\n     * In the case of defaulted parameters, the default will be reflected where the parameter was not specified\n     * by the caller.\n     *\n     * @attribute report\n     * @param {String} [options.report] The level of a verbose answer from the service, useful for debugging purposes.\n     */\n    report: {\n        validators: [validateOneOfValue(['effectiveSettings'], 'report')]\n    },\n\n    /**\n     * Engine type of the vehicle. This parameter is currently only considered for travelMode truck. Valid\n     * options are: _combustion, electric_\n     *\n     * @attribute vehicleEngineType\n     * @param {String} [options.vehicleEngineType] The vehicle engine type.\n     */\n    vehicleEngineType: {\n        validators: [validateOneOfValue(['combustion', 'electric'], 'vehicle engine type')]\n    },\n\n    /**\n     * Maximum speed of the vehicle in km/hour. A value of 0 means that an appropriate value for the vehicle\n     * will be determined and applied during route planning. A non-zero value may be overridden during route\n     * planning. This parameter is currently only considered for travelMode truck.\n     *\n     * @attribute vehicleMaxSpeed\n     * @param {Number} [options.vehicleMaxSpeed] The maximal allowed vehicle speed in km/h.\n     */\n    vehicleMaxSpeed: {\n        validators: [validateNaturalInteger]\n    },\n\n    /**\n     * Weight of the vehicle in kg. A value of 0 means that weight restrictions are not considered during route\n     * planning. This parameter is currently only considered for travelMode truck.\n     *\n     * @attribute vehicleWeight\n     * @param {Number} [options.vehicleWeight] The vehicle weight in kg (kilograms).\n     */\n    vehicleWeight: {\n        validators: [\n            validateNaturalInteger,\n            vehicleWeight\n        ]\n    },\n\n    /**\n     * Weight per axle of the vehicle in kg (kilograms). A value of 0 means that weight restrictions per axle are not\n     * considered during route planning. This parameter is currently only considered for travelMode truck.\n     *\n     * @attribute vehicleAxleWeight\n     * @param {Number} [options.vehicleAxleWeight] The vehicle axle wight in kg (kilograms).\n     */\n    vehicleAxleWeight: {\n        validators: [validateNaturalInteger]\n    },\n\n    /**\n     * Length of the vehicle in meters. A value of 0 means that length restrictions are not considered during\n     * route planning. This parameter is currently only considered for travelMode truck.\n     *\n     * @attribute vehicleLength\n     * @param {Number} [options.vehicleLength] The vehicle length in meters.\n     */\n    vehicleLength: {\n        validators: [validateNumberInInterval(0, Number.MAX_VALUE)]\n    },\n\n    /**\n     * Width of the vehicle in meters. A value of 0 means that width restrictions are not considered during\n     * route planning. This parameter is currently only considered for travelMode truck.\n     *\n     * @attribute vehicleWidth\n     * @param {Number} [options.vehicleWidth] The vehicle width in meters.\n     */\n    vehicleWidth: {\n        validators: [validateNumberInInterval(0, Number.MAX_VALUE)]\n    },\n\n    /**\n     * Height of the vehicle in meters. A value of 0 means that height restrictions are not considered\n     * during route planning. This parameter is currently only considered for travelMode truck.\n     *\n     * @attribute vehicleHeight\n     * @param {Number} [options.vehicleHeight] The vehicle height in meters.\n     */\n    vehicleHeight: {\n        validators: [validateNumberInInterval(0, Number.MAX_VALUE)]\n    },\n\n    /**\n     * The vehicle is used for commercial purposes and thus may not be allowed to drive on some roads. This\n     * parameter is currently only considered for travelMode truck.\n     *\n     * @attribute vehicleCommercial\n     * @param {Boolean} [options.vehicleCommercial] True if the vehicle is used for commercial purposes.\n     */\n    vehicleCommercial: {\n        validators: [validateBool]\n    },\n\n    /**\n     * Types of cargo that may be classified as hazardous materials and restricted from some roads. Available\n     * vehicleLoadType values are US Hazmat classes 1 through 9, plus generic classifications for use in other\n     * countries.\n     *\n     * __Use these for routing in US__\n     * * USHazmatClass1 Explosives\n     * * USHazmatClass2 Compressed gas\n     * * USHazmatClass3 Flammable liquids\n     * * USHazmatClass4 Flammable solids\n     * * USHazmatClass5 Oxidizers\n     * * USHazmatClass6 Poisons\n     * * USHazmatClass7 Radioactive\n     * * USHazmatclass8 Corrosives\n     * * USHazmatClass9 Miscellaneous\n     *\n     * __Use these for routing in all other countries__\n     * * otherHazmatExplosive Explosives\n     * * otherHazmatGeneral Miscellaneous\n     * * otherHazmatHarmfulToWater Harmful to water\n     *\n     * This parameter is currently only considered for travelMode truck.\n     *\n     * @attribute vehicleLoadType\n     * @param {Array|String} [options.vehicleLoadType] The array of truck cargo classification.\n     */\n    vehicleLoadType: {\n        validators: [validateArrayOfValues(['USHazmatClass1', 'USHazmatClass2', 'USHazmatClass3',\n            'USHazmatClass4', 'USHazmatClass5', 'USHazmatClass6', 'USHazmatClass7', 'USHazmatClass8',\n            'USHazmatClass9', 'otherHazmatExplosive', 'otherHazmatGeneral', 'otherHazmatHarmfulToWater'\n        ],\n        'vehicle load type')],\n        converters: [convertArrayOfStrings]\n    },\n    /**\n     * Specifies the speed-dependent component of consumption.\n     * Provided as an unordered list of speed/consumption-rate pairs. The list defines points on a\n     * consumption curve.\n     * Consumption rates for speeds not in the list are found as follows:\n     *   *  By linear interpolation, if the given speed lies in between two speeds in the list.\n     *   *  By linear extrapolation otherwise, assuming a constant (Consumption/Speed) determined by\n     * the nearest two points in the list.\n     *\n     * The list must contain between 1 and 25 points (inclusive), and may not\n     * contain duplicate points for the same speed. If it only contains a single point,\n     * then the consumption rate of that point is used without further processing.\n     * Consumption specified for the largest speed must be greater than or equal to that of the\n     * penultimate highest speed. This ensures that extrapolation does not lead to negative consumption rates.\n     * Similarly, consumption values specified for the two lowest speeds in the list cannot lead to a\n     * negative consumption rate for any smaller speed.\n     * The minimum and maximum values described here refer to the valid range for the consumption values\n     * (expressed in l/100km).\n     * @attribute constantSpeedConsumptionInLitersPerHundredkm\n     * @param {Array} [options.constantSpeedConsumptionInLitersPerHundredkm] Colon-delimited list of\n     * CombustionConstantSpeedConsumptionPairs, e.g., an array of such pairs \"60,7\".\n     */\n    constantSpeedConsumptionInLitersPerHundredkm: {\n        validators: [\n            constantSpeedConsumption('combustion')\n        ],\n        converters: [convertConstantSpeedConsumption]\n    },\n    /**\n     * Specifies the current supply of fuel in liters.\n     * @attribute currentFuelInLiters\n     * @param {Number} [options.currentFuelInLiters]\n     */\n    currentFuelInLiters: {\n        validators: [\n            floatAndEngineType('combustion', 'currentFuelInLiters')\n        ]\n    },\n    /**\n     * Specifies the amount of fuel consumed for sustaining auxiliary systems of the vehicle, in liters\n     *  per hour. It can be used to specify consumption due to devices and systems such as AC systems, radio,\n     * heating, etc.\n     * @attribute auxiliaryPowerInLitersPerHour\n     * @param {Number} [options.auxiliaryPowerInLitersPerHour]\n     */\n    auxiliaryPowerInLitersPerHour: {\n        validators: [\n            floatAndEngineType('combustion', 'auxiliaryPowerInLitersPerHour')\n        ]\n    },\n    /**\n     * Specifies the amount of chemical energy stored in one liter of fuel in megajoules (MJ).\n     * It is used in conjunction with the *Efficiency parameters for conversions between saved\n     * or consumed energy and fuel.\n     * For example, energy density is 34.2 MJ/l for gasoline, and 35.8 MJ/l for Diesel fuel.\n     * @attribute fuelEnergyDensityInMJoulesPerLiter\n     * @param {Number} [options.fuelEnergyDensityInMJoulesPerLiter]\n     */\n    fuelEnergyDensityInMJoulesPerLiter: {\n        validators: [\n            fuelEnergyDensityInMJoulesPerLiter\n        ]\n\n    },\n    /**\n     * Specifies the efficiency of converting chemical energy stored in fuel to kinetic energy when the\n     * vehicle accelerates (i.e., KineticEnergyGained/ChemicalEnergyConsumed).\n     * ChemicalEnergyConsumed is obtained by converting consumed fuel to chemical energy using\n     * fuelEnergyDensityInMJoulesPerLiter.\n     * @attribute accelerationEfficiency\n     * @param {Number} [options.accelerationEfficiency]\n     */\n    accelerationEfficiency: {\n        validators: [\n            efficiencyParameter('accelerationEfficiency', 'decelerationEfficiency')\n        ]\n    },\n    /**\n     * Specifies the efficiency of converting kinetic energy to saved (not consumed) fuel when the\n     * vehicle decelerates (i.e., ChemicalEnergySaved/KineticEnergyLost).\n     * ChemicalEnergySaved is obtained by converting saved (not consumed) fuel to energy using\n     * fuelEnergyDensityInMJoulesPerLiter.\n     * @attribute decelerationEfficiency\n     * @param {Number} [options.decelerationEfficiency]\n     */\n    decelerationEfficiency: {\n        validators: [\n            efficiencyParameter('decelerationEfficiency', 'accelerationEfficiency')\n        ]\n    },\n    /**\n     * Specifies the efficiency of converting chemical energy stored in fuel to potential energy\n     * when the vehicle gains elevation (i.e., PotentialEnergyGained/ChemicalEnergyConsumed).\n     * ChemicalEnergyConsumed is obtained by converting consumed fuel to chemical energy using\n     * fuelEnergyDensityInMJoulesPerLiter.\n     * @attribute uphillEfficiency\n     * @param {Number} [options.uphillEfficiency]\n     */\n    uphillEfficiency: {\n        validators: [\n            efficiencyParameter('uphillEfficiency', 'downhillEfficiency')\n        ]\n    },\n    /**\n     * Specifies the efficiency of converting potential energy to saved (not consumed) fuel when the\n     * vehicle loses elevation (i.e., ChemicalEnergySaved/PotentialEnergyLost).\n     * ChemicalEnergySaved is obtained by converting saved (not consumed) fuel to energy using\n     * fuelEnergyDensityInMJoulesPerLiter.\n     * @attribute downhillEfficiency\n     * @param {Number} [options.downhillEfficiency]\n     */\n    downhillEfficiency: {\n        validators: [\n            efficiencyParameter('downhillEfficiency', 'uphillEfficiency')\n        ]\n    },\n    /**\n     * Specifies the speed-dependent component of consumption.\n     * Provided as an unordered list of speed/consumption-rate pairs. The list defines points\n     * on a consumption curve.\n     * Consumption rates for speeds not in the list are found as follows:\n     * *    By linear interpolation, if the given speed lies in between two speeds in the list.\n     * *    By linear extrapolation otherwise, assuming a constant (Consumption/Speed) determined by\n     * the nearest two points in the list.\n     *\n     * The list must contain between 1 and 25 points (inclusive), and may not contain duplicate points\n     * for the same speed. If it only contains a single point, then the consumption rate of that point\n     * is used without further processing. Consumption specified for the largest speed must be greater\n     * than or equal to that of the penultimate highest speed.\n     * This ensures that extrapolation does not lead to negative consumption rates.\n     * Similarly, consumption values specified for the two lowest speeds in the list cannot lead to a\n     * negative consumption rate for any lower speed.\n     * The minimum and maximum values described here refer to the valid range for the consumption values\n     * (expressed in kWh/100km).\n     * @attribute constantSpeedConsumptionInkWhPerHundredkm\n     * @param {Array} [options.constantSpeedConsumptionInkWhPerHundredkm] Colon-delimited list of\n     * ElectricConstantSpeedConsumptionPairs, e.g., an array of such pairs \"60,7\".\n     */\n    constantSpeedConsumptionInkWhPerHundredkm: {\n        validators: [\n            constantSpeedConsumption('electric')\n        ],\n        converters: [convertConstantSpeedConsumption]\n    },\n    /**\n     * Specifies the current electric energy supply in kilowatt hours (kWh).\n     * @attribute currentChargeInkWh\n     * @param {Number} [options.currentChargeInkWh]\n     */\n    currentChargeInkWh: {\n        validators: [\n            chargeParameter('currentChargeInkWh', 'maxChargeInkWh')\n        ]\n    },\n    /**\n     * Specifies the maximum electric energy supply in kilowatt hours (kWh) that may be stored in\n     * the vehicle's battery.\n     * @attribute maxChargeInkWh\n     * @param {Number} [options.maxChargeInkWh]\n     */\n    maxChargeInkWh: {\n        validators: [\n            chargeParameter('maxChargeInkWh', 'currentChargeInkWh')\n        ]\n    },\n    /**\n     * Specifies the amount of power consumed for sustaining auxiliary systems in kilowatts (kW).\n     * It can be used to specify consumption due to devices and systems such as AC systems, radio, heating, etc.\n     * @attribute auxiliaryPowerInkW\n     * @param {Number} [options.auxiliaryPowerInkW]\n     */\n    auxiliaryPowerInkW: {\n        validators: [\n            floatAndEngineType('electric', 'auxiliaryPowerInkW')\n        ]\n    },\n\n    /**\n     * Represents the type of protocol used to perform the service call.\n     *\n     * @attribute protocol\n     * @param {String} [options.protocol] Protocol type, one of _http_ or _https_.\n     */\n    protocol: {\n        validators: [validateOneOfValue(['http', 'https'], 'protocol')]\n    },\n\n    /**\n     * A list of shapes to avoid for planning routes. Supported shapes include rectangles.\n     * Can contain one of each supported shapes element.\n\n     * @example\n     * ```js\n     * tt.services.calculateRoute({\n     *      locations: '52.37173,4.91015:52.36357,4.898046255',\n     *      avoidAreas: [{\n     *      southWestCorner: {latitude: 52.36391, longitude:4.90106},\n     *      northEastCorner: {latitude: 52.36554, longitude:4.90767}\n     * }]);\n     * ```\n     * Supported point formats:\n     * - 'lat,lon'\n     * - {lat:111, lon:111}\n     * - {lat:111, lng:111}\n     * - {latitude:111, longitude:111}\n     * - {x:111, y:111}\n     * - {lat: function(), lng:function()}\n     *\n     * @attribute avoidAreas\n     * @param {Object[]} [options.avoidAreas] A list of shapes to avoid for planning routes.\n     * @throws {TypeError} If the given argument cannot be converted to a valid value.\n     */\n    avoidAreas: {\n        converters: [convertAvoidAreas],\n        application: parameterApplications.POST\n    },\n\n    /**\n     * List of 3-character ISO 3166-1 alpha-3 country codes of countries in which\n     * all toll roads with vignettes are to be avoided.\n     * Toll roads with vignettes in countries not in the list are unaffected.\n     * It is an error to specify both avoidVignette and allowVignette.\n     * @attribute avoidVignette\n     * @param {String|String[]} [options.avoidVignette] An array of country codes.\n     * @throws {TypeError} If the given argument cannot be converted into a valid value.\n     */\n    avoidVignette: {\n        validators: [\n            validateCountrySetAlpha3.bind(this, false),\n            firstParamCannotBeUsedWithSecond('avoidVignette', 'allowVignette')\n        ],\n        converters: [convertArrayOfStrings],\n        application: parameterApplications.POST\n    },\n\n    /**\n     * List of 3-character ISO 3166-1 alpha-3 country codes of countries in which\n     * toll roads with vignettes are allowed.\n     * Specifying allowVignette with some countries X is equivalent to specifying\n     * avoidVignette with all countries but X.\n     * Specifying allowVignette with an empty list is the same as avoiding all toll roads with vignettes.\n     * It is an error to specify both avoidVignette and allowVignette.\n     * @attribute allowVignette\n     * @param {String|String[]} [options.allowVignette] An array of country codes.\n     * @throws {TypeError} If the given argument cannot be converted into a valid value.\n     */\n    allowVignette: {\n        validators: [\n            validateCountrySetAlpha3.bind(this, true),\n            firstParamCannotBeUsedWithSecond('allowVignette', 'avoidVignette')\n        ],\n        converters: [convertArrayOfStrings],\n        application: parameterApplications.POST\n    },\n\n    /**\n     * Specifies the electric energy in kWh gained by the vehicle through losing 1000 meters of elevation.\n     * * Note: It must be paired with `consumptionInkWhPerkmAltitudeGain`.\n     * * Note: It cannot be used with `accelerationEfficiency`, `decelerationEfficiency`, `uphillEfficiency`\n     * or `downhillEfficiency`.\n     *\n     * Minimum value: 0.0\n     * Maximum value: `consumptionInkWhPerkmAltitudeGain`\n     *\n     * @attribute recuperationInkWhPerkmAltitudeLoss\n     * @param {Number} [options.recuperationInkWhPerkmAltitudeLoss] Electric energy in kWh\n     */\n    recuperationInkWhPerkmAltitudeLoss: {\n        validators: [\n            requiresDependantParameter(\n                'recuperationInkWhPerkmAltitudeLoss',\n                'consumptionInkWhPerkmAltitudeGain'\n            ),\n            consumptionRecuperationAltitudeParameter\n        ]\n    },\n\n    /**\n     * Specifies the electric energy in kWh consumed by the vehicle through gaining 1000 meters of elevation.\n     * * Note: It must be paired with `recuperationInkWhPerkmAltitudeLoss`.\n     * * Note: It cannot be used with `accelerationEfficiency`, `decelerationEfficiency`, `uphillEfficiency`\n     * or `downhillEfficiency`.\n     *\n     * Minimum value: `recuperationInkWhPerkmAltitudeLoss`\n     * Maximum value: 500.0\n     *\n     * @attribute consumptionInkWhPerkmAltitudeGain\n     * @param {Number} [options.consumptionInkWhPerkmAltitudeGain] Electric energy in kWh\n     */\n    consumptionInkWhPerkmAltitudeGain: {\n        validators: [\n            requiresDependantParameter(\n                'consumptionInkWhPerkmAltitudeGain',\n                'recuperationInkWhPerkmAltitudeLoss'\n            ),\n            consumptionRecuperationAltitudeParameter\n        ]\n    },\n\n    /**\n     * If specified, the vehicle is subject to ADR tunnel restrictions.\n     * * Vehicles with code B are restricted from roads with ADR tunnel categories B, C, D, and E.\n     * * Vehicles with code C are restricted from roads with ADR tunnel categories C, D, and E.\n     * * Vehicles with code D are restricted from roads with ADR tunnel categories D and E.\n     * * Vehicles with code E are restricted from roads with ADR tunnel category E.\n     * * If `vehicleAdrTunnelRestrictionCode` is not specified, no ADR tunnel restrictions apply.\n     *\n     * Notes:\n     * * If `travelMode` is pedestrian or bicycle, `vehicleAdrTunnelRestrictionCode` is not considered.\n     * * The `vehicleAdrTunnelRestrictionCode` and `vehicleLoadType` parameters are independent; please\n     * provide both if applicable.\n     *\n     * @attribute vehicleAdrTunnelRestrictionCode\n     * @param {String} [options.vehicleAdrTunnelRestrictionCode] An ADR restriction code\n     * @throws {TypeError} If the given argument is not a valid ADR restriction code.\n     */\n    vehicleAdrTunnelRestrictionCode: {\n        validators: [validateOneOfValue(['B', 'C', 'D', 'E'], 'vehicleAdrTunnelRestrictionCode')]\n    }\n};\n","import {\n    point as validatePoint, numberInInterval as validateNumberInInterval\n} from '../validators';\nimport {point as convertPoint} from '../converters';\nimport {\n    budgetInRange, requiredBudget, requiredWithSpecificEngineType, notCommon\n} from '../postValidators';\nimport {fields as commonRoutingParameters} from './commonRoutingParameters';\nimport {extend, clone} from '../utils';\nimport parameterApplications from '../../common/parameterApplications';\n\n/**\n * @private\n * @class CalculateReachableRangeParameters\n * @module Services\n */\n\nlet fields = {\n    __all: {\n        validators: [\n            requiredBudget,\n            notCommon\n        ]\n    },\n    /**\n     * Point from which the range calculation should start.\n     * The following formats are supported:\n     *\n     * - **String** (longitude/latitude pair)\n     *   - `\"4.8,52.3\"`\n     * - **Array** (longitude/latitude pair)\n     *   - `[4.8, 52.3]`\n     * - **Object**\n     *   - `{lon: 4.8, lat: 52.3}`\n     *   - `{lng: 5.8, lat: 53.3}`\n     *   - `{x: 53.3, y: 5.8}`\n     *   - `{longitude: 5.8, latitude: 53.3}`\n     *   - `{lng: Function, lat: Function}` The functions should return a numeric value.\n     *\n     * @attribute origin\n     * @param {String|Array|Object} origin\n     */\n    origin: {\n        validators: [validatePoint],\n        converters: [convertPoint],\n        application: parameterApplications.PATH\n    },\n\n    /**\n     * @attribute fuelBudgetInLiters\n     * @param {Number} fuelBudgetInLiters Fuel budget in liters that\n     * determines the maximal range which can be traveled using the specified\n     * Combustion Consumption Model. Required if _vehicleEngineType_ is _combustion_.\n     * NOTE: _exactly one_ of `fuelBudgetInLiters`, `energyBudgetInkWh`, `timeBudgetInSec` and\n     * `distanceBudgetInMeters` must be set.\n     */\n    fuelBudgetInLiters: {\n        validators: [\n            requiredWithSpecificEngineType,\n            budgetInRange\n        ]\n    },\n\n    /**\n     * @attribute energyBudgetInkWh\n     * @param {Number} energyBudgetInkWh  Electric energy budget in\n     * kilowatt hours (kWh) that determines maximal range which can be\n     * traveled using the specified Electric Consumption Model.\n     * NOTE: _exactly one_ of `fuelBudgetInLiters`, `energyBudgetInkWh`, `timeBudgetInSec` and\n     * `distanceBudgetInMeters` must be set.\n     */\n    energyBudgetInkWh: {\n        validators: [\n            requiredWithSpecificEngineType,\n            budgetInRange\n        ]\n    },\n    /**\n     * @attribute distanceBudgetInMeters\n     * @param {Number} distanceBudgetInMeters  The distance budget in meters\n     * that determines the maximal range which can be traveled.\n     * The Consumption Model will only affect the range when routeType is eco.\n     * NOTE: _exactly one_ of `fuelBudgetInLiters`, `energyBudgetInkWh`, `timeBudgetInSec` and\n     * `distanceBudgetInMeters` must be set.\n     */\n    distanceBudgetInMeters: {\n        validators: [validateNumberInInterval(0, Number.MAX_VALUE)]\n    },\n\n    /**\n     * @attribute timeBudgetInSec\n     * @param {Number} timeBudgetInSec Time budget in seconds that determines maximal\n     * range which can be traveled using driving time.\n     * The consumption parameters will only affect eco-routes and thereby indirectly the driving time.\n     * NOTE: _exactly one_ of `fuelBudgetInLiters`, `energyBudgetInkWh`, `timeBudgetInSec` and\n     * `distanceBudgetInMeters` must be set.\n     */\n    timeBudgetInSec: {\n        validators: [validateNumberInInterval(0, Number.MAX_VALUE)]\n    }\n\n};\n\nfields = extend(fields, commonRoutingParameters);\n\nexport default (fieldsToSkip) => {\n    const result = clone(fields);\n    if (fieldsToSkip instanceof Array) {\n        fieldsToSkip.forEach(function(field) {\n            delete result[field];\n        });\n    }\n\n    return result;\n};\n\n","import {PointFacade} from '../pointFacade';\n\nconst pointFacade = new PointFacade();\n\nconst toGeoJson = (data) => {\n    const coordinates = data.reachableRange.boundary.map(coordinates => [coordinates.lng, coordinates.lat]);\n    return {\n        type: 'Feature',\n        geometry: {\n            type: 'Polygon',\n            coordinates: [coordinates]\n        }\n    };\n};\n\nexport default (data) => {\n    if (data.reachableRange &&\n        data.reachableRange.boundary &&\n        Array.isArray(data.reachableRange.boundary)\n    ) {\n        // convert points\n        data.reachableRange.boundary = pointFacade.convert(data.reachableRange.boundary);\n        data.reachableRange.center = pointFacade.convert(data.reachableRange.center);\n    }\n\n    return Object.assign(data, {\n        toGeoJson: () => toGeoJson(data)\n    });\n};\n","import reachableRangeModel from './calculateReachableRange';\n\nexport default (data) => {\n    if (!Array.isArray(data.batchItems)) {\n        return null;\n    }\n    data.batchItems = data.batchItems.map((batchItem) => {\n        if (batchItem.response.error) {\n            return { error: batchItem.response.error};\n        } else {\n            return reachableRangeModel(batchItem.response);\n        }\n    });\n\n    return data;\n};\n","/* eslint-disable max-len */\n/* jshint ignore:start */\n/**\n * Calculate a reachable range implementation using the TomTom Reachable Range API.\n *\n * Makes a route request using the TomTom [Routing API - Calculate Reachable Range](CALCULATE_REACHABLE_RANGE_URL).\n *\n * Parameters need to be passed to the constructor.\n *\n *\n * The Calculate Reachable Range service calculates a set of locations that can\n * be reached from the origin point, subject to the available fuel or energy\n * budget that is specified in the request.\n *\n * The information returned is a polygon boundary in counterclockwise orientation\n * and the precise polygon center (the result of map-matching the origin point).\n *\n * ### Response\n * This service extends the API response by providing the following methods:\n * * `toGeoJson()`, converts range data into\n * a Feature with <a target=\"_blank\" rel=noopener href=\"https://tools.ietf.org/html/rfc7946#section-3.1.6\">Polygon</a> geometry.\n * * `getTrackingId()`, which returns the `Tracking-ID` associated with the request.\n *\n * To read more about services responses take a look at {{#crossLinkModule \"Services\"}}Difference between\n * API responses and this library's responses{{/crossLinkModule}} section.\n * or dive into <a target=\"_blank\" rel=noopener\n * href=\"https://developer.tomtom.com/maps-sdk-web-js/functional-examples#examples,code,reachable-range.html\">\n * Reachable range example</a> code.\n *\n * @class calculateReachableRange\n * @namespace Services.services\n * @module Services\n * @uses KeyMixin\n * @uses CommonRoutingParameters\n * @uses CalculateReachableRangeParameters\n * @uses ProtocolMixin\n * @uses BatchMixin\n * @uses TrackingIdMixin\n * @uses ReturnsToGeoJsonMixin\n * @uses AbortSignalMixin\n *\n * @constructor\n *\n * @param {Object} [options] Options to be passed to the routing call,\n *     or an array of such options objects to perform a batch request.\n * @param {Object} [additionalOptions] Additional options to be passed to the service.\n *\n * @example\n * ```javascript\n *     tt.services.calculateReachableRange({\n *         key: <Your API key>,\n *         origin: '19.454722,51.776667',\n *         fuelBudgetInLiters: 5,\n *         constantSpeedConsumptionInLitersPerHundredkm: [\"10,20\", \"15,30\"],\n *     }).then(function(rangeData) {\n *           console.log(rangeData.toGeoJson());\n *      })\n *       .catch(function(error) {\n *           console.error(error);\n *       });\n * ```\n *\n */\n/* eslint-enable max-len */\n/* jshint ignore:end */\nimport {SERVICE_TYPES} from 'Core/serviceTypes';\nimport calculateReachableRangeParameters from './calculateReachableRangeParameters';\nimport reachableRangeModel from '../../model/routing/calculateReachableRange';\nimport batchReachableRangeModel from '../../model/routing/batchCalculateReachableRange';\nimport {modelResponse} from '../../model/modelResponse';\nimport {\n    batchRoutingEndpoint,\n    calculateReachableRangeEndpoint,\n    batchReachableRangeQueryEndpoint,\n    batchSyncRoutingEndpoint\n} from 'endpoints';\nimport {\n    singleRequestServiceFactory,\n    batchRequestServiceFactory,\n    serviceFactory\n} from '../../core';\n\nconst fields = calculateReachableRangeParameters();\nconst maxNoOfElementsInBatchRequest = 100;\n\nexport function calculateReachableRange(options, additionalOptions) {\n    const singleRequest = singleRequestServiceFactory(calculateReachableRangeEndpoint);\n    const batchRequest = batchRequestServiceFactory(maxNoOfElementsInBatchRequest, {\n        batchSync: batchSyncRoutingEndpoint, batch: batchRoutingEndpoint,\n        single: batchReachableRangeQueryEndpoint\n    });\n\n    const handleServiceCall = (data, abortSignal) => {\n        return singleRequest(fields, data, abortSignal)\n            .then(response => modelResponse(response, reachableRangeModel));\n    };\n\n    const handleBatchServiceCall = (data, abortSignal) => {\n        return batchRequest(fields, data, abortSignal)\n            .then(response => modelResponse(response, batchReachableRangeModel));\n    };\n\n    return serviceFactory(\n        fields,\n        SERVICE_TYPES.ROUTING,\n        'calculateReachableRange',\n        handleServiceCall,\n        handleBatchServiceCall\n    )(options, additionalOptions);\n}\n","function newFeature(route) {\n    return {\n        type: 'Feature',\n        properties: {summary: route.summary, sections: route.sections, segmentSummary: []}\n    };\n}\n\nfunction getCoordinates(points) {\n    const coordinates = [];\n    for (let i = 0; i < points.length; i += 1) {\n        coordinates.push([points[i].lng, points[i].lat]);\n    }\n    return coordinates;\n}\n\nexport function getRouteFeature(route) {\n    const isMultiLineString = route.legs.length > 1;\n\n    const feature = newFeature(route);\n    for (let i = 0; i < route.legs.length; i += 1) {\n        feature.properties.segmentSummary.push(route.legs[i].summary);\n\n        if (route.legs[i].points) {\n            feature.geometry = feature.geometry || {\n                coordinates: []\n            };\n\n            if (isMultiLineString) {\n                feature.geometry.type = 'MultiLineString';\n                feature.geometry.coordinates.push(getCoordinates(route.legs[i].points));\n            } else {\n                feature.geometry.type = 'LineString';\n                feature.geometry.coordinates = getCoordinates(route.legs[i].points);\n            }\n        }\n    }\n    if (route.guidance) {\n        feature.properties.guidance = route.guidance;\n    }\n    return feature;\n}\n","import {PointFacade} from '../pointFacade';\nimport {getRouteFeature} from './helpers/getRouteFeature';\nimport {newFeatureCollection} from '../modelUtils';\n\nconst pointFacade = new PointFacade();\nconst newLineString = () => {\n    return {\n        type: 'Feature',\n        geometry: {\n            type: 'LineString'\n        },\n        properties: {}\n    };\n};\n\nconst setProperty = (properties, propertyName, value) => {\n    if (value) {\n        properties[propertyName] = value;\n    }\n};\n\nconst toGeoJson = (data) => {\n    const result = newFeatureCollection();\n    if (!data || !data.routes) {\n        return result;\n    }\n    for (let i = 0; i < data.routes.length; i += 1) {\n        result.features.push(getRouteFeature(data.routes[i]));\n    }\n    return result;\n};\n\nconst toRouteSectionsCollection = (data) => {\n    const results = [];\n\n    if (!data || !data.routes) {\n        return results;\n    }\n\n    data.routes.forEach(route => {\n        const points = [];\n\n        for (let i = 0; i < route.legs.length; i += 1) {\n            points.push(...route.legs[i].points);\n        }\n\n        const featureCollection = newFeatureCollection();\n        route.sections.forEach(section => {\n            let coordinates = points.slice(section.startPointIndex, section.endPointIndex + 1);\n            coordinates = coordinates.map(lngLat => [lngLat.lng, lngLat.lat]);\n\n            const lineString = newLineString();\n\n            lineString.geometry.coordinates = coordinates;\n\n            setProperty(lineString.properties, 'sectionType', section.sectionType);\n            setProperty(lineString.properties, 'travelMode', section.travelMode);\n            setProperty(lineString.properties, 'countryCode', section.countryCode);\n            setProperty(lineString.properties, 'simpleCategory', section.simpleCategory);\n            setProperty(lineString.properties, 'effectiveSpeedInKmh', section.effectiveSpeedInKmh);\n            setProperty(lineString.properties, 'delayInSeconds', section.delayInSeconds);\n            setProperty(lineString.properties, 'magnitudeOfDelay', section.delayInSeconds);\n            setProperty(lineString.properties, 'tec', section.tec);\n\n            featureCollection.features.push(lineString);\n        });\n\n        results.push(featureCollection);\n    });\n\n    return results;\n};\n\nexport function calculateRouteModel(data) {\n    const routes = data.routes;\n\n    // convert points\n    if (routes && routes.length) {\n        routes.forEach(route => {\n            route.legs.forEach(leg => {\n                leg.points = pointFacade.convert(leg.points);\n            });\n        });\n    }\n\n    return Object.assign(data, {\n        toGeoJson: () => toGeoJson(data),\n        toRouteSectionsCollection: () => toRouteSectionsCollection(data)\n    });\n}\n","import {calculateRouteModel as routingModel} from './calculateRoute';\n\nexport function batchCalculateRouteModel(data) {\n    if (!Array.isArray(data.batchItems)) {\n        return null;\n    }\n\n    data.batchItems = data.batchItems.map((batchItem) => {\n        if (batchItem.response.error) {\n            return { error: batchItem.response.error };\n        } else {\n            return routingModel(batchItem.response);\n        }\n    });\n\n    return data;\n}\n","import {extend, clone} from '../utils';\nimport {bool as validateBool, oneOfValue as validateOneOfValue, naturalInteger as validateNaturalInteger,\n    numberInInterval as validateNumberInInterval, arrayOfValues as validateArrayOfValues,\n    routingLocations as validateRoutingLocations, routingGuidanceLanguage as validateRoutingGuidanceLanguage,\n    integerInInterval as validateIntegerInInterval, supportingPoints as validateSupportingPoints\n} from '../validators';\nimport {\n    routingLocations as convertRoutingLocations, routingGuidanceLanguage as convertRoutingGuidanceLanguage,\n    supportingPoints as convertSupportingPoints, arrayOfStrings as convertArrayOfStrings\n} from '../converters';\nimport {fields as commonRoutingParameters} from './commonRoutingParameters';\nimport {\n    firstParamCannotBeUsedWithSecond, requiresDependantParameter\n} from '../postValidators';\nimport parameterApplications from '../../common/parameterApplications';\n\n/**\n * @private\n * @class RoutingParameters\n * @module Services\n */\n\nlet routingParameters = {\n    /**\n     * Specifies whether to compute alternatives\n     * with the objective to find routes that are significantly different,\n     * or whether to look for routes better than the reference route. Possible values are:\n     *  1. anyRoute: compute alternative routes that are significantly different from the reference route.\n     *  2. betterRoute: return an alternative route only if it is better than the reference\n     *      route according to the given planning criteria.\n     *      If there is a road block on the reference route,\n     *      then any alternative that does not contain blockages is considered as a better route.\n     *\n     * Can only be used when reconstructing a route.\n     *\n     * @attribute alternativeType\n     * @param {String} [options.alternativeType] The type of the alternative route.\n     */\n    alternativeType: {\n        validators: [validateOneOfValue(['anyRoute', 'betterRoute'], 'alternativeType')]\n    },\n    /**\n     * Locations through which the route is calculated. The\n     * following constraints apply:\n     * *    At least two locations must be provided.\n     * *    The first location in the sequence defines the origin and must be of type 'point'.\n     * *    The last location in the sequence defines the destination and must be of type 'point'.\n     * *    One or more optional intermediate locations (known as waypoints) may be provided:\n     *      *   The maximum allowed number of waypoints is 150.\n     *      *   A point waypoint results in an extra leg in the response, a circle waypoint does not.\n     *      *   Circle waypoints cannot be used when computeBestOrder is true.\n     *\n     * The points or circles that will be used to calculate the route. The following input types are allowed:\n     *  1. A string with colon-delimited locations. For example '13.42936,52.50931:13.43872,52.50274'\n     * where comma divides longitude and latitude.\n     *  2. An array containing locations.\n     *     Location can be defined as a string, object, or array.\n     *\n     * <b>Note:</b> Please keep in mind, that `supportingPoints` and 'Waypoints' (meaning more than two `locations`)\n     * are mutually exclusive. If you are using `supportingPoints` you can use only two `locations`.\n     *\n     * @attribute locations\n     * @param {String|Array} [options.locations] These are the specified locations for route calculation.\n     */\n    locations: {\n        validators: [validateRoutingLocations],\n        converters: [convertRoutingLocations],\n        required: true,\n        application: parameterApplications.PATH\n    },\n    /**\n     * The number of desired alternative routes to be calculated. The value provided:\n     * Must be an integer in the range 0-5.\n     * Using a value greater than 0 in conjunction with computeBestOrder set to true is not allowed.\n     * Fewer alternative routes may be returned if either fewer alternatives exist or the requested number of\n     * alternatives is larger than the service can calculate. The default value is 0, the maximum value is 5.\n     *\n     * @attribute maxAlternatives\n     * @param {Number} [options.maxAlternatives] To restrict the maximum alternative routes to be calculated.\n     */\n    maxAlternatives: {\n        validators: [validateNumberInInterval(0, 5)]\n    },\n\n    /**\n     * If specified, guidance instructions will be returned (if available).\n     *\n     * Possible values:\n     * * _coded_ : returns raw instruction data without human-readable messages.\n     * * _text_ : returns raw instructions data with human-readable messages in plain text.\n     * * _tagged_ : returns raw instruction data with tagged human-readable messages to permit formatting.\n     *\n     * Note that the instructionsType parameter cannot be used in conjunction with routeRepresentation=none.\n     * If alternative routes are requested, instructions will be generated for each route returned.\n     *\n     * @attribute instructionsType\n     * @param {String} [options.instructionsType] If a street number is sent in along with the request, the response\n     *     may include the side of the street (Left/Right) and also an offset position for that street number.\n     */\n    instructionsType: {\n        validators: [validateOneOfValue(['coded', 'text', 'tagged'], 'instructions type')]\n    },\n    /* eslint-disable max-len */\n    /**\n     * The language parameter determines the language of the guidance messages. It does not affect proper nouns\n     * (the names of streets, plazas, etc.) It has no effect when instructionsType=coded. Allowed values are (a\n     * subset of) the IETF language tags described here. The currently supported languages are listed in the\n     * supported languages section:\n     *\n     * [Routing supported languages](CALCULATE_ROUTE_SUPPORTED_LANGS_URL)\n     *\n     * @attribute language\n     * @param {String} [options.language] The language value.\n     */\n    /* eslint-enable max-len*/\n    language: {\n        validators: [validateRoutingGuidanceLanguage],\n        converters: [convertRoutingGuidanceLanguage]\n    },\n    /**\n     * Reorders the route waypoints to reduce\n     * the route length. Yields best results when used in conjunction with routeType shortest. Possible values:\n     * *    true (compute a better order, if possible; not allowed to be used in conjunction with a\n     * maxAlternatives value greater than 0; not allowed to be used in conjunction with circle waypoints).\n     * The response will include the optimized waypoint indices.\n     * *    false (use the locations in the given order). Not allowed to be used in conjunction with\n     * routeRepresentation none.\n     *\n     * @attribute computeBestOrder\n     * @param {Boolean} [options.computeBestOrder] A flag to reorder the route waypoints to reduce the route length.\n     */\n    computeBestOrder: {\n        validators: [validateBool]\n    },\n\n    /**\n     * Specifies the representation of the set of routes provided as a response. Possible values:\n     * * _polyline_ includes routes in the response.\n     * * _none_ includes only the optimized waypoint indices but does not include the routes in the response.\n     *\n     * This parameter value can only be used in conjunction with computeBestOrder 'true'.\n     *\n     * @attribute routeRepresentation\n     * @param {String} [options.routeRepresentation] Allows the routing response to omit the actual route and give only\n     *     the best ordered waypoints.\n     */\n    routeRepresentation: {\n        validators: [validateOneOfValue(['polyline', 'none'], 'route representation')]\n    },\n\n    /**\n     * Specifies whether to return additional travel times using different types of traffic information (none,\n     * historic, live) as well as the default best-estimate travel time. Possible values:\n     * * none - do not compute additional travel times.\n     * * all - compute travel times for all types of traffic information. Specifying all results in the fields\n     * noTrafficTravelTimeInSeconds, historicTrafficTravelTimeInSeconds and\n     * liveTrafficIncidentsTravelTimeInSeconds being included in the summaries in the route response.\n     *\n     * @attribute computeTravelTimeFor\n     * @param {String} [options.computeTravelTimeFor] Setting `'all'` provides additional information regarding travel\n     *     times.\n     */\n    computeTravelTimeFor: {\n        validators: [validateOneOfValue(['none', 'all'], 'compute travel time for')]\n    },\n\n    /**\n     * The directional heading of the vehicle in degrees starting at true North and continuing in a clockwise\n     * direction. North is 0 degrees, East is 90 degrees, South is 180 degrees, West is 270 degrees. Possible\n     * values are 0-359.\n     *\n     * @attribute vehicleHeading\n     * @param {Number} [options.vehicleHeading] The angle in which the vehicle is heading.\n     */\n    vehicleHeading: {\n        validators: [validateIntegerInInterval(0, 359)]\n    },\n\n    /**\n     * Defines at least how far **in meters** the alternative routes have to follow the reference route.\n     *\n     * This option cannot be used in conjunction with {{#crossLink \"Routing/arriveAt:method\"}}{{/crossLink}}.\n     *\n     * @attribute minDeviationDistance\n     * @param {Number} [options.minDeviationDistance] Meters represented as a positive integer number.\n     */\n    minDeviationDistance: {\n        validators: [\n            validateNaturalInteger,\n            firstParamCannotBeUsedWithSecond('minDeviationDistance', 'arriveAt'),\n            requiresDependantParameter('minDeviationDistance', 'supportingPoints')\n        ]\n    },\n\n    /**\n     * Defines at least how far **in time (seconds)** the alternative routes have to follow the reference route.\n     *\n     * This option cannot be used in conjunction with {{#crossLink \"Routing/arriveAt:method\"}}{{/crossLink}}.\n     *\n     * @attribute minDeviationTime\n     * @param {Number} [options.minDeviationTime] Seconds represented as a positive integer number.\n     */\n    minDeviationTime: {\n        validators: [\n            validateNaturalInteger,\n            firstParamCannotBeUsedWithSecond('minDeviationTime', 'arriveAt'),\n            requiresDependantParameter('minDeviationTime', 'supportingPoints')\n        ]\n    },\n\n    /* eslint-disable max-len */\n    /**\n     * Can be used to set supporting points for constructing (or reconstructing) a route and for\n     * calculating alternative routes to a base route. The provided sequence of supporting points\n     * is used as input for route reconstruction.\n     *\n     * Pseudo examples:\n     * * If the base route is A > B and we include a supporting point C, the result will be A > C > B;\n     * * Supporting points can be used to entirely reconstruct a route you previously had:\n     * Let us illustrate the problem. To go from A > B you received A > C > D > E > B. If later, you try to generate\n     * the same route (A > B), you might get different middle points. So, if you need to generate the exact same route\n     * you previously had you can do something like routing().locations(A, B).supportingPoints(C, D, E)\n     *\n     * You can use one of the following input formats to define the supporting points:\n     * * String: '4.8,52.3' or '4.8,52.3:4.87,52.37'\n     * * String[]: ['4.8,52.3:4.87,52.37', '4.8,52.3:4.87,52.37']\n     * * Object: {lat: 52.3, lon: 4.8} or {lat: 53.3, lng: 5.8} or {x: 53.3, y: 5.8} or {latitude: 53.3, longitude: 5.8}\n     * * Object[]: [{lat: 52.3, lon: 4.8}] or [{lat: 53.3, lng: 5.8}]\n     *\n     * How 'Supporting Points' differ from 'Waypoints?' - Waypoints are points where the calculated route will go through, but\n     * the resulting route might be different from search to search. The waypoints order might not necessarilly be respected\n     * when calculating the best route. Finally, there is a limit to the number of waypoints you can use in a route calculation.\n     * Supporting points can be used to entirely contruct a previous route, or parts of it, using the previously generated points.\n     * This means that there is no limit to the number of points, and the order of these points will be respected.</br></br>\n     *\n     * <b>Note:</b> Please keep in mind, that `supportingPoints` and 'Waypoints' (meaning more than two `locations`) are mutually\n     * exclusive. If you are using `supportingPoints` you can use only two `locations`.\n     *\n     * For more information please refer to the [Routing API Docs](CALCULATE_ROUTE_URL)\n     *\n     * @attribute supportingPoints\n     * @param {String|String[]|Object|Object[]} [options.supportingPoints] Supporting points for route calculation.\n     * @example\n     * ```js\n     * tt.services.routing({\n     *      locations: '4.8,52.3:4.87,52.37',\n     *      supportingPoints: ['-7.164026,39.319843', '-6.16632,39.342266']\n     * })\n     *   .then(function(routeGeoJson) {\n     *     console.log(routeGeoJson);\n     *   });\n     * ```\n     */\n    /* eslint-enable max-len */\n    supportingPoints: {\n        validators: [validateSupportingPoints],\n        converters: [convertSupportingPoints],\n        application: parameterApplications.POST\n    },\n\n    /**\n     * Specifies which of the section types is reported in the route response.\n     *\n     * Possible values:\n     * - `carTrain`, `ferry`, `tunnel` or `motorway`: get\n     * sections if the route includes car trains, ferries, tunnels, or motorways.\n     * - pedestrian: sections which are only suited for pedestrians.\n     * - tollRoad: sections which require a toll to be payed.\n     * - tollVignette: sections which require a toll vignette to be present.\n     * - country: countries the route has parts in.\n     * - travelMode: sections in relation to the request parameter 'travelMode'.\n     *\n     * The default value is travelMode.\n     * @attribute sectionType\n     * @param {String|String[]} [options.sectionType] An array of section types.\n     */\n    sectionType: {\n        validators: [validateArrayOfValues([\n            'carTrain', 'country', 'ferry', 'motorway', 'pedestrian', 'tollRoad', 'tollVignette',\n            'travelMode', 'tunnel', 'traffic'\n        ], 'sectionType')],\n        converters: [convertArrayOfStrings]\n    }\n};\n\nexport function getRoutingParameters(fieldsToSkip) {\n    routingParameters = extend(routingParameters, commonRoutingParameters);\n    const result = clone(routingParameters);\n    if (fieldsToSkip instanceof Array) {\n        fieldsToSkip.forEach(function(field) {\n            delete result[field];\n        });\n    }\n\n    return result;\n}\n","/* eslint-disable max-len */\n/**\n * Calculates a route between two locations using the TomTom\n * [Routing API](CALCULATE_ROUTE_URL);\n *\n * Parameters need to be passed to the constructor.\n *\n * ### The types used in the Routing service:\n *  - point - longitude, latitude pair (in EPSG4326 projection), with the following constraints:\n *    - Longitude values must be in the range -180..+180 inclusive.\n *    - Latitude values must be in the range -90..+90 inclusive.\n *    - Example: 4.89406, 52.37245\n *\n *  - circle - A circle with a center point and a radius (in meters).\n *    - The radius must be a positive integer with the maximum value of 20050000.\n *    - Note that larger integer values will not be rejected but lowered to the maximum value.\n *    - Example: circle(4.89406,52.37245,10000)\n *\n *  - location - A point or a circle.\n *    - Example: 4.89406,52.37245  circle(4.89406,52.37245,10000)\n *\n *  - dateTime - A date and time specified in RFC-3339 format with an optional time zone offset.\n *    - Example: 1996-12-19T16:39:57  1996-12-19T16:39:57-08:00\n *\n * ### Response\n * This service extends the API response by providing the following methods:\n * * `toGeoJson()`, converts route data into a\n * FeatureCollection of <a target=\"_blank\" rel=noopener href=\"https://tools.ietf.org/html/rfc7946#section-3.1.4\">LineString</a>\n * or <a target=\"_blank\" rel=noopener href=\"https://tools.ietf.org/html/rfc7946#section-3.1.5\">MultiLineString</a> geometries.\n * * `toRouteSectionsCollection()`, provides an array of FeatureCollections. Each FeatureCollection consists of\n * <a target=\"_blank\" rel=noopener href=\"https://tools.ietf.org/html/rfc7946#section-3.1.4\">LineStrings </a> representing segments\n * of the route. Take a look at\n * <a target=\"_blank\"  rel=noopener\n * href=\"https://developer.tomtom.com/maps-sdk-web-js/functional-examples#examples,code,route-sections.html\">\n * Route sections example</a> to see it in action.\n * * `getTrackingId()`, returns the `Tracking-ID` associated with the request.\n *\n * To read more about services responses take a look at {{#crossLinkModule \"Services\"}}Difference between\n * API responses and this library's responses{{/crossLinkModule}} section.\n * or dive into <a target=\"_blank\"  rel=noopener\n * href=\"https://developer.tomtom.com/maps-sdk-web-js/functional-examples#examples,code,static-route.html\">\n * Static route example</a> code.\n *\n * @class calculateRoute\n * @namespace Services.services\n * @module Services\n * @uses KeyMixin\n * @uses CommonRoutingParameters\n * @uses RoutingParameters\n * @uses BatchMixin\n * @uses TrackingIdMixin\n * @uses ReturnsToGeoJsonMixin\n * @uses AbortSignalMixin\n * @constructor\n * @param {Object|Array} [options] Options to be passed to the routing call,\n *     or an array of such options objects to perform a batch request.\n * @param {Object} [additionalOptions] Additional options to be passed to the service.\n *\n * @example\n * ```js\n * tt.services.calculateRoute({\n *   key: <Your API key>,\n *   locations: '4.8,52.3:4.87,52.37'\n * }).then(function(routeData) {\n *     console.log(routeData.toGeoJson());\n *   });\n * ```\n */\n/* eslint-enable max-len */\n/* jshint nomen:false */\nimport {SERVICE_TYPES} from 'Core/serviceTypes';\nimport {calculateRouteModel} from '../../model/routing/calculateRoute';\nimport {batchCalculateRouteModel} from '../../model/routing/batchCalculateRoute';\nimport {getRoutingParameters} from './routingParameters';\nimport {modelResponse} from '../../model/modelResponse';\nimport {\n    routingEndpoint,\n    batchSyncRoutingEndpoint,\n    batchRoutingEndpoint,\n    batchRoutingQueryEndpoint\n} from 'endpoints';\nimport {\n    singleRequestServiceFactory,\n    batchRequestServiceFactory,\n    serviceFactory\n} from '../../core';\n\nexport function calculateRoute(options, additionalOptions) {\n    const fields = getRoutingParameters();\n    const maxNoOfElementsInBatchRequest = 100;\n    const singleRequest = singleRequestServiceFactory(routingEndpoint);\n    const batchRequest = batchRequestServiceFactory(maxNoOfElementsInBatchRequest, {\n        batchSync: batchSyncRoutingEndpoint,\n        batch: batchRoutingEndpoint,\n        single: batchRoutingQueryEndpoint\n    });\n\n    function handleServiceCall(data, abortSignal) {\n        return singleRequest(fields, data, abortSignal)\n            .then(response => modelResponse(response, calculateRouteModel));\n    }\n    function handleBatchServiceCall(data, abortSignal) {\n        return batchRequest(fields, data, abortSignal)\n            .then(response => modelResponse(response, batchCalculateRouteModel));\n    }\n\n    return serviceFactory(\n        fields,\n        SERVICE_TYPES.ROUTING,\n        'calculateRoute',\n        handleServiceCall,\n        handleBatchServiceCall\n    )(options, additionalOptions);\n}\n","import {\n    oneOfValue as validateOneOfValue, numberInInterval as validateNumberInInterval,\n    chargingModes as validateChargingModes\n} from '../validators';\nimport {\n    constantSpeedConsumption, floatAndEngineType, chargeParameter,\n    requiresDependantParameter, consumptionRecuperationAltitudeParameter\n} from '../postValidators';\nimport {constantSpeedConsumption as convertConstantSpeedConsumption} from '../converters';\nimport {getRoutingParameters} from './routingParameters';\nimport parameterApplications from '../../common/parameterApplications';\nimport {extend} from '../utils';\n\n/**\n * @private\n * @class LongDistanceEVRoutingParameters\n * @module Services\n */\n\nconst fieldsToSkip = ['arriveAt', 'travelMode', 'computeTravelTimeFor', 'alternativeType',\n    'maxAlternatives', 'instructionsType', 'language', 'computeBestOrder', 'routeRepresentation',\n    'supportingPoints', 'minDeviationDistance', 'minDeviationTime', 'constantSpeedConsumptionInLitersPerHundredkm',\n    'currentFuelInLiters', 'fuelEnergyDensityInMJoulesPerLiter', 'hilliness', 'windingness', 'routeType',\n    'vehicleEngineType', 'currentChargeInkWh', 'maxChargeInkWh', 'constantSpeedConsumptionInkWhPerHundredkm'];\n\nconst extendedFields = {\n    /* eslint-disable max-len */\n    /**\n     * Specifies the efficiency of converting chemical energy stored in fuel to kinetic energy when the\n     * vehicle accelerates (i.e., KineticEnergyGained/ChemicalEnergyConsumed).\n     * ChemicalEnergyConsumed is obtained by converting consumed fuel to chemical energy using\n     * fuelEnergyDensityInMJoulesPerLiter.\n     * @attribute accelerationEfficiency\n     * @param {Number} [options.accelerationEfficiency]\n     */\n    /**\n     * List of 3-character ISO 3166-1 alpha-3 country codes of countries in which\n     * all toll roads with vignettes are to be avoided.\n     * Toll roads with vignettes in countries not in the list are unaffected.\n     * It is an error to specify both avoidVignette and allowVignette.\n     * @attribute avoidVignette\n     * @param {String|String[]} [options.avoidVignette] An array of country codes.\n     * @throws {TypeError} If the given argument cannot be converted into a valid value.\n     */\n    /**\n     * Specifies the amount of power consumed for sustaining auxiliary systems in kilowatts (kW).\n     * It can be used to specify consumption due to devices and systems such as AC systems, radio, heating, etc.\n     * @attribute auxiliaryPowerInkW\n     * @param {Number} [options.auxiliaryPowerInkW]\n     */\n    auxiliaryPowerInkW: {\n        validators: [\n            floatAndEngineType('electric', 'auxiliaryPowerInkW')\n        ]\n    },\n    /**\n     * Specifies something that the route calculation should try to avoid when determining the route. Can be\n     * specified multiple times. Possible values:\n     * *    `tollRoads`: avoids toll roads.\n     * *    `motorways`: avoids motorways.\n     * *    `ferries`: avoids ferries.\n     * *    `unpavedRoads`: avoids unpaved roads.\n     * *    `carpools`: avoids routes that require use of a carpool (HOV/ High Occupancy Vehicle) lanes.\n     * *    `alreadyUsedRoads`: avoids using the same road multiple times.\n     *\n     * Most useful in conjunction with `routeType=thrilling`.\n     *\n     * @attribute avoid\n     * @param {Array|String} [options.avoid] Specifies something that the route calculation should try to avoid when\n     *     determining the route.\n     */\n    /**\n     * Supported shapes include rectangles.\n     * Can contain one of each supported shapes element.\n\n     * @example\n     * ```js\n     * tt.services.calculateRoute({\n     *      locations: '52.37173,4.91015:52.36357,4.898046255',\n     *      avoidAreas: [{\n     *      southWestCorner: {latitude: 52.36391, longitude:4.90106},\n     *      northEastCorner: {latitude: 52.36554, longitude:4.90767}\n     * }]);\n     * ```\n     * Supported point formats:\n     * - 'lat,lon'\n     * - {lat:111, lon:111}\n     * - {lat:111, lng:111}\n     * - {latitude:111, longitude:111}\n     * - {x:111, y:111}\n     * - {lat: function(), lng:function()}\n     *\n     * @attribute avoidAreas\n     * @param {Object[]} [options.avoidAreas] A list of shapes to avoid for planning routes.\n     * @throws {TypeError} If the given argument cannot be converted to a valid value.\n     */\n    /**\n     * List of 3-character ISO 3166-1 alpha-3 country codes of countries in which\n     * all toll roads with vignettes are to be avoided.\n     * Toll roads with vignettes in countries not in the list are unaffected.\n     * It is an error to specify both avoidVignette and allowVignette.\n     * @attribute avoidVignette\n     * @param {String|String[]} [options.avoidVignette] An array of country codes.\n     * @throws {TypeError} If the given argument cannot be converted into a valid value.\n     */\n    /**\n     * Specifies the speed-dependent component of consumption.\n     * Provided as an unordered list of speed/consumption-rate pairs. The list defines points\n     * on a consumption curve.\n     * Consumption rates for speeds not in the list are found as follows:\n     * *    By linear interpolation, if the given speed lies in between two speeds in the list.\n     * *    By linear extrapolation otherwise, assuming a constant (Consumption/Speed) determined by\n     * the nearest two points in the list.\n     *\n     * The list must contain between 1 and 25 points (inclusive), and may not contain duplicate points\n     * for the same speed. If it only contains a single point, then the consumption rate of that point\n     * is used without further processing. Consumption specified for the largest speed must be greater\n     * than or equal to that of the penultimate highest speed.\n     * This ensures that extrapolation does not lead to negative consumption rates.\n     * Similarly, consumption values specified for the two lowest speeds in the list cannot lead to a\n     * negative consumption rate for any lower speed.\n     * The minimum and maximum values described here refer to the valid range for the consumption values\n     * (expressed in kWh/100km).\n     * @attribute constantSpeedConsumptionInkWhPerHundredkm\n     * @param {Array} options.constantSpeedConsumptionInkWhPerHundredkm Colon-delimited list of\n     * ElectricConstantSpeedConsumptionPairs, e.g., an array of such pairs \"60,7\".\n     */\n    constantSpeedConsumptionInkWhPerHundredkm: {\n        validators: [\n            constantSpeedConsumption('electric')\n        ],\n        converters: [convertConstantSpeedConsumption],\n        required: true\n    },\n    /**\n     * Specifies the current electric energy supply in kilowatt hours (kWh).\n     * @attribute currentChargeInkWh\n     * @param {Number} options.currentChargeInkWh\n     */\n    currentChargeInkWh: {\n        validators: [\n            chargeParameter('currentChargeInkWh', 'maxChargeInkWh')\n        ],\n        required: true\n    },\n    /**\n     * Specifies the efficiency of converting kinetic energy to saved (not consumed) fuel when the\n     * vehicle decelerates (i.e., ChemicalEnergySaved/KineticEnergyLost).\n     * ChemicalEnergySaved is obtained by converting saved (not consumed) fuel to energy using\n     * fuelEnergyDensityInMJoulesPerLiter.\n     * @attribute decelerationEfficiency\n     * @param {Number} [options.decelerationEfficiency]\n     */\n    /**\n     * The date and time of departure from the origin point.\n     * Departure times, apart from now, must be specified as a dateTime.\n     * When a time zone offset is not specified, it will be assumed to be that of the origin point.\n     * The departAt value must be in the future. The departAt parameter cannot be used in conjunction with\n     * arriveAt.\n     *\n     * @attribute departAt\n     * @param {String} [options.departAt] The properly formatted date with the time or 'now' value. Date\n     * cannot be in the past and has to follow ISO 8601 standard.\n     */\n    /**\n     * Specifies the efficiency of converting potential energy to saved (not consumed) fuel when the\n     * vehicle loses elevation (i.e., ChemicalEnergySaved/PotentialEnergyLost).\n     * ChemicalEnergySaved is obtained by converting saved (not consumed) fuel to energy using\n     * fuelEnergyDensityInMJoulesPerLiter.\n     * @attribute downhillEfficiency\n     * @param {Number} [options.downhillEfficiency]\n     */\n    /**\n     * Specifies the maximum electric energy supply in kilowatt hours (kWh) that may be stored in\n     * the vehicle's battery.\n     * @attribute maxChargeInkWh\n     * @param {Number} options.maxChargeInkWh\n     */\n    maxChargeInkWh: {\n        validators: [\n            chargeParameter('maxChargeInkWh', 'currentChargeInkWh')\n        ],\n        required: true\n    },\n    /**\n     * Represents the type of protocol used to perform the service call.\n     *\n     * @attribute protocol\n     * @param {String} [options.protocol] Protocol type, one of `http` or `https`.\n     */\n    /**\n     * Specifies which data should be reported for diagnosis purposes.\n     *\n     * Possible values: _effectiveSettings_\n     * Reports the effective parameters or data used when calling the API.\n     *\n     * In the case of defaulted parameters, the default will be reflected where the parameter was not specified\n     * by the caller.\n     *\n     * @attribute report\n     * @param {String} [options.report] The level of a verbose answer from the service, useful for debugging purposes.\n     */\n    /**\n     * Specifies which of the section types is reported in the route response.\n     *\n     * Possible values:\n     * - `carTrain`, `ferry`, `tunnel` or `motorway`: get\n     * sections if the route includes car trains, ferries, tunnels, or motorways.\n     * - pedestrian: sections which are only suited for pedestrians.\n     * - tollRoad: sections which require a toll to be payed.\n     * - tollVignette: sections which require a toll vignette to be present.\n     * - country: countries the route has parts in.\n     * - travelMode: sections in relation to the request parameter 'travelMode'.\n     *\n     * The default value is travelMode.\n     * @attribute sectionType\n     * @param {String|String[]} [options.sectionType] An array of section types.\n     */\n    /**\n     * Possible values:\n     * - `true` (do consider all available traffic information during routing)\n     * - `false` (ignores current traffic data during routing) Note that although the current traffic data is\n     *   ignored during routing, the effect of historic traffic on effective road speeds is still incorporated.\n     *\n     * The default is true.\n     *\n     * @attribute traffic\n     * @param {Boolean} [options.traffic=true] A boolean flag determines if traffic data should be used to calculate the\n     *     route.\n     */\n    /**\n     * Weight per axle of the vehicle in kg (kilograms). A value of 0 means that weight restrictions per axle are not\n     * considered during route planning. This parameter is currently only considered for travelMode truck.\n     *\n     * @attribute vehicleAxleWeight\n     * @param {Number} [options.vehicleAxleWeight] The vehicle axle weight in kg (kilograms).\n     */\n    /**\n     * The vehicle is used for commercial purposes and thus may not be allowed to drive on some roads. This\n     * parameter is currently only considered for travelMode truck.\n     *\n     * @attribute vehicleCommercial\n     * @param {Boolean} [options.vehicleCommercial] True if the vehicle is used for commercial purposes.\n     */\n    /**\n     * Engine type of the vehicle. This parameter is currently only considered for travelMode truck. Valid\n     * options are: `electric`\n     *\n     * @attribute vehicleEngineType\n     * @param {String} options.vehicleEngineType The vehicle engine type.\n     */\n    vehicleEngineType: {\n        validators: [validateOneOfValue(['electric'], 'vehicleEngineType')],\n        required: true\n    },\n    /**\n     * The directional heading of the vehicle in degrees starting at true North and continuing in a clockwise\n     * direction. North is 0 degrees, East is 90 degrees, South is 180 degrees, West is 270 degrees. Possible\n     * values are 0-359.\n     *\n     * @attribute vehicleHeading\n     * @param {Number} [options.vehicleHeading] The angle in which the vehicle is heading.\n     */\n    /**\n     * Height of the vehicle in meters. A value of 0 means that height restrictions are not considered\n     * during route planning. This parameter is currently only considered for travelMode truck.\n     *\n     * @attribute vehicleHeight\n     * @param {Number} [options.vehicleHeight] The vehicle height in meters.\n     */\n    /**\n     * Length of the vehicle in meters. A value of 0 means that length restrictions are not considered during\n     * route planning. This parameter is currently only considered for travelMode truck.\n     *\n     * @attribute vehicleLength\n     * @param {Number} [options.vehicleLength] The vehicle length in meters.\n     */\n    /**\n     * Types of cargo that may be classified as hazardous materials and restricted from some roads. Available\n     * vehicleLoadType values are US Hazmat classes 1 through 9, plus generic classifications for use in other\n     * countries.\n     *\n     * __Use these for routing in US__\n     * * `USHazmatClass1 Explosives`\n     * * `USHazmatClass2 Compressed gas`\n     * * `USHazmatClass3 Flammable liquids`\n     * * `USHazmatClass4 Flammable solids`\n     * * `USHazmatClass5 Oxidizers`\n     * * `USHazmatClass6 Poisons`\n     * * `USHazmatClass7 Radioactive`\n     * * `USHazmatclass8 Corrosives`\n     * * `USHazmatClass9 Miscellaneous`\n     *\n     * __Use these for routing in all other countries__\n     * * `otherHazmatExplosive Explosives`\n     * * `otherHazmatGeneral Miscellaneous`\n     * * `otherHazmatHarmfulToWater Harmful to water`\n     *\n     * This parameter is currently only considered for travelMode truck.\n     *\n     * @attribute vehicleLoadType\n     * @param {Array|String} [options.vehicleLoadType] The array of truck cargo classification.\n     */\n    /**\n     * Maximum speed of the vehicle in km/hour. A value of 0 means that an appropriate value for the vehicle\n     * will be determined and applied during route planning. A non-zero value may be overridden during route\n     * planning. This parameter is currently only considered for travelMode truck.\n     *\n     * @attribute vehicleMaxSpeed\n     * @param {Number} [options.vehicleMaxSpeed] The maximal allowed vehicle speed in km/h.\n     */\n    /**\n     * Weight of the vehicle in kg. A value of 0 means that weight restrictions are not considered during route\n     * planning. This parameter is currently only considered for travelMode truck.\n     *\n     * @attribute vehicleWeight\n     * @param {Number} [options.vehicleWeight] The vehicle weight in kg (kilograms).\n     */\n    /**\n     * Width of the vehicle in meters. A value of 0 means that width restrictions are not considered during\n     * route planning. This parameter is currently only considered for travelMode truck.\n     *\n     * @attribute vehicleWidth\n     * @param {Number} [options.vehicleWidth] The vehicle width in meters.\n     */\n    /**\n     * Specifies the efficiency of converting chemical energy stored in fuel to potential energy\n     * when the vehicle gains elevation (i.e., PotentialEnergyGained/ChemicalEnergyConsumed).\n     * ChemicalEnergyConsumed is obtained by converting consumed fuel to chemical energy using\n     * fuelEnergyDensityInMJoulesPerLiter.\n     * @attribute uphillEfficiency\n     * @param {Number} [options.uphillEfficiency]\n     */\n    /**\n     * @attribute chargingModes\n     * @param {Array} options.chargingModes A non-empty list of at most 10 `chargingModes`, which the vehicle is\n     * able to use to charge. Each `chargingConnection` appears in at most one `chargingMode`.\n     */\n    chargingModes: {\n        validators: [validateChargingModes],\n        required: true,\n        application: parameterApplications.POST\n    },\n    /**\n     * @attribute minChargeAtDestinationInkWh\n     * @param {Number} options.minChargeAtDestinationInkWh The battery level upon arrival at the destination\n     * of the resulting route will be at least this much.\n     * *Maximum value:* `maxChargeInkWh`\n     */\n    minChargeAtDestinationInkWh: {\n        validators: [validateNumberInInterval(0, Number.MAX_VALUE)],\n        required: true\n    },\n    /**\n     * @attribute minChargeAtChargingStopsInkWh\n     * @param {Number} options.minChargeAtChargingStopsInkWh The battery level upon arrival at each intermediate\n     * charging stop of the resulting route will be at least this much.\n     * *Maximum value:* `0.2  maxChargeInkWh`\n     */\n    minChargeAtChargingStopsInkWh: {\n        validators: [validateNumberInInterval(0, Number.MAX_VALUE)],\n        required: true\n    },\n    /**\n     * Specifies the electric energy in kWh gained by the vehicle through losing 1000 meters of elevation.\n     * * Note: It must be paired with `consumptionInkWhPerkmAltitudeGain`.\n     * * Note: It cannot be used with `accelerationEfficiency`, `decelerationEfficiency`, `uphillEfficiency`\n     * or `downhillEfficiency`.\n     *\n     * Minimum value: 0.0\n     * Maximum value: `consumptionInkWhPerkmAltitudeGain`\n     *\n     * @attribute recuperationInkWhPerkmAltitudeLoss\n     * @param {Number} [options.recuperationInkWhPerkmAltitudeLoss] Electric energy in kWh\n     */\n    recuperationInkWhPerkmAltitudeLoss: {\n        validators: [\n            requiresDependantParameter(\n                'recuperationInkWhPerkmAltitudeLoss',\n                'consumptionInkWhPerkmAltitudeGain'\n            ),\n            consumptionRecuperationAltitudeParameter\n        ]\n    },\n\n    /**\n     * Specifies the electric energy in kWh consumed by the vehicle through gaining 1000 meters of elevation.\n     * * Note: It must be paired with `recuperationInkWhPerkmAltitudeLoss`.\n     * * Note: It cannot be used with `accelerationEfficiency`, `decelerationEfficiency`, `uphillEfficiency`\n     * or `downhillEfficiency`.\n     *\n     * Minimum value: `vehicleAdrTunnelRestrictionCode`\n     * Maximum value: 500.0\n     *\n     * @attribute consumptionInkWhPerkmAltitudeGain\n     * @param {Number} [options.consumptionInkWhPerkmAltitudeGain] Electric energy in kWh\n     */\n    consumptionInkWhPerkmAltitudeGain: {\n        validators: [\n            requiresDependantParameter(\n                'consumptionInkWhPerkmAltitudeGain',\n                'recuperationInkWhPerkmAltitudeLoss'\n            ),\n            consumptionRecuperationAltitudeParameter\n        ]\n    },\n\n    /**\n     * If specified, the vehicle is subject to ADR tunnel restrictions.\n     * * Vehicles with code B are restricted from roads with ADR tunnel categories B, C, D, and E.\n     * * Vehicles with code C are restricted from roads with ADR tunnel categories C, D, and E.\n     * * Vehicles with code D are restricted from roads with ADR tunnel categories D and E.\n     * * Vehicles with code E are restricted from roads with ADR tunnel category E.\n     * * If `vehicleAdrTunnelRestrictionCode` is not specified, no ADR tunnel restrictions apply.\n     *\n     * Notes:\n     * * If `travelMode` is pedestrian or bicycle, `vehicleAdrTunnelRestrictionCode` is not considered.\n     * * The `vehicleAdrTunnelRestrictionCode` and `vehicleLoadType` parameters are independent; please\n     * provide both if applicable.\n     *\n     * @attribute vehicleAdrTunnelRestrictionCode\n     * @param {String} [options.vehicleAdrTunnelRestrictionCode] An ADR restriction code\n     * @throws {TypeError} If the given argument is not a valid ADR restriction code.\n     */\n    vehicleAdrTunnelRestrictionCode: {\n        validators: [validateOneOfValue(['B', 'C', 'D', 'E'], 'vehicleAdrTunnelRestrictionCode')]\n    },\n\n    /**\n     * The travel mode for the requested route.\n     * The only possible value is `car`.\n     *\n     * @attribute travelMode\n     * @param {String} [options.travelMode] The primary means of transportation to be used while routing.\n     */\n    travelMode: {\n        validators: [validateOneOfValue(['car'], 'travel mode')]\n    }\n};\n\nexport function getLongDistanceEVRoutingParameters() {\n    const fields = getRoutingParameters(fieldsToSkip);\n    return extend(fields, extendedFields);\n}\n","/* eslint-disable max-len */\n/**\n * The Long Distance EV Routing service calculates a route between a given origin and\n * destination. The route contains charging stops that have been added automatically\n * based on the vehicle's consumption and charging model.\n *\n * * Each charging stop results in an additional leg in the route response.\n * * Each additional leg contains a `chargingInformationAtEndOfLeg` element in its leg summary.\n * * Both the route summary and the leg summary include a `remainingChargeAtArrivalInkWh` element.\n * * The route summary includes a `totalChargingTimeInSeconds` element.\n *\n * The `chargingInformationAtEndOfLeg` field consists of:\n *\n * * target battery charge\n * * charging time\n * * details about the charging stop\n *\n *  ### The types used in the Long Distance EV Routing service:\n *\n *  - **chargingMode** - An object that contains `chargingConnections` and a `chargingCurve` that describes the\n    charging behavior of the vehicle using the specified charging connections.\n *\n *  - **chargingConnections** - A non-empty array of at most 20 unique `chargingConnections` which\n *  result in the same charging curve.\n *\n *  - **chargingConnection** - Contains one `facilityType` and one `plugType` which are compatible\n *  with the vehicle.\n *\n *      ```js\n *      {\n *          \"facilityType\" : \"Charge_380_to_480V_3_Phase_at_32A\",\n *          \"plugType\" : \"IEC_62196_Type_2_Outlet\"\n *      }\n *      ```\n *\n *  - **facilityType** - A string matching a `facilityType` in the values table, which\n *  can be found in <a href=\"https://developer.tomtom.com/routing-api/routing-api-documentation/long-distance-ev-routing\">\n *  Distance EV Routing API documentation</a>.\n *\n *  - **plugType** - A string matching a `plugType` in the values table, which\n * can be found in <a href=\"https://developer.tomtom.com/routing-api/routing-api-documentation/long-distance-ev-routing\">\n * Distance EV Routing API documentation</a>.\n *\n *  - **chargingCurve** - A piecewise-linear function which maps a target charge level to\n *  the time it takes to charge an empty battery to this level, that is used to compute charging times of\n * the vehicle. It has to follow these rules:\n *      1. It is given by a sequence of at most 10 non-duplicate `chargingCurveSupportPoints` that are totally,\n *      increasingly ordered in `timeToChargeInSeconds` and `chargeInkWh`.\n *      2. The last `chargeInkWh` is `maxChargeInkWh`.\n *      3. The curve is given by connecting the given points in order after adding the first point:\n *\n *\n *  - **chargingCurveSupportPoint** - A supporting point of a charging curve consisting\n * of `chargeInkWh` and `timeToChargeInSeconds` such that the time it takes to charge the battery from\n * `0` kWh to `chargeInkWh` kWh is given by `timeToChargeInSeconds`.\n *\n *      ```js\n *      {\n *          \"chargeInkWh\" : 6,\n *          \"timeToChargeInSeconds\" : 300\n *      }\n *      ```\n *\n * - **timeToChargeInSeconds** - A time span in seconds. A non-negative integer.\n *\n * - **chargeInkWh** - A battery charge level in kWh. A float in the range (0, `maxChargeInkWh`>.\n *\n * ### Response\n * This service extends the API response by providing the following methods:\n * * `toGeoJson()`, converts route data into\n * a Feature Collection of <a target=\"_blank\" rel=noopener href=\"https://tools.ietf.org/html/rfc7946#section-3.1.4\">LineString</a>\n * or <a target=\"_blank\" rel=noopener href=\"https://tools.ietf.org/html/rfc7946#section-3.1.5\">MultiLineString</a> geometries.\n * * `getTrackingId()`, returns the `Tracking-ID` associated with the request.\n *\n * To read more about services responses take a look at {{#crossLinkModule \"Services\"}}Difference between\n * API responses and this library's responses{{/crossLinkModule}} section.\n *\n * @class longDistanceEVRouting\n * @namespace Services.services\n * @module Services\n * @uses KeyMixin\n * @uses CommonRoutingParameters\n * @uses LongDistanceEVRoutingParameters\n * @uses TrackingIdMixin\n * @uses AbortSignalMixin\n * @constructor\n * @param {Object|Array} [options] Options to be passed to the routing call,\n *     or an array of such options objects to perform a batch request.\n * @param {Object} [additionalOptions] Additional options to be passed to the service.\n *\n * @example\n * ```js\n * tt.services.longDistanceEVRouting({\n *   key: <Your API key>,\n *   locations: '4.878,52.367:4.879,52.367',\n *   vehicleEngineType: 'electric',\n *   avoid: 'unpavedRoads',\n *   constantSpeedConsumptionInkWhPerHundredkm: ['50.0,6.5', '100.0,8.5'],\n *   currentChargeInkWh: 10,\n *   maxChargeInkWh: 40,\n *   minChargeAtDestinationInkWh: 5.2,\n *   minChargeAtChargingStopsInkWh: 1.5,\n *   chargingModes: [\n *       {\n *           chargingConnections: [\n *               {\n *                   facilityType: 'Charge_380_to_480V_3_Phase_at_32A',\n *                   plugType: 'IEC_62196_Type_2_Outlet'\n *               }\n *           ],\n *           chargingCurve: [\n *               {\n *                   chargeInkWh: 6,\n *                   timeToChargeInSeconds: 300\n *               },\n *               {\n *                   chargeInkWh: 12,\n *                   timeToChargeInSeconds: 720\n *               }\n *           ]\n *       }\n *   ]\n * }).then(function(routeData) {\n *     console.log(routeData.toGeoJson());\n *   });\n * ```\n */\n/* eslint-enable max-len */\n/* jshint nomen:false */\nimport { SERVICE_TYPES } from 'Core/serviceTypes';\nimport {getLongDistanceEVRoutingParameters} from './longDistanceEVRoutingParameters';\nimport {calculateRouteModel} from '../../model/routing/calculateRoute';\nimport {modelResponse} from '../../model/modelResponse';\nimport { longDistanceEVRoutingEndpoint } from 'endpoints';\nimport {\n    singleRequestServiceFactory,\n    serviceFactory\n} from '../../core';\n\nexport function longDistanceEVRouting(options, additionalOptions) {\n    const fields = getLongDistanceEVRoutingParameters();\n    const singleRequest = singleRequestServiceFactory(longDistanceEVRoutingEndpoint);\n    const handleServiceCall = (data, abortSignal) => {\n        return singleRequest(fields, data, abortSignal)\n            .then(response => modelResponse(response, calculateRouteModel));\n    };\n    return serviceFactory(\n        fields,\n        SERVICE_TYPES.ROUTING,\n        'longDistanceEVRouting',\n        handleServiceCall\n    )(options, additionalOptions);\n}\n","export function matrixRoutingModel(data) {\n    if (data.error) {\n        return { error: data.error };\n    }\n    if (data.matrix) {\n        return data;\n    }\n    return null;\n}\n","/* eslint-disable max-len */\nimport {\n    arrayOf as validateArrayOf, objectOf as validateObjectOf, latitude as validateLatitude,\n    longitude as validateLongitude, waitTimeSeconds as validateWaitTimeSeconds\n} from '../validators';\nimport {\n    arrayOf as convertArrayOf, latitude as convertLatitude, longitude as convertLongitude,\n    objectOf as convertObjectOf\n} from '../converters';\n\nimport {getRoutingParameters} from './routingParameters';\nimport {clone} from '../utils';\nimport parameterApplications from '../../common/parameterApplications';\n\n/**\n * Specifies the efficiency of converting chemical energy stored in fuel to kinetic energy when the\n * vehicle accelerates (i.e., KineticEnergyGained/ChemicalEnergyConsumed).\n * ChemicalEnergyConsumed is obtained by converting consumed fuel to chemical energy using\n * fuelEnergyDensityInMJoulesPerLiter.\n * @attribute accelerationEfficiency\n * @param {Number} [options.accelerationEfficiency]\n*/\n\n/**\n * Specifies the amount of fuel consumed for sustaining auxiliary systems of the vehicle, in liters\n *  per hour. It can be used to specify consumption due to devices and systems such as AC systems, radio,\n * heating, etc.\n * @attribute auxiliaryPowerInLitersPerHour\n * @param {Number} [options.auxiliaryPowerInLitersPerHour]\n*/\n\n/**\n * Specifies the amount of power consumed for sustaining auxiliary systems in kilowatts (kW).\n * It can be used to specify consumption due to devices and systems such as AC systems, radio, heating, etc.\n * @attribute auxiliaryPowerInkW\n * @param {Number} [options.auxiliaryPowerInkW]\n*/\n\n/**\n * Specifies the speed-dependent component of consumption.\n * Provided as an unordered list of speed/consumption-rate pairs. The list defines points\n * on a consumption curve.\n * Consumption rates for speeds not in the list are found as follows:\n * *    By linear interpolation, if the given speed lies in between two speeds in the list.\n * *    By linear extrapolation otherwise, assuming a constant (Consumption/Speed) determined by\n * the nearest two points in the list.\n *\n * The list must contain between 1 and 25 points (inclusive), and may not contain duplicate points\n * for the same speed. If it only contains a single point, then the consumption rate of that point\n * is used without further processing. Consumption specified for the largest speed must be greater\n * than or equal to that of the penultimate highest speed.\n * This ensures that extrapolation does not lead to negative consumption rates.\n * Similarly, consumption values specified for the two lowest speeds in the list cannot lead to a\n * negative consumption rate for any lower speed.\n * The minimum and maximum values described here refer to the valid range for the consumption values\n * (expressed in kWh/100km).\n * @attribute constantSpeedConsumptionInkWhPerHundredkm\n * @param {Array} [options.constantSpeedConsumptionInkWhPerHundredkm] Colon-delimited list of\n * ElectricConstantSpeedConsumptionPairs, e.g., an array of such pairs \"60,7\".\n*/\n\n/**\n * Specifies the speed-dependent component of consumption.\n * Provided as an unordered list of speed/consumption-rate pairs. The list defines points on a\n * consumption curve.\n * Consumption rates for speeds not in the list are found as follows:\n *   *  By linear interpolation, if the given speed lies in between two speeds in the list.\n *   *  By linear extrapolation otherwise, assuming a constant (Consumption/Speed) determined by\n * the nearest two points in the list.\n *\n * The list must contain between 1 and 25 points (inclusive), and may not\n * contain duplicate points for the same speed. If it only contains a single point,\n * then the consumption rate of that point is used without further processing.\n * Consumption specified for the largest speed must be greater than or equal to that of the\n * penultimate highest speed. This ensures that extrapolation does not lead to negative consumption rates.\n * Similarly, consumption values specified for the two lowest speeds in the list cannot lead to a\n * negative consumption rate for any smaller speed.\n * The minimum and maximum values described here refer to the valid range for the consumption values\n * (expressed in l/100km).\n * @attribute constantSpeedConsumptionInLitersPerHundredkm\n * @param {Array} [options.constantSpeedConsumptionInLitersPerHundredkm] Colon-delimited list of\n * CombustionConstantSpeedConsumptionPairs, e.g., an array of such pairs \"60,7\".\n*/\n\n/**\n * Specifies the current electric energy supply in kilowatt hours (kWh).\n * @attribute currentChargeInkWh\n * @param {Number} [options.currentChargeInkWh]\n */\n\n/**\n * Specifies the current supply of fuel in liters.\n * @attribute currentFuelInLiters\n * @param {Number} [options.currentFuelInLiters]\n */\n\n/**\n * Specifies the efficiency of converting kinetic energy to saved (not consumed) fuel when the\n * vehicle decelerates (i.e., ChemicalEnergySaved/KineticEnergyLost).\n * ChemicalEnergySaved is obtained by converting saved (not consumed) fuel to energy using\n * fuelEnergyDensityInMJoulesPerLiter.\n * @attribute decelerationEfficiency\n * @param {Number} [options.decelerationEfficiency]\n */\n\n/**\n * Specifies the efficiency of converting potential energy to saved (not consumed) fuel when the\n * vehicle loses elevation (i.e., ChemicalEnergySaved/PotentialEnergyLost).\n * ChemicalEnergySaved is obtained by converting saved (not consumed) fuel to energy using\n * fuelEnergyDensityInMJoulesPerLiter.\n * @attribute downhillEfficiency\n * @param {Number} [options.downhillEfficiency]\n */\n\n/**\n * Specifies the amount of chemical energy stored in one liter of fuel in megajoules (MJ).\n * It is used in conjunction with the *Efficiency parameters for conversions between saved\n * or consumed energy and fuel.\n * For example, energy density is 34.2 MJ/l for gasoline, and 35.8 MJ/l for Diesel fuel.\n * @attribute fuelEnergyDensityInMJoulesPerLiter\n * @param {Number} [options.fuelEnergyDensityInMJoulesPerLiter]\n */\n\n/**\n * Specifies the maximum electric energy supply in kilowatt hours (kWh) that may be stored in\n * the vehicle's battery.\n * @attribute maxChargeInkWh\n * @param {Number} [options.maxChargeInkWh]\n */\n\n/**\n * Specifies the efficiency of converting chemical energy stored in fuel to potential energy\n * when the vehicle gains elevation (i.e., PotentialEnergyGained/ChemicalEnergyConsumed).\n * ChemicalEnergyConsumed is obtained by converting consumed fuel to chemical energy using\n * fuelEnergyDensityInMJoulesPerLiter.\n * @attribute uphillEfficiency\n * @param {Number} [options.uphillEfficiency]\n */\n\n/**\n * If specified, the vehicle is subject to ADR tunnel restrictions.\n * * Vehicles with code B are restricted from roads with ADR tunnel categories B, C, D, and E.\n * * Vehicles with code C are restricted from roads with ADR tunnel categories C, D, and E.\n * * Vehicles with code D are restricted from roads with ADR tunnel categories D and E.\n * * Vehicles with code E are restricted from roads with ADR tunnel category E.\n * * If `vehicleAdrTunnelRestrictionCode` is not specified, no ADR tunnel restrictions apply.\n *\n * Notes:\n * * If `travelMode` is pedestrian or bicycle, `vehicleAdrTunnelRestrictionCode` is not considered.\n * * The `vehicleAdrTunnelRestrictionCode` and `vehicleLoadType` parameters are independent; please\n * provide both if applicable.\n *\n * @attribute vehicleAdrTunnelRestrictionCode\n * @param {String} [options.vehicleAdrTunnelRestrictionCode] An ADR restriction code\n * @throws {TypeError} If the given argument is not a valid ADR restriction code.\n */\n\n/**\n * A setter and getter for the `routeType` attribute.\n *\n * Represents the type of route requested.\n *\n * Notes on specific values:\n *  - `fastest` returns the fastest route.\n *  - `shortest` returns the shortest route by distance.\n *  - `eco` routes balance economy and speed.\n *  - thrilling routes include interesting or challenging roads and use as few motorways as possible. You can\n * choose the level of turns included and also the degree of hilliness. See the hilliness and windingness\n * parameters to set this. There is a limit of 900km on routes planned with routeType=thrilling\n * The default value is fastest.\n *\n * @attribute routeType\n * @param {String} [options.routeType] The route type to be used during route calculation.\n * @throws {TypeError} If the given argument cannot be converted to a valid value.\n */\n\n/**\n * A setter and getter for the 'traffic' attribute.\n * Possible values:\n * true (do consider all available traffic information during routing).\n * false (ignore current traffic data during routing). Note that although the current traffic data is\n * ignored during routing, the effect of historic traffic on effective road speeds is still incorporated.\n * The default is true.\n *\n * @attribute traffic\n * @param {String|Boolean} [options.traffic] A boolean flag to determine if traffic data should be used to calculate the\n *     route.\n * @throws {TypeError} If the given argument cannot be converted to a valid value.\n */\n\n/**\n * A setter and getter for the `avoid` attribute.\n *\n * Specifies something that the route calculation should try to avoid when determining the route.\n * Can be specified multiple times. Possible values:\n *  - `tollRoads` avoids toll roads.\n *  - `motorways` avoids motorways.\n *  - `ferries` avoids ferries.\n *  - `unpavedRoads` avoids unpaved roads.\n *  - `carpools` avoids routes that require use of carpool (HOV/ High Occupancy Vehicle) lanes.\n *  - `alreadyUsedRoads` avoids using the same road multiple times.\n *\n * Most useful in conjunction with `routeType=thrilling`.\n *\n * @attribute avoid\n * @param {Array|String} [options.avoid] Specifies something that the route calculation should try to avoid when\n *     determining the route.\n * @throws {TypeError} If the given argument cannot be converted to a valid value.\n */\n\n/**\n * A setter and getter for the 'departAt' attribute.\n * The date and time of departure from the origin point.\n * Departure times apart from now must be specified as a dateTime.\n * When a time zone offset is not specified, it will be assumed to be that of the origin point.\n * The departAt value must be in the future. The departAt parameter cannot be used in conjunction with\n * arriveAt.\n *\n * @attribute departAt\n * @param {String} [options.departAt] The properly formatted date with the time or 'now' value. Date cannot be in the\n *     past and has to follow ISO 8601 standard.\n * @throws {TypeError} If the given argument cannot be converted to a valid value.\n */\n\n/**\n * A setter and getter for the 'arriveAt' attribute.\n * The date and time of arrival at the destination point.\n * It must be specified as a dateTime.\n * When a time zone offset is not specified it will be assumed to be that of the destination point.\n * The arriveAt value must be in the future. The arriveAt parameter cannot be used in conjunction with\n * departAt.\n *\n * @attribute arriveAt\n * @param {String} [options.arriveAt] The properly formatted date with a time value. Date cannot be in the past\n * and has to follow ISO 8601 standard.\n * @throws {TypeError} If the given argument cannot be converted to a valid value.\n */\n\n/**\n * A setter and getter for the 'travelMode' attribute.\n * The mode of travel for the requested route. Possible values: _car, truck, taxi, bus, van, motorcycle,\n * bicycle, pedestrian_. Note that the requested travelMode may not be available for the entire route. Where\n * the requested travelMode is not available for a particular section, the <travelMode> element of the\n * response for that section will be 'other'.\n *\n * @attribute travelMode\n * @param {String} [options.travelMode] The primary means of transportation to be used while routing.\n * @throws {TypeError} If the given argument cannot be converted to a valid value.\n */\n\n/**\n * A setter and getter for the 'hilliness' attribute.\n * The degree of hilliness for thrilling route. Possible values: low, normal, high.\n * This parameter can only be used in conjunction with routeType thrilling.\n *\n * @attribute hilliness\n * @param {String} [options.hilliness] The level of hilliness on a thrilling route.\n * @throws {TypeError} If the given argument cannot be converted to a valid value.\n */\n\n/**\n * A setter and getter for the 'windingness' attribute.\n * The level of turns for thrilling route. Possible values: low, normal, high.\n * This parameter can only be used in conjunction with routeType thrilling.\n *\n * @attribute windingness\n * @param {String} [options.windingness] The level of windingness on a thrilling route.\n * @throws {TypeError} If the given argument cannot be converted to a valid value.\n */\n\n/**\n * A setter and getter for the 'computeTravelTimeFor' attribute.\n * Specifies whether to return additional travel times using different types of traffic information (none,\n * historic, live) as well as the default best-estimate travel time. Possible values:\n * * none - do not compute additional travel times.\n * * all - compute travel times for all types of traffic information. Specifies all results in the fields\n * noTrafficTravelTimeInSeconds, historicTrafficTravelTimeInSeconds and\n * liveTrafficIncidentsTravelTimeInSeconds being included in the summaries in the route response.\n *\n * @attribute computeTravelTimeFor\n * @param {String} [options.computeTravelTimeFor] Setting `'all'` provides additional information regarding travel\n *     times.\n * @throws {TypeError} If the given argument cannot be converted to a valid value.\n */\n\n/**\n * A setter and getter for 'vehicleEngineType' attribute.\n * Engine type of the vehicle. This parameter is currently only considered for travelMode truck. Valid\n * options are: _combustion, electric_.\n *\n * @attribute vehicleEngineType\n * @param {String} [options.vehicleEngineType] The vehicle engine type.\n * @throws {TypeError} If the given argument cannot be converted to a valid value.\n */\n\n/**\n * A setter and getter for the 'vehicleMaxSpeed' attribute.\n * Maximum speed of the vehicle in km/hour. A value of 0 means that an appropriate value for the vehicle\n * will be determined and applied during route planning. A non-zero value may be overridden during route\n * planning. This parameter is currently only considered for travelMode truck.\n *\n * @attribute vehicleMaxSpeed\n * @param {Number} [options.vehicleMaxSpeed] The maximal allowed vehicle speed in km/h (kilometers per hour).\n * @throws {TypeError} If the given argument cannot be converted to a valid value.\n */\n\n/**\n * A setter and getter for 'vehicleWeight' attribute.\n * Weight of the vehicle in kg. A value of 0 means that weight restrictions are not considered during route\n * planning. This parameter is currently only considered for travelMode truck.\n *\n * @attribute vehicleWeight\n * @param {Number} [options.vehicleWeight] The vehicle weight in kg (kilograms).\n * @throws {TypeError} If the given argument cannot be converted to a valid value.\n */\n\n/**\n * A setter and getter for 'vehicleAxleWeight' attribute.\n * Weight per axle of the vehicle in kg. A value of 0 means that weight restrictions per axle are not\n * considered during route planning. This parameter is currently only considered for travelMode truck.\n *\n * @attribute vehicleAxleWeight\n * @param {Number} [options.vehicleAxleWeight] The vehicle axle wight in kg.\n * @throws {TypeError} If the given argument cannot be converted to a valid value.\n */\n\n/**\n * A setter and getter for the 'vehicleLength' attribute.\n * Length of the vehicle in meters. A value of 0 means that length restrictions are not considered during\n * route planning. This parameter is currently only considered for travelMode truck.\n *\n * @attribute vehicleLength\n * @param {Number} [options.vehicleLength] The vehicle length in meters.\n * @throws {TypeError} If the given argument cannot be converted to a valid value.\n */\n\n/**\n * A setter and getter for the 'vehicleWidth' attribute.\n * Width of the vehicle in meters. A value of 0 means that width restrictions are not considered during\n * route planning. This parameter is currently only considered for travelMode truck.\n *\n * @attribute vehicleWidth\n * @param {Number} [options.vehicleWidth] The vehicle width in meters.\n * @throws {TypeError} If the given argument cannot be converted to a valid value.\n */\n\n/**\n * A setter and getter for the 'vehicleHeight' attribute.\n * Height of the vehicle in meters. A value of 0 means that height restrictions are not considered\n * during route planning. This parameter is currently only considered for travelMode truck.\n *\n * @attribute vehicleHeight\n * @param {Number} [options.vehicleHeight] The vehicle height in meters.\n * @throws {TypeError} If the given argument cannot be converted to a valid value.\n */\n\n/**\n * A setter and getter for the 'vehicleCommercial' attribute.\n * Vehicle is used for commercial purposes and thus may not be allowed to drive on some roads. This\n * parameter is currently only considered for travelMode truck.\n *\n * @attribute vehicleCommercial\n * @param {Boolean} [options.vehicleCommercial] True if the vehicle is used for commercial purposes.\n * @throws {TypeError} If the given argument cannot be converted to a valid value.\n */\n\n/**\n * A setter and getter for the 'vehicleLoadType' attribute.\n * Types of cargo that may be classified as hazardous materials and restricted from some roads. Available\n * vehicleLoadType values are US Hazmat classes 1 through 9, plus generic classifications for use in other\n * countries.\n *\n * __Use these for routing in US__\n * * USHazmatClass1 Explosives\n * * USHazmatClass2 Compressed gas\n * * USHazmatClass3 Flammable liquids\n * * USHazmatClass4 Flammable solids\n * * USHazmatClass5 Oxidizers\n * * USHazmatClass6 Poisons\n * * USHazmatClass7 Radioactive\n * * USHazmatclass8 Corrosives\n * * USHazmatClass9 Miscellaneous\n *\n * __Use these for routing in all other countries__\n * * otherHazmatExplosive Explosives\n * * otherHazmatGeneral Miscellaneous\n * * otherHazmatHarmfulToWater Harmful to water\n *\n * This parameter is currently only considered for travelMode truck.\n *\n * @attribute vehicleLoadType\n * @param {Array|String} [options.vehicleLoadType] The array of truck cargo classifications.\n * @throws {TypeError} If the given argument cannot be converted to a valid value.\n */\n\nconst fieldsToSkip = ['locations', 'maxAlternatives', 'instructionsType',\n    'language', 'computeBestOrder', 'routeRepresentation', 'vehicleHeading', 'report',\n    'callback', 'minDeviationTime', 'minDeviationDistance', 'alternativeType',\n    'sectionType', 'supportingPoints', 'allowVignette', 'avoidAreas', 'batchMode',\n    'consumptionInkWhPerkmAltitudeGain', 'recuperationInkWhPerkmAltitudeLoss'\n];\n\nconst latLonFieldDescription = {\n    validators: [validateArrayOf({\n        point: {\n            validators: [validateObjectOf({\n                latitude: {\n                    validators: [validateLatitude],\n                    required: true\n                },\n                longitude: {\n                    validators: [validateLongitude],\n                    required: true\n                }\n            })]\n        }\n    })],\n    converters: [convertArrayOf({\n        point: {\n            converters: [convertObjectOf({\n                latitude: {\n                    converters: [convertLatitude],\n                    required: true\n                },\n                longitude: {\n                    converters: [convertLongitude],\n                    required: true\n                }\n            })]\n        }\n    })],\n    required: true,\n    application: parameterApplications.POST\n};\n\nexport function matrixParameters(fieldsToSkipProps) {\n    const fields = getRoutingParameters(fieldsToSkip);\n    /**\n     * A setter and getter for the 'origins' attribute.\n     * A set of origin locations represented by points (latitude/longitude object). At least one origin is required.\n     *\n     * @attribute origins\n     * @param {Array} [options.origins] A set of origin locations represented by points (latitude/longitude object).\n     * @throws {TypeError} If the given argument cannot be converted to a valid value.\n     */\n    fields.origins = latLonFieldDescription;\n\n    /**\n     * A setter and getter for the 'destinations' attribute.\n     * A set of destination locations represented by points (latitude/longitude object).\n     * At least one destination is required.\n     *\n     * @attribute destinations\n     * @param {Array} [options.destinations] A set of destination locations represented by points\n     * (latitude/longitude object).\n     * @throws {TypeError} If the given argument cannot be converted to a valid value.\n     */\n    fields.destinations = latLonFieldDescription;\n\n    /**\n     * This option lets you manually set how a matrix request should be performed. Otherwise we decide for you if you should\n     * use sync, async, or redirect mode. For a further explanation please refer to the Matrix Routing docs\n     * [here](MATRIX_ROUTING_URL).\n     *\n     * @attribute batchMode\n     * @param {String} [options.batchMode] Possible values: sync, async, redirect\n     */\n    fields.batchMode = {\n        application: parameterApplications.OTHER\n    };\n\n    /**\n     * Maximum waiting time for batch download response.\n     * This option only works with 'async' and 'redirect' batch modes. Accepts 120 or an integer between 5 and 60.\n     *\n     * @attribute waitTimeSeconds\n     * @param {Number} [options.waitTimeSeconds] Accepts 120 or an integer between 5 and 60.\n     */\n    fields.waitTimeSeconds = {\n        application: parameterApplications.QUERY,\n        validators: [validateWaitTimeSeconds]\n    };\n    const result = clone(fields);\n    if (fieldsToSkipProps instanceof Array) {\n        fieldsToSkipProps.forEach(function(field) {\n            delete result[field];\n        });\n    }\n\n    return result;\n}\n","/**\n * Matrix Routing service implementation using using the TomTom\n * [Routing API - Matrix Routing](MATRIX_ROUTING_URL).\n *\n * The Routing API Matrix Routing service allows the calculation of a matrix of route summaries for a set of routes\n * which are defined with origin and destination locations.\n *\n * For every given origin this service calculates\n * the cost of routing from that origin to every given destination. The set of origins and the set of destinations\n * can be thought of as the column and row headers of a table, and each cell in the table contains the costs of routing\n * from the origin to the destination for that cell.\n *\n * The following costs are computed for each route:\n * - Travel times\n * - Distances\n *\n * Parameters need to be passed to the constructor.\n *\n * If you want to explicitly decide which batch mode you want to use, add a property 'batchMode' with its value\n * set to one of the properties: sync, async, or redirect.\n *\n * The response is also extended with `getTrackingId()` method, which returns the `Tracking-ID`\n * associated with the request.\n *\n * For more information, please refer to the Matrix Routing documentation\n * [here](MATRIX_ROUTING_URL).\n *\n *\n * @class matrixRouting\n * @namespace Services.services\n * @module Services\n * @uses KeyMixin\n * @uses TrackingIdMixin\n * @uses CommonRoutingParameters\n * @uses AbortSignalMixin\n *\n * @constructor\n * @param {Object|Array} [options] Options to be passed to the routing call,\n *     or an array of such options objects to perform a batch request.\n * @param {Object} [additionalOptions] Additional options to be passed to the service.\n *\n * @example\n * ```js\n * var origins = [\n *   { point: { latitude: 51.63685, longitude: 19.4171 } },\n *   { point: { latitude: 51.63685, longitude: 19 } }\n * ];\n * var destinations = [\n *   { point: { latitude: 52.23498, longitude: 21.00849 } },\n *   { point: { latitude: 52.63685, longitude: 18 } }\n * ];\n * function callbackFn(routeGeoJson) {\n *   console.log(routeGeoJson);\n * }\n * tt.services.matrixRouting({\n *   key: <Your API key>,\n *   origins: origins,\n *   destinations: destinations,\n *   traffic: true\n * }).then(callbackFn);\n * ```\n */\n/* jshint nomen:false */\nimport {SERVICE_TYPES} from 'Core/serviceTypes';\nimport {matrixRoutingModel} from 'model/routing/matrixRouting';\nimport {matrixParameters} from './matrixParameters';\nimport {modelResponse} from '../../model/modelResponse';\nimport { matrixSyncRoutingEndpoint, matrixRoutingEndpoint } from '../../endpoints/endpoints';\nimport {\n    matrixFactory,\n    serviceFactory\n} from '../../core';\n\nexport function matrixRouting(options, additionalOptions) {\n    const fields = matrixParameters();\n    const maxNoOfElementsInBatchRequest = 100;\n    const matrixRequest = matrixFactory(maxNoOfElementsInBatchRequest, {\n        sync: matrixSyncRoutingEndpoint,\n        async: matrixRoutingEndpoint\n    });\n    const handleServiceCall = (data, abortSignal) => {\n        return matrixRequest(fields, data, abortSignal).then(response => modelResponse(response, matrixRoutingModel));\n    };\n\n    return serviceFactory(\n        fields,\n        SERVICE_TYPES.ROUTING,\n        'matrixRouting',\n        handleServiceCall\n    )(options, additionalOptions);\n}\n","/**\n * Provides the current traffic model ID which is the traffic model number for the viewport needed for the Traffic API -\n * Incidents Layer, and the {{#crossLink \"IncidentDetails\"}}Traffic API - Incident Details{{/crossLink}}\n * calls.\n *\n * It is updated every minute, and is valid for two minutes before it times out.\n *\n * Parameters need to be passed to the constructor.\n *\n * ### Response\n * The response is extended with `getTrackingId()` method, which returns the `Tracking-ID`\n * associated with the request.\n *\n * Please refer to {{#crossLinkModule \"Services\"}}Difference between\n * API responses and this library's responses{{/crossLinkModule}} section.\n *\n * @class incidentViewport\n * @namespace Services.services\n * @module Services\n * @uses KeyMixin\n * @uses ProtocolMixin\n * @uses TrackingIdMixin\n * @uses AbortSignalMixin\n * @constructor\n * @param {Object} [options]\n * @param {Object} [additionalOptions] Additional options to be passed to the service.\n * @example\n * ```js\n * function callbackFn(response) {\n *   console.log(response);\n * }\n * tt.services.incidentViewport({\n *   key: <Your API key>\n * }).then(callbackFn);\n * ```\n */\nimport {SERVICE_TYPES} from 'Core/serviceTypes';\nimport parameterApplications from 'common/parameterApplications';\nimport { v4 as uuid } from 'uuid';\nimport { modelResponse } from '../model/modelResponse';\nimport { incidentViewportEndpoint } from '../endpoints/endpoints';\nimport {singleRequestServiceFactory, serviceFactory } from '../core';\nimport {\n    key as validateKey, trackingId as validateTrackingId, oneOfValue as validateOneOfValue,\n    string as validateString\n} from './validators';\n\nconst fields = {\n    key: {\n        validators: [validateKey]\n    },\n    trackingId: {\n        validators: [validateTrackingId],\n        application: parameterApplications.HEADER,\n        defaultValue: uuid\n    },\n    protocol: {\n        validators: [validateOneOfValue(['http', 'https'], 'protocol')]\n    },\n    sessionId: {\n        validators: [validateString]\n    }\n};\n\nexport function incidentViewport(options, additionalOptions) {\n    const singleRequest = singleRequestServiceFactory(incidentViewportEndpoint);\n\n    function handleServiceCall(data, abortSignal) {\n        return singleRequest(fields, data, abortSignal).then(modelResponse);\n    }\n\n    return serviceFactory(\n        fields,\n        SERVICE_TYPES.TRAFFIC_INCIDENTS,\n        'incidentViewport',\n        handleServiceCall\n    )(options, additionalOptions);\n}\n","export function flowSegmentDataModel(data) {\n    const coordinates = data.flowSegmentData.coordinates.coordinate.map(coordinate => {\n        return {\n            lat: coordinate.latitude,\n            lng: coordinate.longitude\n        };\n    });\n\n    return Object.assign(data, { flowSegmentData: {...data.flowSegmentData, coordinates: {coordinate: coordinates} }});\n}\n","/**\n * The Flow Segment Data service provides information about the speeds and travel times of the road\n * fragment closest to the given coordinates.\n *\n * ### Response\n * The response is extended with `getTrackingId()` method, which returns the `Tracking-ID`\n * associated with the request.\n *\n * Please refer to {{#crossLinkModule \"Services\"}}Difference between\n * API responses and this library's responses{{/crossLinkModule}} section.\n *\n * @class trafficFlowSegmentData\n * @namespace Services.services\n * @module Services\n * @uses KeyMixin\n * @uses TrackingIdMixin\n * @uses AbortSignalMixin\n * @param {Object} options Options to be passed to the flowSegmentData call.\n * @param {Object} [additionalOptions] Additional options to be passed to the service.\n * @constructor\n */\n\nimport {SERVICE_TYPES} from 'Core/serviceTypes';\nimport {\n    numberInInterval as validateNumberInInterval, zoomLevel as validateZoomLevel, trackingId as validateTrackingId,\n    oneOfValue as validateOneOfValue, string as validateString, point as validatePoint, bool as validateBool\n} from './validators';\nimport {point as convertPoint} from './converters';\nimport {flowSegmentDataModel} from '../model/traffic/flowSegmentData';\nimport parameterApplications from '../common/parameterApplications';\nimport { modelResponse } from '../model/modelResponse';\nimport { v4 as uuid } from 'uuid';\nimport { flowSegmentDataEndpoint } from 'endpoints';\nimport { singleRequestServiceFactory, serviceFactory } from '../core';\n\nconst fields = {\n    key: {\n        validators: [validateString]\n    },\n    trackingId: {\n        validators: [validateTrackingId],\n        application: parameterApplications.HEADER,\n        defaultValue: uuid\n    },\n\n    /**\n     * @attribute zoom\n     * @param {Number} options.zoom Zoom level. This will affect traffic incident coordinates\n     * to separately present both road sides. Should be in the range from 0 to 18.\n     */\n    zoom: {\n        validators: [validateZoomLevel],\n        required: true,\n        application: parameterApplications.PATH\n    },\n\n    /**\n     * @attribute style\n     * @param {String} options.style The type of flow data to be displayed on the tile. Available options: absolute,\n     * relative, and relative-delay.\n     */\n    style: {\n        validators: [validateOneOfValue([\n            'absolute',\n            'relative',\n            'relative-delay',\n            'relative0',\n            'relative0-dark',\n            'reduced-sensitivity'\n        ], 'traffic flow style')],\n        required: true,\n        application: parameterApplications.PATH\n    },\n\n    /**\n     * @attribute point\n     * @param {String} options.point Coordinates of the point close to the road segment.\n     * They have to be comma-separated and calculated using the EPSG4326 projection.\n     */\n    point: {\n        converters: [convertPoint],\n        validators: [validatePoint],\n        required: true\n    },\n\n    /**\n     * @attribute unit\n     * @param {String} [options.unit] Unit of speed. Avilable values: KMPH and MPH.\n     */\n    unit: {\n        validators: [validateOneOfValue(['KMPH', 'MPH'])]\n    },\n\n    /**\n     * @attribute thickness\n     * @param {Number} [options.thickness] The segment width multiplier. Value should be in the range from 1 to 20.\n     */\n    thickness: {\n        validators: [validateNumberInInterval(1, 20)]\n    },\n\n    /**\n     * @attribute openLr\n     * @param {Boolean} [options.openLr] Specifies if the Response includes OpenLR code.\n     */\n    openLr: {\n        validators: [validateBool]\n    }\n};\n\nexport function trafficFlowSegmentData(options, additionalOptions) {\n    const singleRequest = singleRequestServiceFactory(flowSegmentDataEndpoint);\n\n    const handleServiceCall = (data, abortSignal) => {\n        return singleRequest(fields, data, abortSignal).then(response => modelResponse(response, flowSegmentDataModel));\n    };\n    return serviceFactory(\n        fields,\n        SERVICE_TYPES.TRAFFIC_FLOW,\n        'trafficFlowSegmentData',\n        handleServiceCall\n    )(options, additionalOptions);\n}\n","function defaultComparator(first, second) {\n    return first === second;\n}\n\nexport default (firstArray, secondArray, comparator) => {\n    if (!comparator) {\n        comparator = defaultComparator;\n    }\n\n    const result = firstArray.concat(secondArray);\n    for (let i = 0; i < firstArray.length; i += 1) {\n        for (let j = firstArray.length; j < result.length; j += 1) {\n            if (comparator(result[i], result[j])) {\n                result.splice(j, 1);\n                j -= 1;\n            }\n        }\n    }\n    return result;\n};\n\n","/* eslint-disable object-curly-spacing */\n/* eslint-disable no-undef */\nimport arrayMerge from '../../utils/arrayMerge';\nimport {PointFacade} from '../pointFacade';\nimport { setProperty, newFeature, newFeatureCollection } from '../modelUtils';\nimport isNil from 'lodash/isNil';\nimport flatten from 'lodash/flatten';\n\nconst pointFacade = new PointFacade();\n\nconst incidentCategories = {\n    0: 'Unknown',\n    1: 'Accident',\n    2: 'Fog',\n    3: 'Dangerous Conditions',\n    4: 'Rain',\n    5: 'Ice',\n    6: 'Jam',\n    7: 'Lane Closed',\n    8: 'Road Closed',\n    9: 'Road Works',\n    10: 'Wind',\n    11: 'Flooding',\n    12: 'Detour',\n    13: 'Cluster',\n    14: 'Broken down vehicle'\n};\n\nconst incidentSeverities = {0: 'unknown', 1: 'minor', 2: 'moderate', 3: 'major', 4: 'undefined'};\n\nconst getFeatures = (poi, preserveCluster) => {\n    const features = [];\n    const properties = {};\n    properties.id = poi.id;\n    if (!isNil(poi.cbl) && !isNil(poi.ctr)) {\n        properties.clusterBounds = [[poi.cbl.lng, poi.cbl.lat], [poi.ctr.lng, poi.ctr.lat]];\n    }\n    if (!isNil(poi.op)) {\n        properties.originalPosition = [poi.op.lng, poi.op.lat];\n    }\n    if (!isNil(poi.ic)) {\n        properties.incidentCategory = incidentCategories[poi.ic];\n    }\n    if (!isNil(poi.ty)) {\n        properties.incidentSeverity = incidentSeverities[poi.ty];\n    }\n    if (!isNil(poi.v)) {\n        properties.vectorGeometry = poi.v;\n    }\n    setProperty(properties, 'clusterSize', poi.cs);\n    setProperty(properties, 'description', poi.d);\n    setProperty(properties, 'incidentCause', poi.c);\n    setProperty(properties, 'from', poi.f);\n    setProperty(properties, 'to', poi.t);\n    setProperty(properties, 'roadNumber', poi.r);\n    setProperty(properties, 'delaySeconds', poi.dl);\n    setProperty(properties, 'lengthMeters', poi.l);\n    setProperty(properties, 'endDate', poi.ed);\n\n    if (poi.cpoi && !preserveCluster) {\n        features.push(...flatten(poi.cpoi.map(poi => getFeatures(poi, false))));\n    } else {\n        if (poi.cpoi) {\n            properties.features = flatten(poi.cpoi.map(poi => getFeatures(poi, true)));\n        }\n        const feature = newFeature(properties, 'Point');\n        feature.geometry.coordinates = [poi.p.lng, poi.p.lat];\n        features.push(feature);\n    }\n    return features;\n};\n\nexport const toGeoJson = (data, preserveCluster) => {\n    const result = newFeatureCollection(),\n        json = data[0] || data;\n    if (!json || !json.tm || !json.tm.poi) {\n        return result;\n    }\n    if (data.length > 1) {\n        // this is edge of the world case\n        json.tm.poi = arrayMerge(data[0].tm.poi, data[1].tm.poi, function(first, second) {\n            return first.id === second.id;\n        });\n    }\n    for (let i = 0; i < json.tm.poi.length; i += 1) {\n        result.features.push(...getFeatures(json.tm.poi[i], preserveCluster));\n    }\n    return result;\n};\n\nconst convertPoints = data => {\n    const convertResult = incidents => {\n        if (!incidents || !incidents.tm || !incidents.tm.poi) {\n            return incidents;\n        }\n\n        incidents.tm.poi.forEach(poi => {\n            if (poi.cbl) {\n                poi.cbl = pointFacade.convert(poi.cbl);\n            }\n            if (poi.ctr) {\n                poi.ctr = pointFacade.convert(poi.ctr);\n            }\n            if (poi.p) {\n                poi.p = pointFacade.convert(poi.p);\n            }\n            if (poi.cpoi && Array.isArray(poi.cpoi)) {\n                poi.cpoi.forEach(cpoi => {\n                    cpoi.p = pointFacade.convert(cpoi.p);\n                });\n            }\n            if (poi.op) {\n                poi.op = pointFacade.convert(poi.op);\n            }\n        });\n        return incidents;\n    };\n\n    if (Array.isArray(data)) {\n        return data.map(convertResult);\n    }\n    return convertResult(data);\n};\n\nexport function incidentDetailsModel(preserveCluster) {\n    return (data) => {\n        data = convertPoints(data);\n        return Object.assign(data, {\n            toGeoJson: () => toGeoJson(data, preserveCluster)\n        });\n    };\n}\n","/* eslint-disable max-len */\n/**\n * ### New version {{#crossLink \"Services.services.incidentDetailsV5\"}}incidentDetailsV5{{/crossLink}}\n * The new {{#crossLink \"Services.services.incidentDetailsV5\"}}incidentDetailsV5{{/crossLink}} method was introduced.\n * We highly recommend using the new V5 version.\n *\n * ### Old version\n * * __The incidentDetails service has been deprecated.__\n * * This service will be withdrawn following a 12 months deprecation period.\n * * The planned withdrawal period is April of 2022.\n * * Following withdrawal, requests to this service may receive an HTTP 404 error in response.\n *\n * Provides current traffic incidents in a given region, on a given zoom level with a given style using the TomTom\n * [Traffic API - Traffic Incidents Details](TRAFFIC_INCIDENT_DETAILS_V4_URL)\n *\n * The current road situation is updated every minute. Please use the\n * {{#crossLink \"IncidentViewport\"}}{{/crossLink}} service in conjunction with your request to get traffic\n * incidents aligned with other services.\n *\n * Parameters need to be passed to the constructor.\n *\n * ### Response\n * This service extends API response by providing `toGeoJson()` method, which converts incidents data into\n * FeatureCollection with <a target=\"_blank\" rel=noopener href=\"https://tools.ietf.org/html/rfc7946#section-3.1.2\">Point</a> geometry.\n *\n * Each point feature represents `poi` from the original response. Properties of `poi` are mapped into feature properties\n *\n *  We convert original properties from the API response to more readable format:\n * * `cbl` - `clusterBounds`\n * * `ic` - `incidentCategory`\n * * `ty` - `incidentSeverity`\n * * `cs` - `clusterSize`\n * * `d` - `description`\n * * `c` - `incidentCause`\n * * `f` - `from`\n * * `t` - `to`\n * * `r` - `roadNumber`\n * * `dl` - `delaySeconds`\n * * `l` - `lengthMeters`\n * * `v` - `vectorGeometry`\n * * `ed` - `endDate`\n *\n * Please refer directly to [Traffic API - Traffic Incidents Details](TRAFFIC_INCIDENT_DETAILS_V5_URL) too see exactly what they mean.\n *\n * Additionally, the response is extended with `getTrackingId()` method, which returns the `Tracking-ID`\n * associated with the request.\n *\n * To read more about services responses take a look at {{#crossLinkModule \"Services\"}}Difference between\n * API responses and this library's responses{{/crossLinkModule}} section.\n *\n * @class incidentDetails\n * @namespace Services.services\n * @module Services\n * @uses KeyMixin\n * @uses BoundingBoxMixin\n * @uses ProtocolMixin\n * @uses TrackingIdMixin\n * @uses AbortSignalMixin\n * @constructor\n * @param {Object} [options]\n * @param {Object} [additionalOptions] Additional options to be passed to the service.\n *\n * @example\n * ```javascript\n * function callbackFn(response) {\n *   console.log(response.toGeoJson());\n * }\n * tt.services.incidentDetails({\n *   key: '<Your API key>',\n *   boundingBox: '0,0,1,1',\n *   style: 's1',\n *   zoomLevel: 12\n * }).then(callbackFn);\n * ```\n */\n/* eslint-enable max-len */\n/* jshint nomen:false */\nimport {SERVICE_TYPES} from 'Core/serviceTypes';\nimport { incidentDetailsModel } from 'model/traffic/incidentDetails';\nimport {\n    bool as validateBool, string as validateString, key as validateKey, trackingId as validateTrackingId,\n    zoomLevel as validateZoomLevel, validateBoundingBox, oneOfValue as validateOneOfValue,\n    incidentDetailsLanguage as validateIncidentDetailsLanguage\n} from './validators';\nimport {\n    convertBoundingBox, incidentDetailsLanguage as convertIncidentDetailsLanguage\n} from './converters';\nimport parameterApplications from '../common/parameterApplications';\nimport constants from '../../core/constants';\nimport { modelResponse } from '../model/modelResponse';\nimport { v4 as uuid } from 'uuid';\nimport { incidentDetailsEndpoint } from 'endpoints';\nimport { singleRequestServiceFactory, serviceFactory } from '../core';\n\nconst fields = {\n    key: {\n        validators: [validateKey]\n    },\n    trackingId: {\n        validators: [validateTrackingId],\n        application: parameterApplications.HEADER,\n        defaultValue: uuid\n    },\n\n    /**\n     * The zoom level of a currently displayed map.\n     * It is needed as the style (visibility, clustering, etc...) depends on the current zoom level.\n     * @attribute zoomLevel\n     * @param {Number} options.zoomLevel Zoom level from `0` to `22`\n     */\n    zoomLevel: {\n        validators: [validateZoomLevel],\n        required: true,\n        application: parameterApplications.PATH,\n        name: 'zoom'\n    },\n\n    boundingBox: {\n        converters: [convertBoundingBox],\n        validators: [validateBoundingBox],\n        required: true,\n        application: parameterApplications.PATH,\n        cast: (boundingBox, requestOptions) => {\n            requestOptions.minLon = boundingBox.minLon;\n            requestOptions.maxLon = boundingBox.maxLon;\n            requestOptions.minLat = boundingBox.minLat;\n            requestOptions.maxLat = boundingBox.maxLat;\n        }\n    },\n\n    /**\n     * The style that will be used to render the\n     * traffic tile in the Maps API. This will have an effect on the coordinates of traffic incidents in the\n     * reply.\n     *\n     * @attribute style\n     * @param {String} options.style Style name, needs to be one of _'s1', 's2', 's3', 'night'_. This needs to match\n     *     the style of your raster traffic tiles to match traffic tubes with traffic icons.\n     */\n    style: {\n        validators: [validateOneOfValue(['s0', 's0-dark', 's1', 's2', 's3', 'night'], 'traffic style')],\n        required: true,\n        application: parameterApplications.PATH\n    },\n\n    /**\n     * The ISO 639-1 code for the output language.\n     *\n     * * Affects the `incidentCause` and `description` fields in the response.\n     * * When an invalid language code is provided the response is returned in English.\n     * * When an incident cause or description does not have a translation, an English description is returned.\n     * @attribute language\n     * @param {String} [options.language=null] Language code that decides in which language the results\n     * should be returned.\n     */\n    language: {\n        converters: [convertIncidentDetailsLanguage],\n        validators: [validateIncidentDetailsLanguage]\n    },\n\n    /**\n     * Number referencing the traffic model to use.\n     * This can be obtained from the {{#crossLink \"IncidentViewport\"}}{{/crossLink}} service.\n     *\n     * It is updated every minute, and is valid for two minutes before it times out.\n     *\n     * If a wrong Traffic Model ID is specified, the correct one will be returned by the interface.\n     *\n     * The default value of `-1` will always invoke the most recent traffic model. Nevertheless, it is\n     * good practice to use the value obtained from the service as this will guarantee an alignment\n     * with the raster traffic layer.\n     *\n     * @attribute trafficModelID\n     * @param {Number} [options.trafficModelID] A valid, not older than two minutes, traffic model ID.\n     */\n    trafficModelID: {\n        validators: [validateString],\n        defaultValue: constants.VIEWPORT_DEFAULT_VALUE,\n        application: parameterApplications.PATH\n    },\n\n    /**\n     * If passed, additional field `poi.v` is added to the response\n     * and `properties.vectorGeometry` is added to the return value of _toGeoJson()_ method.\n     * Two values are allowed:\n     * * `original` places incidents precisely on the road.\n     * * `shifted` moves the incident slightly (depending on the zoom level) to indicate specific road lanes.\n     *\n     * Returned vector geometry is encoded using\n     * <a href=\"https://developers.google.com/maps/documentation/utilities/polylinealgorithm\">Encoded Polyline\n     * Algorithm Format</a>.\n     *\n     * @attribute geometries\n     * @param {String} [options.geometries] The type of vector geometry added to incidents.\n     */\n    geometries: {\n        validators: [validateOneOfValue(['shifted', 'original'], 'traffic geometries')]\n    },\n\n    /**\n     * Tells the service to separately list all traffic incidents in a cluster.\n     *\n     * When is enabled the clusters in the response will be represented as geometry collections,\n     * and the cluster coordinates will appear as clusterCoordinates parameters.\n     *\n     * Enabling this feature is useful when the user wants to obtain details of the incidents\n     * that are being clustered, or wants to perform a client-side clustering.\n     *\n     * Note that when this is set to _false_, the _toGeoJson()_ method available\n     * in the resolved response will return only unclustered POIs, but **no clusters**.\n     *\n     * @attribute expandCluster\n     * @param {Boolean} [options.expandCluster=false] Determines if the service should include details of incidents\n     * that are clustered.\n     */\n    expandCluster: {\n        validators: [validateBool],\n        defaultValue: false\n    },\n\n    /**\n     * If this is set to true, the _toGeoJson()_ method available\n     * in the resolved response will return features with an additional `properties.features`\n     * field containing clustered features.\n     *\n     * Note that this option only works in conjunction with `expandCluster` set to `true`.\n     *\n     * @attribute preserveCluster\n     * @param {Boolean} [options.preserveCluster=false] Determines if clustered incidents data\n     * should be available in the cluster feature.\n     */\n    preserveCluster: {\n        validators: [validateBool],\n        defaultValue: false\n    },\n\n    /**\n     * Return the original position of the incident (`originalPosition` attribute) as well as the one\n     * shifted to the beginning of the traffic tube.\n     *\n     * @attribute originalPosition\n     * @param {Boolean} [options.originalPosition=false] Determines if the service\n     * should include the original incidents' position.\n     */\n    originalPosition: {\n        validators: [validateBool],\n        defaultValue: false\n    },\n\n    protocol: {\n        validators: [validateOneOfValue(['http', 'https'], 'protocol')]\n    },\n\n    projection: {\n        defaultValue: 'EPSG4326'\n    }\n};\n\nexport function incidentDetails(options, additionalOptions) {\n    const singleRequest = singleRequestServiceFactory(incidentDetailsEndpoint);\n\n    function handleServiceCall(requestOptions, abortSignal) {\n        const model = incidentDetailsModel(requestOptions.preserveCluster);\n\n        return singleRequest(fields, requestOptions, abortSignal)\n            .then(response => modelResponse(response, model));\n    }\n\n    return serviceFactory(\n        fields,\n        SERVICE_TYPES.TRAFFIC_INCIDENTS,\n        'incidentDetails',\n        handleServiceCall\n    )(options, additionalOptions);\n}\n","export default {\n    VIEWPORT_DEFAULT_VALUE: '-1'\n};\n","/* eslint-disable max-len */\n/**\n * Provides detailed information about traffic incidents in the requested area\n * using the TomTom [Traffic API - Traffic Incidents Details](TRAFFIC_INCIDENT_DETAILS_URL).\n * This is a new version of the {{#crossLink \"Services.services.incidentDetails\"}}incidentDetails{{/crossLink}}\n * method with simpler options and a more readable response object.\n *\n * The current road situation is updated every minute.\n *\n * ### Response\n *\n * The fields that appear in the response depend on the value of the `fields` request parameter.\n *\n * The response is extended with `getTrackingId()` method, which returns the `Tracking-ID`\n * associated with the request.\n *\n * @class incidentDetailsV5\n * @namespace Services.services\n * @module Services\n * @uses KeyMixin\n * @uses TrackingIdMixin\n * @uses ProtocolMixin\n * @uses AbortSignalMixin\n * @constructor\n * @param {Object} options Options object.\n * @param {Object} [additionalOptions] Additional options to be passed to the service.\n *\n * @example\n * ```javascript\n * tt.services.incidentDetailsV5({\n *   key: '<Your API key>',\n *   boundingBox: '4.8854592519716675,52.36934334773164,4.897883244144765,52.37496348620152'\n * }).then(function(response) {\n *   console.log(response);\n * });\n * ```\n */\n\nimport {\n    validateBoundingBox,\n    string as validateString,\n    validIncidentDetailsFields,\n    languageCode as validateLanguageCode,\n    key as validateKey,\n    trackingId as validateTrackingId\n} from './validators';\nimport {\n    removeWhitespaces,\n    convertBoundingBox,\n    incidentDetailsV5Language as convertIncidentDetailsV5Language\n} from './converters';\nimport { singleRequestServiceFactory, serviceFactory } from '../core';\nimport { v4 as uuid } from 'uuid';\nimport parameterApplications from '../common/parameterApplications';\nimport { SERVICE_TYPES } from 'Core/serviceTypes';\nimport { incidentDetailsV5Endpoint as incidentDetailsEndpoint } from 'endpoints';\nimport { modelResponse } from '../model/modelResponse';\n\nconst fields = {\n    key: {\n        validators: [validateKey]\n    },\n    trackingId: {\n        validators: [validateTrackingId],\n        application: parameterApplications.HEADER,\n        defaultValue: uuid\n    },\n\n    /**\n     * The bounding box is a limited area within the search results.\n     * Maximum area of bounding box is 10000km2.</br>\n     *\n     * This option is able to convert a number of popular formats into the bounding box.\n     * The supported formats are listed below:\n     *  -  {{#crossLink \"Maps.LngLatBounds\"}}{{/crossLink}} class instance\n     *  - `{minLon: 0, minLat: 0, maxLon: 1, maxLat: 1}` A plain object with the keys minLon, minLat, maxLon, maxLat.\n     *  - `[0, 0, 1, 1]` An array of numbers describing the bounding box following the order: minLon, minLat,\n     *     maxLon, maxLat.\n     *  - `[[0, 0], [1, 1]]` A two-dimensional array with two indexes [southWest, northEast], each one with\n     *     longitude and latitude values.\n     *  - `\"0,0,1,1\"` A comma-separated string with numbers in the order: minLon, minLat, maxLon, maxLat.\n     *  - `[{lon: 0, lat: 0},{lon: 1, lat: 1}]` A one-dimensional array with two objects in the order: southWest,\n     *     northEast, and each object with a `lat` and `lon` key.\n     *  - `[{lng: 0, lat: 0},{lng: 1, lat: 1}]` A one-dimensional array with two objects in the order: southWest,\n     *     northEast and each object with a `lat` and `lon` key.\n     *  - `[{{#crossLink \"Maps.LngLat\"}}{{/crossLink}}, {{#crossLink \"Maps.LngLat\"}}{{/crossLink}}]`\n     *      A one-dimensional array with two {{#crossLink \"Maps.LngLat\"}}{{/crossLink}}\n     *      instances in the order: southWest and northEast.\n     * @attribute boundingBox\n     * @param {Maps.LngLatBounds|Number[]|Object[]|String} options.boundingBox Bounding box area in one of the supported formats.\n     */\n    boundingBox: {\n        required: true,\n        validators: [validateBoundingBox],\n        converters: [convertBoundingBox],\n        cast: (boundingBox, requestOptions) => {\n            requestOptions.bbox = `${boundingBox.minLon},${boundingBox.minLat},${boundingBox.maxLon},${boundingBox.maxLat}`;\n        }\n    },\n\n    /**\n     * The fields to be included in the response, nested as in the response schema.\n     * In order to obtain all data, it is necessary to place the whole object in the query.\n     *\n     * ```javascript\n     * `{\n     *   incidents {\n     *     type,\n     *     geometry {\n     *       type,\n     *       coordinates\n     *     },\n     *     properties {\n     *       id,\n     *       iconCategory,\n     *       magnitudeOfDelay,\n     *       events {\n     *         description,\n     *         code,\n     *         iconCategory\n     *       },\n     *       startTime,\n     *       endTime,\n     *       from,\n     *       to,\n     *       length,\n     *       delay,\n     *       roadNumbers,\n     *       aci {\n     *         probabilityOfOccurrence\n     *         numberOfReports\n     *         lastReportTime\n     *       }\n     *     }\n     *   }\n     * }`\n     * ```\n     * @attribute fields\n     * @param {String} [options.fields='{ incidents { type, geometry { type, coordinates }, properties { iconCategory } } }']\n     */\n    fields: {\n        validators: [validateString, validIncidentDetailsFields],\n        converters: [removeWhitespaces]\n    },\n\n    /**\n     * The Traffic Model ID is the reference value for the state of traffic at a particular time.\n     * It is updated every minute, and is valid for two minutes before it times out.\n     * If not provided the current traffic model ID is used.\n     *\n     * @attribute t\n     * @param {String} [options.t] A valid, not older than two minutes, traffic model ID.\n     */\n    t: {\n        validators: [validateString]\n    },\n\n    /**\n     * The ISO 639-1 code for the output language.\n     *\n     * * Affects the `description` field in the response.\n     * * When an invalid language code is provided the response is returned in English.\n     * * When an incident description does not have a translation, an English description is returned.\n     * @attribute language\n     * @param {String} [options.language='en-GB'] Language code that decides in which language the results\n     * should be returned.\n     */\n    language: {\n        validators: [validateLanguageCode],\n        converters: [convertIncidentDetailsV5Language]\n    }\n};\n\nexport function incidentDetailsV5(options, additionalOptions) {\n    const singleRequest = singleRequestServiceFactory(incidentDetailsEndpoint);\n    function handleServiceCall(requestOptions, abortSignal) {\n        return singleRequest(fields, requestOptions, abortSignal).then(modelResponse);\n    }\n\n    return serviceFactory(\n        fields,\n        SERVICE_TYPES.TRAFFIC_INCIDENTS,\n        'incidentDetailsV5',\n        handleServiceCall\n    )(options, additionalOptions);\n}\n","/**\n * This Class makes it easy to generate a URL string to request a static map image using the TomTom\n * [Maps API - Static Image](MAPS_RASTER_STATIC_IMAGE_URL).\n *\n * Parameters need to be passed to the method, which generates the URL string.\n *\n * @example\n * ```js\n * // Passing an object with all the configuration\n * function callbackFn(urlString) {\n *   console.log(urlString);\n * }\n * tt.services.staticImage({\n*   key: <Your API key>,\n*   zoom: 15,\n *   bbox: [\n *     [40.712, -74.227],\n *     [40.774, -74.125]\n *   ]\n * }).then(callbackFn);\n * ```\n *\n * @class staticImage\n * @namespace Services.services\n * @uses KeyMixin\n * @uses ViewMixin\n * @module Services\n * @constructor\n * @param {Object} [options] Options to be passed to the routing call,\n *     or an array of such options objects to perform a batch request.\n */\nimport { isValidNumber } from 'services/utils';\nimport { staticMapImageEndpoint } from 'endpoints';\nimport {SERVICE_TYPES} from 'Core/serviceTypes';\nimport {\n    key as validateKey, validateBoundingBox, oneOfValue as validateOneOfValue,\n    point as validatePoint, integerInInterval as validateIntegerInInterval, mapsLanguage as validateMapsLanguage\n} from 'services/validators';\nimport {integer as convertInteger, point as convertPoint, convertBoundingBox} from 'services/converters';\nimport { serviceFactory } from '../../core';\n\n/**\n * @ignore\n * Static Map API endpoint.\n */\nconst baseUrl = staticMapImageEndpoint;\nconst MAX_WIDTH = 8192;\nconst MAX_HEIGHT = 8192;\nconst SUPPORTED_IMAGE_FORMATS_PER_LAYER = {\n    'basic': ['jpg', 'jpeg', 'png'],\n    'hybrid': ['png'],\n    'labels': ['png']\n};\n\nconst fields = {\n    /**\n     * @attribute layer\n     * @param {\"basic\"|\"hybrid\"|\"labels\"} [options.layer=\"basic\"] The base map's layer to be used.\n     */\n    layer: {\n        validators: [validateOneOfValue(['basic', 'hybrid', 'labels'], 'layers')],\n        defaultValue: 'basic'\n    },\n\n    /**\n     * @attribute style\n     * @param {\"main\"|\"night\"} [options.style=\"main\"] The base map style to be used.\n     */\n    style: {\n        validators: [validateOneOfValue(['main', 'night'], 'styles')],\n        defaultValue: 'main'\n    },\n\n    /**\n     * @attribute format\n     * @param {\"png\"|\"jpg\"|\"jpeg\"} [options.format=\"png\"] The format of the image to be requested.\n     */\n    format: {\n        validators: [validateOneOfValue(['png', 'jpg', 'jpeg'], 'formats')],\n        defaultValue: 'png'\n    },\n\n    key: {\n        validators: [validateKey]\n    },\n\n    /**\n     * @attribute zoom\n     * @param {Number} [options.zoom=12] Positive integer between 0 and 22.\n     */\n    zoom: {\n        validators: [validateIntegerInInterval(0, 23)],\n        converters: [convertInteger]\n    },\n\n    /**\n     * @attribute center\n     * @param {Maps.LngLat} [options.center] Coordinates to the center of the view.\n     */\n    center: {\n        converters: [convertPoint],\n        validators: [validatePoint]\n    },\n\n    /**\n     * @attribute width\n     * @param {Number} [options.width] Width of the image in pixels.\n     */\n    width: {\n        validators: [validateIntegerInInterval(1, MAX_WIDTH)]\n    },\n\n    /**\n     * @attribute height\n     * @param {Number} [options.height] Height of the image in pixels.\n     */\n    height: {\n        validators: [validateIntegerInInterval(1, MAX_HEIGHT)]\n    },\n\n    /**\n     * @attribute bbox\n     * @param {Maps.LngLatBounds} [options.bbox] Bounding box.\n     */\n    bbox: {\n        validators: [validateBoundingBox],\n        converters: [convertBoundingBox]\n    },\n\n    view: {\n        validators: [validateOneOfValue(\n            ['Unified', 'IL', 'IN', 'MA', 'PK', 'AR', 'Arabic', 'TR', 'RU', 'CN'],\n            'view')]\n    },\n\n    /* eslint-disable max-len */\n    /**\n     * You can find the list of supported languages [here](MAPS_VECTOR_TILE_SUPPORTED_LANGS_URL).\n     * @attribute language\n     * @param {String} [options.language=\"NGT\"] Language to use for the labels.\n     *\n     */\n    /* eslint-disable max-len */\n    language: {\n        validators: [validateMapsLanguage]\n    }\n};\n\n/**\n * @ignore\n * Validate a combination of properties. Done here because chain.js does not support such behaviour.\n * @throws Error\n * @param {Object} data\n */\nfunction validateCombineProperties(data) {\n\n    // Executing additional more complex validations\n    if (!SUPPORTED_IMAGE_FORMATS_PER_LAYER[data.layer] ||\n        SUPPORTED_IMAGE_FORMATS_PER_LAYER[data.layer].indexOf(data.format) === -1) {\n        throw new Error('Unsupported layer. Please change to PNG or use basic layer.');\n    }\n\n    if (data.bbox && data.center) {\n        // If both are used - service will return a HTTP 400 response.\n        throw new Error('The bbox and center properties cannot be used together');\n    }\n\n    if (!data.bbox && !data.center) {\n        throw new Error('Either bbox or center property must be provided');\n    }\n\n    if (data.bbox && (isValidNumber(data.width) || isValidNumber(data.height))) {\n        // If both are used - service will return a HTTP 400 response.\n        throw new Error('The bbox, width and height properties cannot be used together');\n    }\n}\n\nfunction convertBBoxToString(bbox) {\n    return bbox.minLon + ',' + bbox.minLat + ',' + bbox.maxLon + ',' + bbox.maxLat;\n}\n\nfunction serializeToStringIfNecessary(propertyName, propertyValue) {\n    if (propertyName === 'bbox') {\n        propertyValue = convertBBoxToString(propertyValue);\n    } else if (propertyName === 'zoom') {\n        return String(parseInt(propertyValue, 10));\n    } else if (propertyName === 'center') {\n        const splitCenter = propertyValue.split(',');\n        const lngLatCenter = [parseFloat(splitCenter[1]), parseFloat(splitCenter[0])];\n        return lngLatCenter[0] + ',' + lngLatCenter[1];\n    }\n    return propertyValue;\n}\n\n/**\n * @ignore\n * Build the URL string using the available configuration.\n * @param {Object} data\n * @return {String}\n */\nfunction toUrl(data) {\n    const querySegments = Object.keys(fields).reduce(function(segments, propertyName) {\n        let propertyValue = data[propertyName];\n        if (propertyValue !== undefined) {\n            propertyValue = serializeToStringIfNecessary(propertyName, propertyValue);\n            segments.push(propertyName + '=' + encodeURI(propertyValue));\n        }\n        return segments;\n    }, []);\n    return baseUrl + '?' + querySegments.join('&');\n}\n\nexport function staticImage(options, additionalOptions) {\n    function handleServiceCall(data) {\n        validateCombineProperties(data);\n        return toUrl(data);\n    }\n    return serviceFactory(\n        fields,\n        SERVICE_TYPES.MAP,\n        'staticImage',\n        handleServiceCall\n    )(options, additionalOptions);\n}\n","/**\n * ### New version {{#crossLink \"Services.services.copyrightsV2\"}}copyrightsV2{{/crossLink}}\n * The new {{#crossLink \"Services.services.copyrightsV2\"}}copyrightsV2{{/crossLink}} service was introduced.\n * We highly recommend using the new V2 version.\n *\n * * ### Old version\n * * __The copyrights service has been deprecated.__\n * * This service will be withdrawn following a 12 months deprecation period.\n * * The planned withdrawal period is June of 2022.\n * * Following withdrawal, requests to this service may receive an HTTP 404 error in response.\n *\n * The Copyrights service implementation provides a full copyrights notice in a HTML format that can be displayed to\n * the user when the copyrights link is clicked.\n *\n * The Copyrights API can take as an argument an area which concerns the copyrights. If this argument is omitted\n * the whole world is considered.\n *\n * The API handles the \"edge of the world\" issue. It allows the proper handling of bounding box that is outside of world\n * extents (-180, -90, 180, 90).\n *\n * Parameters need to be passed to the constructor.\n *\n * ### Response\n * The final response from the service is a HTML string with the copyrights information that have to\n * be displayed.\n * The whole respose is wrapped into a `div` element with the id `copyrightMessage`. Country names are\n * enclosed within `h4` elements and the copyrights information per each supplier is enclosed in `p`\n * elements. This makes styling with CSS fairly easy. An example response may look like this:\n *```html\n * <div id=\"copyrightMessage\"><h4>General Copyrights:</h4>\n *   <p> 1992  2018 TomTom. All rights reserved. This\n *   material is proprietary and the subject of\n *   copyrights protection, database right protection\n *   and other intellectual property rights owned\n *   by TomTom or its suppliers. The use of\n *   this material is subject to the terms of a license\n *   agreement. Any unauthorized copying or disclosure\n *   of this material will lead to criminal and civil\n *   liabilities.</p>\n *   <p>Data Source  2018 TomTom</p>\n * </div>\n * ```\n *\n * The response is also extended by `getTrackingId()` method, which returns the `Tracking-ID`\n * associated with the request.\n *\n * @example\n * ```js\n * //a bounding box copyrights call\n * tt.services.copyrights({\n *   key: <Your API key>,\n *   boundingBox: '0, 0, 1, 1'\n * }).then(function(response) {\n *     console.log(response);\n *   });\n *\n * //a tile-level copyrights call\n * tt.services.copyrights({\n *   key: <Your API key>,\n *   zoom: 1,\n *   x: 1,\n *   y: 1\n * }).then(function(response) {\n *     console.log(response);\n *   });\n * ```\n *\n * @class copyrights\n * @namespace Services.services\n * @module Services\n * @constructor\n * @uses KeyMixin\n * @uses TrackingIdMixin\n * @uses BoundingBoxMixin\n * @uses ProtocolMixin\n * @uses ZoomMixin\n * @uses XMixin\n * @uses YMixin\n * @uses AbortSignalMixin\n *\n * @param {Object} [options] Options to be passed to the call\n * @param {Object} [additionalOptions] Additional options to be passed to the service.\n *\n */\n\nimport {SERVICE_TYPES} from 'Core/serviceTypes';\nimport copyrightsParameters from 'services/copyrights/copyrightsParameters';\nimport { modelResponse } from '../../model/modelResponse';\nimport {\n    copyrightsWorldEndpoint,\n    copyrightsBoundsEndpoint,\n    copyrightsZoomEndpoint\n} from 'endpoints';\nimport { singleRequestServiceFactory, serviceFactory } from '../../core';\n\nconst fields = copyrightsParameters.create();\n\nexport function copyrights(options, additionalOptions) {\n    const copyrightsBounds = singleRequestServiceFactory(copyrightsBoundsEndpoint);\n    const copyrightsZoom = singleRequestServiceFactory(copyrightsZoomEndpoint);\n    const copyrightsWorld = singleRequestServiceFactory(copyrightsWorldEndpoint);\n\n    function copyrightsQuery(fields, options, abortSignal) {\n        if (options.boundingBox) {\n            return copyrightsBounds(fields, options, abortSignal);\n        } else if (options.zoom) {\n            return copyrightsZoom(fields, options, abortSignal);\n        } else {\n            return copyrightsWorld(fields, options, abortSignal);\n        }\n    }\n\n    function handleServiceCall(requestOptions, abortSignal) {\n        return copyrightsQuery(fields, requestOptions, abortSignal).then(modelResponse);\n    }\n    return serviceFactory(\n        fields,\n        SERVICE_TYPES.MAP,\n        'copyrights',\n        handleServiceCall\n    )(options, additionalOptions);\n}\n","import {\n    string as validateString, trackingId as validateTrackingId, zoomLevel as validateZoomLevel,\n    validateBoundingBox, oneOfValue as validateOneOfValue, integer as validateInteger\n} from '../validators';\n\nimport {convertBoundingBox, integer as convertInteger} from '../converters';\nimport parameterApplications from '../../common/parameterApplications';\nimport { v4 as uuid } from 'uuid';\n\nexport default {\n    create: () => {\n        return {\n            key: {\n                validators: [validateString]\n            },\n            trackingId: {\n                validators: [validateTrackingId],\n                application: parameterApplications.HEADER,\n                defaultValue: uuid\n            },\n            boundingBox: {\n                validators: [validateBoundingBox],\n                converters: [convertBoundingBox],\n                application: parameterApplications.PATH,\n                cast: (boundingBox, requestOptions) => {\n                    requestOptions.minLon = boundingBox.minLon;\n                    requestOptions.maxLon = boundingBox.maxLon;\n                    requestOptions.minLat = boundingBox.minLat;\n                    requestOptions.maxLat = boundingBox.maxLat;\n                }\n            },\n            zoom: {\n                validators: [validateZoomLevel],\n                converters: [convertInteger],\n                application: parameterApplications.PATH\n            },\n            x: {\n                validators: [validateInteger],\n                converters: [convertInteger],\n                application: parameterApplications.PATH\n            },\n            y: {\n                validators: [validateInteger],\n                converters: [convertInteger],\n                application: parameterApplications.PATH\n            },\n            protocol: {\n                validators: [validateOneOfValue(['http', 'https'], 'protocol')]\n            },\n            sessionId: {\n                validators: [validateString]\n            }\n        };\n    }\n};\n","/**\n * ### New version {{#crossLink \"Services.services.copyrightsCaptionV2\"}}copyrightsCaptionV2{{/crossLink}}\n * The new {{#crossLink \"Services.services.copyrightsCaptionV2\"}}copyrightsCaptionV2{{/crossLink}}\n * service was introduced.\n * We highly recommend using the new V2 version.\n *\n * ### Old version\n * * __The copyrightsCaption service has been deprecated.__\n * * This service will be withdrawn following a 12 months deprecation period.\n * * The planned withdrawal period is June of 2022.\n * * Following withdrawal, requests to this service may receive an HTTP 404 error in response.\n *\n * The copyright caption service implementation provides a caption that is supposed to be displayed on a link\n * that provides the full copyright notice. The response is not changed often.\n *\n * This service is supposed to be called once when user has the map displayed for the first time.\n *\n * ### Response\n * The response from the service is an object containing \"copyrightsCaption\", e.g.:\n * ```\n * {\n *   \"formatVersion\": \"0.0.1\",\n *   \"copyrightsCaption\": \" 1992 - 2021 TomTom.\"\n * }\n *```\n *\n * The response is also extended with `getTrackingId()` method, which returns the `Tracking-ID`\n * associated with the request.\n *\n * This text (\" 1992 - 2021 TomTom.\") has to be displayed as a copyrights prompt when using TomTom services.\n * The caption should be clickable. User should be presented with the full copyrights notice when\n * the caption is clicked. Full copyright notice can be retrieved from the\n * {{#crossLink \"Services.services.copyrights\"}}Copyrights service{{/crossLink}}.\n *\n * @example\n * ```js\n * tt.services.copyrightsCaption({\n *   key: <Your API key>\n*  }).then(function(response) {\n *   console.log(response);\n * });\n * ```\n *\n * @class copyrightsCaption\n * @namespace Services.services\n * @module Services\n * @uses TrackingIdMixin\n * @constructor\n * @uses KeyMixin\n * @uses ProtocolMixin\n * @uses AbortSignalMixin\n *\n * @param {Object} [options]\n * @param {Object} [additionalOptions] Additional options to be passed to the service.\n */\nimport {SERVICE_TYPES} from 'Core/serviceTypes';\nimport parameterApplications from '../../common/parameterApplications';\nimport { modelResponse } from '../../model/modelResponse';\nimport { v4 as uuid } from 'uuid';\nimport {\n    string as validateString, key as validateKey, trackingId as validateTrackingId,\n    oneOfValue as validateOneOfValue\n} from '../validators';\nimport {\n    captionEndpoint\n} from 'endpoints';\nimport { singleRequestServiceFactory, serviceFactory } from '../../core';\n\nconst fields = {\n    key: {\n        validators: [validateKey]\n    },\n    trackingId: {\n        validators: [validateTrackingId],\n        application: parameterApplications.HEADER,\n        defaultValue: uuid\n    },\n    protocol: {\n        validators: [validateOneOfValue(['http', 'https'], 'protocol')]\n    },\n    sessionId: {\n        validators: [validateString]\n    }\n};\n\nexport function copyrightsCaption(options, additionalOptions) {\n    const singleRequest = singleRequestServiceFactory(captionEndpoint);\n    function handleServiceCall(data, abortSignal) {\n        return singleRequest(fields, data, abortSignal).then(modelResponse);\n    }\n    return serviceFactory(\n        fields,\n        SERVICE_TYPES.MAP,\n        'copyrightsCaption',\n        handleServiceCall\n    )(options, additionalOptions);\n}\n","/**\n * The Copyrights service implementation provides a full copyrights notice in a HTML format that can be displayed to\n * the user when the copyrights link is clicked.\n *\n * Parameters need to be passed to the constructor.\n *\n * ### Response\n * The response from the service is a HTML string with the copyrights information that have to be displayed.\n * The whole respose is wrapped into a div element with the id copyrightMessage.\n * ```html\n * <div id=\"copyrightMessage\"><h4>General Copyrights:</h4>\n *  <p> 1992 - 2021 TomTom. All rights reserved. This\n *  material is proprietary and the subject of copyright protection, database\n *  right protection and other intellectual property rights owned by TomTom\n *  or its suppliers. The use of this material is subject to the terms of\n *  a license agreement. Any unauthorized copying or disclosure of this\n *  material will lead to criminal and civil liabilities.,</p>\n *  <p>Data Source  2021 TomTom,</p>\n *  <p>based on https://www.tomtom.com/en_gb/thirdpartyproductterms/</p>\n * </div>\n * ```\n *\n * The response is also extended by `getTrackingId()` method, which returns the `Tracking-ID`\n * associated with the request.\n *\n * @example\n * ```js\n * tt.services.copyrightsV2({\n *   key: <Your API key>\n * }).then(function(response) {\n *    console.log(response);\n * });\n * ```\n *\n * @class copyrightsV2\n * @namespace Services.services\n * @module Services\n * @constructor\n * @uses KeyMixin\n * @uses TrackingIdMixin\n * @uses AbortSignalMixin\n *\n * @param {Object} [options] Options to be passed to the call\n */\n\nimport {SERVICE_TYPES} from 'Core/serviceTypes';\nimport {\n    string as validateString, trackingId as validateTrackingId\n} from '../validators';\nimport parameterApplications from '../../common/parameterApplications';\nimport { v4 as uuid } from 'uuid';\nimport { singleRequestServiceFactory, serviceFactory } from '../../core';\nimport {copyrightsV2Endpoint} from 'endpoints';\nimport { modelResponse } from '../../model/modelResponse';\n\nconst fields = {\n    key: {\n        validators: [validateString]\n    },\n    trackingId: {\n        validators: [validateTrackingId],\n        application: parameterApplications.HEADER,\n        defaultValue: uuid\n    }\n};\n\nexport function copyrightsV2(options, additionalOptions) {\n    const singleRequest = singleRequestServiceFactory(copyrightsV2Endpoint);\n\n    function handleServiceCall(requestOptions, abortSignal) {\n        requestOptions.contentType = 'text';\n        return singleRequest(fields, requestOptions, abortSignal).then(modelResponse);\n    }\n\n    return serviceFactory(\n        fields,\n        SERVICE_TYPES.MAP,\n        'copyrights',\n        handleServiceCall\n    )(options, additionalOptions);\n}\n","/**\n * The copyright caption service implementation provides a caption that is supposed to be displayed on a link\n * that provides the full copyright notice. The response is not changed often.\n *\n * This service is supposed to be called once when user has the map displayed for the first time.\n *\n * ### Response\n * ```\n * {\n *  \"formatVersion\": \"0.0.1\"\n *  \"copyrightsCaption\": \" 1992 - 2021 TomTom.\"\n * }\n * ```\n *\n * The response is also extended with `getTrackingId()` method, which returns the `Tracking-ID`\n * associated with the request.\n *\n * This text (\" 1992 - 2021 TomTom.\") has to be displayed as a copyrights prompt when using TomTom services.\n * The caption should be clickable. A user should be presented with the full copyrights notice when\n * the caption is clicked. Full copyright notice can be retrieved from the\n * {{#crossLink \"Services.services.copyrightsV2\"}}CopyrightsV2 service{{/crossLink}}.\n *\n * @example\n * ```js\n * tt.services.copyrightsCaptionV2({\n *   key: <Your API key>\n*  }).then(function(response) {\n *   console.log(response);\n * });\n * ```\n *\n * @class copyrightsCaptionV2\n * @namespace Services.services\n * @module Services\n * @uses TrackingIdMixin\n * @constructor\n * @uses KeyMixin\n * @uses AbortSignalMixin\n *\n * @param {Object} [options]\n */\n\nimport {SERVICE_TYPES} from 'Core/serviceTypes';\nimport { singleRequestServiceFactory, serviceFactory } from '../../core';\nimport { modelResponse } from '../../model/modelResponse';\nimport parameterApplications from '../../common/parameterApplications';\nimport {\n    key as validateKey, trackingId as validateTrackingId\n} from '../validators';\nimport { captionV2Endpoint } from 'endpoints';\nimport { v4 as uuid } from 'uuid';\n\nconst fields = {\n    key: {\n        validators: [validateKey]\n    },\n    trackingId: {\n        validators: [validateTrackingId],\n        application: parameterApplications.HEADER,\n        defaultValue: uuid\n    }\n};\n\nexport function copyrightsCaptionV2(options, additionalOptions) {\n    const singleRequest = singleRequestServiceFactory(captionV2Endpoint);\n    function handleServiceCall(data, abortSignal) {\n        return singleRequest(fields, data, abortSignal).then(modelResponse);\n    }\n\n    return serviceFactory(\n        fields,\n        SERVICE_TYPES.MAP,\n        'copyrightsCaptionV2',\n        handleServiceCall\n    )(options, additionalOptions);\n}\n","import mainConfig from 'mainConfig';\nimport { setProductInfo } from './requester/analytics';\n\nimport * as searchService from './search';\nimport * as routingService from './routing';\nimport * as trafficService from './traffic';\nimport * as mapDisplayService from './mapDisplay';\n\nconst sdkInfo = {\n    version: mainConfig['sdk.version']\n};\n\nconst services = {\n    ...searchService,\n    ...routingService,\n    ...trafficService,\n    ...mapDisplayService\n};\n\n/**\n * <h3 id=\"overview\">Overview</h3>\n * The Services library provides the necessary tools to integrate all Tomtom services with your application.\n * We take care of all the aspects required to make the calls to the Tomtom APIs, such as the construction of the URL,\n * validation, and error handling. It is worth noting that by using our help, you avoid making mistakes and extra calls\n * to the service.\n *\n * We provide three different bundles of the library:\n *\n * - __services-web.min.js__ - use this file if you want to include the library directly on a web page,\n * it can be imported in the `<head>` of your HTML document.\n * The `tt` global object  will be created and attached to the `window`.\n * - __services.min.js__ - use this file if you are using a module bundler. It conforms the\n * <a target=\"_blank\" rel=noopener href=\"https://github.com/umdjs/umd\">UMD standard</a>.\n * In case you use ES6 imports all you need is: <br/>`import tt from 'services.min.js'`\n * - __services-node.min.js__ - use this file if you want to use our services in Node.js.\n *\n * <div class=\"alert alert-info margin-top-16\">\n * If you want to display a map on the webpage, go to\n * {{#crossLinkModule \"Maps\"}}Maps library documentation{{/crossLinkModule}}.\n *  </div>\n *\n * <h3 id=\"difference_between_api_responses_and_this_librarys_responses\">Difference\n * between API responses and this library's responses</h3>\n * _Services library_ provides an easy way to get responses from APIs like\n * <a href=\"https://developer.tomtom.com/search-api/search-api-documentation\"\n * target=\"_blank\" rel=noopener>Search API</a>,\n * <a href=\"https://developer.tomtom.com/routing-api/routing-api-documentation\"\n * target=\"_blank\" rel=noopener>Routing API</a>\n * or <a href=\"https://developer.tomtom.com/traffic-api/traffic-api-documentation\"\n * target=\"_blank\" rel=noopener>Traffic API</a>.\n * In order to maintain consistency between data types returned by those APIs, and\n * to make it more convenient to use those responses and data types with the\n * {{#crossLinkModule \"Maps\"}}Maps library{{/crossLinkModule}}, **_Services library_ alters\n * original responses**:\n * * point representations like `[lat, lon]`, `'lat, lon'`, `{lon, lat}`, `{latitude, longitude}`, `{x, y}`\n * are mapped to `{lng, lat}` Object type.\n * * some services responses are extended by additional methods like `toGeoJson()`\n * ({{#crossLink \"Services.services.calculateRoute\"}}calculateRoute{{/crossLink}},\n * {{#crossLink \"Services.services.calculateReachableRange\"}}calculateReachableRange{{/crossLink}},\n * {{#crossLink \"Services.services.incidentDetails\"}}incidentDetails{{/crossLink}},\n * {{#crossLink \"Services.services.alongRouteSearch\"}}alongRouteSearch{{/crossLink}},\n * {{#crossLink \"Services.services.placeById\"}}placeById{{/crossLink}},\n * {{#crossLink \"Services.services.fuzzySearch\"}}fuzzySearch{{/crossLink}},\n * {{#crossLink \"Services.services.geometrySearch\"}}geometrySearch{{/crossLink}},\n * {{#crossLink \"Services.services.nearbySearch\"}}nearbySearch{{/crossLink}},\n * {{#crossLink \"Services.services.categorySearch\"}}categorySearch{{/crossLink}},\n * {{#crossLink \"Services.services.poiSearch\"}}poiSearch{{/crossLink}},\n * {{#crossLink \"Services.services.structuredGeocode\"}}structuredGeocode{{/crossLink}},\n * {{#crossLink \"Services.services.geocode\"}}geocode{{/crossLink}}).\n\n * Usage of this method is presented on the documentation page of each service mentioned.\n * * The `getTrackingId()` method is also available as part of the service response\n * in order to obtain the `Tracking-ID` associated with the request.\n *\n * Most services are asynchronous and return\n * <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\"\n * target=\"_blank\" rel=noopener>Promise</a>\n * except for {{#crossLink \"Services.services.staticImage\"}}staticImage{{/crossLink}} and\n * {{#crossLink \"Services.services.poiPhotos\"}}poiPhotos{{/crossLink}}, which return URL string.\n *\n * @module Services\n * @main Services\n */\n\n/**\n * This object aggregates all the services available in TomTom.\n *\n * Please refer to the following documentation to check what properties are on the tt object,\n * and how you can make calls to TomTom services.\n *\n * @class tt\n * @namespace Services\n */\n\n/**\n * @property services\n * @type services\n * @description An object, which contains all supported services.\n */\n\n/**\n * @method sdkInfo\n * @type function\n * @description Returns SDK details (e.g., version).\n * @return {Object}\n */\n\n/**\n * @method setProductInfo\n * @type function\n * @description This method sets the content of the TomTom-User-Agent header. We are collecting anonymous data for\n * statistics of the usage of our services in order to increase the quality of our products.\n * @param {String} productId Identifier (e.g., a name) of your application e.g.,&nbsp;MyApplication\n * @param {String} productVersion Version of your application e.g.,&nbsp;1.0.2\n * @example\n * ```javascript\n * tt.setProductInfo('your-product-id', 'your-product-version');\n * ```\n */\n\nexport default {\n    sdkInfo,\n    setProductInfo,\n    services\n};\n"],"sourceRoot":""}